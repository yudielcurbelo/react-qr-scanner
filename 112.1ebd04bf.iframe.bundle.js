/*! For license information please see 112.1ebd04bf.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_yudiel_react_qr_scanner=self.webpackChunk_yudiel_react_qr_scanner||[]).push([[112],{"./node_modules/barcode-detector/dist/es/index.js"(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{vR:()=>bo});var Ue=o=>{throw TypeError(o)},Ve=(o,l,d)=>l.has(o)||Ue("Cannot "+d),We=(o,l,d)=>(Ve(o,l,"read from private field"),d?d.call(o):l.get(o));const Dt=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],Mt=Dt.map(([o])=>o),Ma=Mt.filter((o,l)=>"L"===Dt[l][1]),Aa=Mt.filter((o,l)=>"M"===Dt[l][1]);function qt(o){switch(o){case"Linear-Codes":return Ma.reduce((l,d)=>l|qt(d),0);case"Matrix-Codes":return Aa.reduce((l,d)=>l|qt(d),0);case"Any":return(1<<Dt.length)-1;case"None":return 0;default:return 1<<Mt.indexOf(o)}}function Fa(o){if(0===o)return"None";const l=31-Math.clz32(o);return Mt[l]}function Ra(o){return o.reduce((l,d)=>l|qt(d),0)}const La=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function ja(o){return La.indexOf(o)}const Ne=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function Ba(o){return"UnicodeBig"===o?Ne.indexOf("UTF16BE"):Ne.indexOf(o)}const Ua=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Va(o){return Ua[o]}const Wa=["Ignore","Read","Require"];function Ha(o){return Wa.indexOf(o)}const ka=["Plain","ECI","HRI","Hex","Escaped"];function Na(o){return ka.indexOf(o)}const It={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function ze(o){return{...o,formats:Ra(o.formats),binarizer:ja(o.binarizer),eanAddOnSymbol:Ha(o.eanAddOnSymbol),textMode:Na(o.textMode),characterSet:Ba(o.characterSet)}}function za(o){return{...o,format:Fa(o.format),contentType:Va(o.contentType),eccLevel:o.ecLevel}}const Ga={locateFile:(o,l)=>{const d=o.match(/_(.+?)\.wasm$/);return d?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.4/dist/${d[1]}/${o}`:l+o}},St=new WeakMap;function Xa(o,l){return Object.is(o,l)||Object.keys(o).length===Object.keys(l).length&&Object.keys(o).every(d=>Object.hasOwn(l,d)&&o[d]===l[d])}function Xe(o,{overrides:l,equalityFn:d=Xa,fireImmediately:b=!1}={}){var f;const[I,D]=null!=(f=St.get(o))?f:[Ga],M=null!=l?l:I;let _;if(b){if(D&&(_=d(I,M)))return D;const A=o({...M});return St.set(o,[M,A]),A}(null!=_?_:d(I,M))||St.set(o,[M])}async function Zt(o={}){var l,d,b,f=o,I=!!globalThis.window,D=typeof Bun<"u",M=!!globalThis.WorkerGlobalScope;null!==(d=globalThis.process)&&void 0!==d&&null!==(d=d.versions)&&void 0!==d&&d.node&&(null===(b=globalThis.process)||void 0===b||b.type);var tt,X,_="./this.program",U="";if(I||M||D){try{U=new URL(".",undefined).href}catch{}M&&(X=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),tt=async t=>{var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw new Error(e.status+" : "+e.url)}}var q,Qt,Jt,Y,W,dt,at,ot,T,Kt,te,pt,nt=console.log.bind(console),V=console.error.bind(console),ht=!1,ee=!1;function re(){var t=Pt.buffer;Y=new Int8Array(t),dt=new Int16Array(t),f.HEAPU8=W=new Uint8Array(t),at=new Uint16Array(t),ot=new Int32Array(t),T=new Uint32Array(t),Kt=new Float32Array(t),te=new Float64Array(t)}function At(t){var e,r;null===(e=f.onAbort)||void 0===e||e.call(f,t),V(t="Aborted("+t+")"),ht=!0,t+=". Build with -sASSERTIONS for more info.";var n=new WebAssembly.RuntimeError(t);throw null===(r=Jt)||void 0===r||r(n),n}function sr(){return function G(t){return f.locateFile?f.locateFile(t,U):U+t}("zxing_reader.wasm")}async function cr(t){if(!q)try{var e=await tt(t);return new Uint8Array(e)}catch{}return function ur(t){if(t==pt&&q)return new Uint8Array(q);if(X)return X(t);throw"both async and sync fetching of the wasm failed"}(t)}async function fr(t,e,r){if(!t&&WebAssembly.instantiateStreaming)try{var n=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,r)}catch(i){V(`wasm streaming compile failed: ${i}`),V("falling back to ArrayBuffer instantiation")}return async function lr(t,e){try{var r=await cr(t);return await WebAssembly.instantiate(r,e)}catch(a){V(`failed to asynchronously prepare wasm: ${a}`),At(a)}}(e,r)}var ne=t=>{for(;t.length>0;)t.shift()(f)},ae=[],pr=t=>ae.push(t),oe=[],yr=t=>oe.push(t),m=t=>_e(t),g=()=>xe(),yt=[],vt=0,H=0;class Ft{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){T[this.ptr+4>>2]=e}get_type(){return T[this.ptr+4>>2]}set_destructor(e){T[this.ptr+8>>2]=e}get_destructor(){return T[this.ptr+8>>2]}set_caught(e){e=e?1:0,Y[this.ptr+12]=e}get_caught(){return 0!=Y[this.ptr+12]}set_rethrown(e){e=e?1:0,Y[this.ptr+13]=e}get_rethrown(){return 0!=Y[this.ptr+13]}init(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)}set_adjusted_ptr(e){T[this.ptr+16>>2]=e}get_adjusted_ptr(){return T[this.ptr+16>>2]}}var mt=t=>Oe(t),Rt=t=>{var e=H;if(!e)return mt(0),0;var r=new Ft(e);r.set_adjusted_ptr(e);var n=r.get_type();if(!n)return mt(0),e;for(var a of t){if(0===a||a===n)break;var i=r.ptr+16;if(De(a,n,i))return mt(a),e}return mt(n),e},gt={},Lt=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function it(t){return this.fromWireType(T[t>>2])}var et={},Z={},wt={},Or=class extends Error{constructor(t){super(t),this.name="InternalError"}},bt=t=>{throw new Or(t)},Q=(t,e,r)=>{function n(u){var c=r(u);c.length!==t.length&&bt("Mismatched type converter count");for(var h=0;h<t.length;++h)j(t[h],c[h])}t.forEach(u=>wt[u]=e);var a=new Array(e.length),i=[],s=0;{const u=e;for(let c=0;c<u.length;++c){const h=u[c];Z.hasOwnProperty(h)?a[c]=Z[h]:(i.push(h),et.hasOwnProperty(h)||(et[h]=[]),et[h].push(()=>{a[c]=Z[h],++s===i.length&&n(a)}))}}0===i.length&&n(a)},F=t=>{for(var e="";;){var r=W[t++];if(!r)return e;e+=String.fromCharCode(r)}},st=class extends Error{constructor(t){super(t),this.name="BindingError"}},$=t=>{throw new st(t)};function j(t,e){return function Sr(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=e.name;if(t||$(`type "${n}" must have a positive integer typeid pointer`),Z.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;$(`Cannot register type '${n}' twice`)}if(Z[t]=e,delete wt[t],et.hasOwnProperty(t)){var a=et[t];delete et[t],a.forEach(i=>i())}}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}var Dr=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),jt=t=>{$(function e(r){return r.$$.ptrType.registeredClass.name}(t)+" instance already deleted")},Bt=!1,ie=t=>{},se=t=>{t.count.value-=1,0===t.count.value&&(t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)})(t)},ut=t=>globalThis.FinalizationRegistry?(Bt=new FinalizationRegistry(e=>{se(e.$$)}),ut=e=>{var r=e.$$;if(!!r.smartPtr){var a={$$:r};Bt.register(e,a,e)}return e},ie=e=>Bt.unregister(e),ut(t)):(ut=e=>e,t);function $t(){}var Ut=(t,e)=>Object.defineProperty(e,"name",{value:t}),ue={},ce=(t,e,r)=>{if(void 0===t[e].overloadTable){var n=t[e];t[e]=function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return t[e].overloadTable.hasOwnProperty(i.length)||$(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${t[e].overloadTable})!`),t[e].overloadTable[i.length].apply(this,i)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}},le=(t,e,r)=>{f.hasOwnProperty(t)?((void 0===r||void 0!==f[t].overloadTable&&void 0!==f[t].overloadTable[r])&&$(`Cannot register public name '${t}' twice`),ce(f,t,t),f[t].overloadTable.hasOwnProperty(r)&&$(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),f[t].overloadTable[r]=e):(f[t]=e,f[t].argCount=r)};function jr(t,e,r,n,a,i,s,u){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=s,this.downcast=u,this.pureVirtualFunctions=[]}var Vt=(t,e,r)=>{for(;e!==r;)e.upcast||$(`Expected null or instance of ${r.name}, got an instance of ${e.name}`),t=e.upcast(t),e=e.baseClass;return t},Wt=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t};function Br(t,e){if(null===e)return this.isReference&&$(`null is not a valid ${this.name}`),0;e.$$||$(`Cannot pass "${Wt(e)}" as a ${this.name}`),e.$$.ptr||$(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=e.$$.ptrType.registeredClass;return Vt(e.$$.ptr,r,this.registeredClass)}function Ur(t,e){var r;if(null===e)return this.isReference&&$(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,r),r):0;(!e||!e.$$)&&$(`Cannot pass "${Wt(e)}" as a ${this.name}`),e.$$.ptr||$(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&$(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var n=e.$$.ptrType.registeredClass;if(r=Vt(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&$("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:$(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var a=e.clone();r=this.rawShare(r,B.toHandle(()=>a.delete())),null!==t&&t.push(this.rawDestructor,r)}break;default:$("Unsupporting sharing policy")}return r}function Vr(t,e){if(null===e)return this.isReference&&$(`null is not a valid ${this.name}`),0;e.$$||$(`Cannot pass "${Wt(e)}" as a ${this.name}`),e.$$.ptr||$(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&$(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var r=e.$$.ptrType.registeredClass;return Vt(e.$$.ptr,r,this.registeredClass)}var fe=(t,e,r)=>{if(e===r)return t;if(void 0===r.baseClass)return null;var n=fe(t,e,r.baseClass);return null===n?null:r.downcast(n)},Wr={},kr=(t,e)=>(e=((t,e)=>{for(void 0===e&&$("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e})(t,e),Wr[e]),Ct=(t,e)=>((!e.ptrType||!e.ptr)&&bt("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!==!!e.smartPtr&&bt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},ut(Object.create(t,{$$:{value:e,writable:!0}})));function Nr(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var r=kr(this.registeredClass,e);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=e,r.$$.smartPtr=t,r.clone();var n=r.clone();return this.destructor(t),n}function a(){return this.isSmartPointer?Ct(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Ct(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var u,i=this.registeredClass.getActualType(e),s=ue[i];if(!s)return a.call(this);u=this.isConst?s.constPointerType:s.pointerType;var c=fe(e,this.registeredClass,u.registeredClass);return null===c?a.call(this):this.isSmartPointer?Ct(u.registeredClass.instancePrototype,{ptrType:u,ptr:c,smartPtrType:this,smartPtr:t}):Ct(u.registeredClass.instancePrototype,{ptrType:u,ptr:c})}function Tt(t,e,r,n,a,i,s,u,c,h,p){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=s,this.rawGetPointee=u,this.rawConstructor=c,this.rawShare=h,this.rawDestructor=p,a||void 0!==e.baseClass?this.toWireType=Ur:n?(this.toWireType=Br,this.destructorFunction=null):(this.toWireType=Vr,this.destructorFunction=null)}var he=(t,e,r)=>{f.hasOwnProperty(t)||bt("Replacing nonexistent public symbol"),void 0!==f[t].overloadTable&&void 0!==r?f[t].overloadTable[r]=e:(f[t]=e,f[t].argCount=r)},N={},de=[],w=t=>{var e=de[t];return e||(de[t]=e=Fe.get(t)),e},Xr=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.includes("j")?((t,e,r)=>(t=t.replace(/p/g,"i"),(0,N[t])(e,...r)))(t,e,r):w(e)(...r)},L=function(t,e){t=F(t);var n=function r(){return t.includes("j")?function(t,e){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return Xr(t,e,a,r)}}(t,e):w(e)}();return"function"!=typeof n&&$(`unknown function pointer with signature ${t}: ${e}`),n};class Yr extends Error{}var pe=t=>{var e=Ee(t),r=F(e);return z(e),r},Et=(t,e)=>{var r=[],n={};throw e.forEach(function a(i){if(!n[i]&&!Z[i]){if(wt[i])return void wt[i].forEach(a);r.push(i),n[i]=!0}}),new Yr(`${t}: `+r.map(pe).join([", "]))},Ht=(t,e)=>{for(var r=[],n=0;n<t;n++)r.push(T[e+4*n>>2]);return r};function kt(t,e,r,n,a,i){var s=e.length;s<2&&$("argTypes array size mismatch! Must at least get return value and 'this' types!");var u=null!==e[1]&&null!==r,c=function Qr(t){for(var e=1;e<t.length;++e)if(null!==t[e]&&void 0===t[e].destructorFunction)return!0;return!1}(e),h=!e[0].isVoid,p=s-2,y=new Array(p),C=[],P=[];return Ut(t,function(){var x;P.length=0,C.length=u?2:1,C[0]=a,u&&(x=e[1].toWireType(P,this),C[1]=x);for(var O=0;O<p;++O)y[O]=e[O+2].toWireType(P,O<0||arguments.length<=O?void 0:arguments[O]),C.push(y[O]);return function K(R){if(c)Lt(P);else for(var k=u?1:2;k<e.length;k++){var Ot=1===k?x:y[k-2];null!==e[k].destructorFunction&&e[k].destructorFunction(Ot)}if(h)return e[0].fromWireType(R)}(n(...C))})}var ye=t=>{const e=(t=t.trim()).indexOf("(");return-1===e?t:t.slice(0,e)},ve=[],J=[0,1,,1,null,1,!0,1,!1,1],Nt=t=>{t>9&&0===--J[t+1]&&(J[t]=void 0,ve.push(t))},B={toValue:t=>(t||$(`Cannot use deleted val. handle = ${t}`),J[t]),toHandle:t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=ve.pop()||J.length;return J[e]=t,J[e+1]=1,e}}}},me={name:"emscripten::val",fromWireType:t=>{var e=B.toValue(t);return Nt(t),e},toWireType:(t,e)=>B.toHandle(e),readValueFromPointer:it,destructorFunction:null},en=(t,e)=>{switch(e){case 4:return function(r){return this.fromWireType(Kt[r>>2])};case 8:return function(r){return this.fromWireType(te[r>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},an=(t,e,r)=>{switch(e){case 1:return r?n=>Y[n]:n=>W[n];case 2:return r?n=>dt[n>>1]:n=>at[n>>1];case 4:return r?n=>ot[n>>2]:n=>T[n>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},un=Object.assign({optional:!0},me),rt=(t,e,r)=>((t,e,r,n)=>{if(!(n>0))return 0;for(var a=r,i=r+n-1,s=0;s<t.length;++s){var u=t.codePointAt(s);if(u<=127){if(r>=i)break;e[r++]=u}else if(u<=2047){if(r+1>=i)break;e[r++]=192|u>>6,e[r++]=128|63&u}else if(u<=65535){if(r+2>=i)break;e[r++]=224|u>>12,e[r++]=128|u>>6&63,e[r++]=128|63&u}else{if(r+3>=i)break;e[r++]=240|u>>18,e[r++]=128|u>>12&63,e[r++]=128|u>>6&63,e[r++]=128|63&u,s++}}return e[r]=0,r-a})(t,W,e,r),ge=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e},we=globalThis.TextDecoder&&new TextDecoder,be=(t,e,r,n)=>{var a=e+r;if(n)return a;for(;t[e]&&!(e>=a);)++e;return e},$e=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;var a=be(t,e,arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0);if(a-e>16&&t.buffer&&we)return we.decode(t.subarray(e,a));for(var i="";e<a;){var s=t[e++];if(128&s){var u=63&t[e++];if(192!=(224&s)){var c=63&t[e++];if((s=224==(240&s)?(15&s)<<12|u<<6|c:(7&s)<<18|u<<12|c<<6|63&t[e++])<65536)i+=String.fromCharCode(s);else{var h=s-65536;i+=String.fromCharCode(55296|h>>10,56320|1023&h)}}else i+=String.fromCharCode((31&s)<<6|u)}else i+=String.fromCharCode(s)}return i},Ce=globalThis.TextDecoder?new TextDecoder("utf-16le"):void 0,dn=(t,e,r)=>{var n=t>>1,a=be(at,n,e/2,r);if(a-n>16&&Ce)return Ce.decode(at.subarray(n,a));for(var i="",s=n;s<a;++s){var u=at[s];i+=String.fromCharCode(u)}return i},pn=(t,e,r)=>{if(null!=r||(r=2147483647),r<2)return 0;for(var n=e,a=(r-=2)<2*t.length?r/2:t.length,i=0;i<a;++i){var s=t.charCodeAt(i);dt[e>>1]=s,e+=2}return dt[e>>1]=0,e-n},yn=t=>2*t.length,vn=(t,e,r)=>{for(var n="",a=t>>2,i=0;!(i>=e/4);i++){var s=T[a+i];if(!s&&!r)break;n+=String.fromCodePoint(s)}return n},mn=(t,e,r)=>{if(null!=r||(r=2147483647),r<4)return 0;for(var n=e,a=n+r-4,i=0;i<t.length;++i){var s=t.codePointAt(i);if(s>65535&&i++,ot[e>>2]=s,(e+=4)+4>a)break}return ot[e>>2]=0,e-n},gn=t=>{for(var e=0,r=0;r<t.length;++r){t.codePointAt(r)>65535&&r++,e+=4}return e},zt=[],En=(t,e)=>{var r=Z[t];return void 0===r&&$(`${e} has unknown type ${pe(t)}`),r},_n={},Te=t=>{var e=_n[t];return void 0===e?F(t):e},Rn=(t,e)=>Math.ceil(t/e)*e,Ln=t=>{var r=(t-Pt.buffer.byteLength+65535)/65536|0;try{return Pt.grow(r),re(),1}catch{}},Gt={},ct=()=>{if(!ct.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.language||"C").replace("-","_")+".UTF-8",_:_||"./this.program"};for(var r in Gt)void 0===Gt[r]?delete e[r]:e[r]=Gt[r];var n=[];for(var r in e)n.push(`${r}=${e[r]}`);ct.strings=n}return ct.strings};var Ee,z,Xt,Pe,v,Oe,_e,xe,Se,Ie,De,Me,Ae,Pt,Fe,kn=[null,[],[]],Nn=(t,e)=>{var r=kn[t];0===e||10===e?((1===t?nt:V)($e(r)),r.length=0):r.push(e)};if((()=>{let t=$t.prototype;Object.assign(t,{isAliasOf(r){if(!(this instanceof $t&&r instanceof $t))return!1;var n=this.$$.ptrType.registeredClass,a=this.$$.ptr;r.$$=r.$$;for(var i=r.$$.ptrType.registeredClass,s=r.$$.ptr;n.baseClass;)a=n.upcast(a),n=n.baseClass;for(;i.baseClass;)s=i.upcast(s),i=i.baseClass;return n===i&&a===s},clone(){if(this.$$.ptr||jt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=ut(Object.create(Object.getPrototypeOf(this),{$$:{value:Dr(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||jt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$("Object already scheduled for deletion"),ie(this),se(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||jt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&$("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const e=Symbol.dispose;e&&(t[e]=t.delete)})(),Object.assign(Tt.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var e;null===(e=this.rawDestructor)||void 0===e||e.call(this,t)},readValueFromPointer:it,fromWireType:Nr}),f.noExitRuntime&&f.noExitRuntime,f.print&&(nt=f.print),f.printErr&&(V=f.printErr),f.wasmBinary&&(q=f.wasmBinary),f.arguments&&f.arguments,f.thisProgram&&(_=f.thisProgram),f.preInit)for("function"==typeof f.preInit&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.shift()();var lt,qn={s:t=>{var e=new Ft(t);return e.get_caught()||(e.set_caught(!0),vt--),e.set_rethrown(!1),yt.push(e),Ie(t),Pe(t)},w:()=>{v(0,0);var t=yt.pop();Se(t.excPtr),H=0},a:()=>Rt([]),j:t=>Rt([t]),m:(t,e)=>Rt([t,e]),Q:()=>{var t=yt.pop();t||At("no exception to throw");var e=t.excPtr;throw t.get_rethrown()||(yt.push(t),t.set_rethrown(!0),t.set_caught(!1),vt++),H=e},p:(t,e,r)=>{throw new Ft(t).init(e,r),vt++,H=t},U:()=>vt,d:t=>{throw H||(H=t),H},ca:()=>At(""),ta:t=>{var e=gt[t];delete gt[t];var r=e.rawConstructor,n=e.rawDestructor,a=e.fields,i=a.map(s=>s.getterReturnType).concat(a.map(s=>s.setterArgumentType));Q([t],i,s=>{var u={};{const c=a;for(let h=0;h<c.length;++h){const p=c[h],y=s[h],C=p.getter,P=p.getterContext,S=s[h+a.length],x=p.setter,O=p.setterContext;u[p.fieldName]={read:E=>y.fromWireType(C(P,E)),write:(E,K)=>{var R=[];x(O,E,S.toWireType(R,K)),Lt(R)},optional:y.optional}}}return[{name:e.name,fromWireType:c=>{var h={};for(var p in u)h[p]=u[p].read(c);return n(c),h},toWireType:(c,h)=>{for(var p in u)if(!(p in h)&&!u[p].optional)throw new TypeError(`Missing field: "${p}"`);var y=r();for(p in u)u[p].write(y,h[p]);return null!==c&&c.push(n,y),y},readValueFromPointer:it,destructorFunction:n}]})},ba:(t,e,r,n,a)=>{},oa:(t,e,r,n)=>{j(t,{name:e=F(e),fromWireType:function(a){return!!a},toWireType:function(a,i){return i?r:n},readValueFromPointer:function(a){return this.fromWireType(W[a])},destructorFunction:null})},ra:(t,e,r,n,a,i,s,u,c,h,p,y,C)=>{p=F(p),i=L(a,i),u&&(u=L(s,u)),h&&(h=L(c,h)),C=L(y,C);var P=(t=>{var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=48&&e<=57?`_${t}`:t})(p);le(P,function(){Et(`Cannot construct ${p} due to unbound types`,[n])}),Q([t,e,r],n?[n]:[],S=>{var x,O;S=S[0],n?O=(x=S.registeredClass).instancePrototype:O=$t.prototype;var E=Ut(p,function(){if(Object.getPrototypeOf(this)!==K)throw new st(`Use 'new' to construct ${p}`);if(void 0===R.constructor_body)throw new st(`${p} has no accessible constructor`);for(var je=arguments.length,_t=new Array(je),xt=0;xt<je;xt++)_t[xt]=arguments[xt];var Be=R.constructor_body[_t.length];if(void 0===Be)throw new st(`Tried to invoke ctor of ${p} with invalid number of parameters (${_t.length}) - expected (${Object.keys(R.constructor_body).toString()}) parameters instead!`);return Be.apply(this,_t)}),K=Object.create(O,{constructor:{value:E}});E.prototype=K;var k,Ot,R=new jr(p,E,K,C,x,i,u,h);R.baseClass&&(null!==(Ot=(k=R.baseClass).__derivedClasses)&&void 0!==Ot||(k.__derivedClasses=[]),R.baseClass.__derivedClasses.push(R));var Da=new Tt(p,R,!0,!1,!1),Re=new Tt(p+"*",R,!1,!1,!1),Le=new Tt(p+" const*",R,!1,!0,!1);return ue[t]={pointerType:Re,constPointerType:Le},he(P,E),[Da,Re,Le]})},qa:(t,e,r,n,a,i)=>{var s=Ht(e,r);a=L(n,a),Q([],[t],u=>{var c=`constructor ${(u=u[0]).name}`;if(void 0===u.registeredClass.constructor_body&&(u.registeredClass.constructor_body=[]),void 0!==u.registeredClass.constructor_body[e-1])throw new st(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${u.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return u.registeredClass.constructor_body[e-1]=()=>{Et(`Cannot construct ${u.name} due to unbound types`,s)},Q([],s,h=>(h.splice(1,0,null),u.registeredClass.constructor_body[e-1]=kt(c,h,null,a,i),[])),[]})},H:(t,e,r,n,a,i,s,u,c,h)=>{var p=Ht(r,n);e=F(e),e=ye(e),i=L(a,i),Q([],[t],y=>{var C=`${(y=y[0]).name}.${e}`;function P(){Et(`Cannot call ${C} due to unbound types`,p)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),u&&y.registeredClass.pureVirtualFunctions.push(e);var S=y.registeredClass.instancePrototype,x=S[e];return void 0===x||void 0===x.overloadTable&&x.className!==y.name&&x.argCount===r-2?(P.argCount=r-2,P.className=y.name,S[e]=P):(ce(S,e,C),S[e].overloadTable[r-2]=P),Q([],p,O=>{var E=kt(C,O,y,i,s);return void 0===S[e].overloadTable?(E.argCount=r-2,S[e]=E):S[e].overloadTable[r-2]=E,[]}),[]})},ma:t=>j(t,me),X:(t,e,r)=>{j(t,{name:e=F(e),fromWireType:n=>n,toWireType:(n,a)=>a,readValueFromPointer:en(e,r),destructorFunction:null})},Y:(t,e,r,n,a,i,s,u)=>{var c=Ht(e,r);t=F(t),t=ye(t),a=L(n,a),le(t,function(){Et(`Cannot call ${t} due to unbound types`,c)},e-1),Q([],c,h=>{var p=[h[0],null].concat(h.slice(1));return he(t,kt(t,p,null,a,i),e-1),[]})},x:(t,e,r,n,a)=>{e=F(e);let s=c=>c;if(0===n){var u=32-8*r;s=c=>c<<u>>>u,a=s(a)}j(t,{name:e,fromWireType:s,toWireType:(c,h)=>h,readValueFromPointer:an(e,r,0!==n),destructorFunction:null})},t:(t,e,r)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function i(s){var u=T[s>>2],c=T[s+4>>2];return new a(Y.buffer,c,u)}j(t,{name:r=F(r),fromWireType:i,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},sa:(t,e)=>{j(t,un)},na:(t,e)=>{j(t,{name:e=F(e),fromWireType(r){var i;return i=((t,e,r)=>t?$e(W,t,e,r):"")(r+4,T[r>>2],!0),z(r),i},toWireType(r,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a,i="string"==typeof n;i||ArrayBuffer.isView(n)&&1==n.BYTES_PER_ELEMENT||$("Cannot pass non-string to std::string"),a=i?ge(n):n.length;var s=Xt(4+a+1),u=s+4;return T[s>>2]=a,i?rt(n,u,a+1):W.set(n,u),null!==r&&r.push(z,s),s},readValueFromPointer:it,destructorFunction(r){z(r)}})},R:(t,e,r)=>{var n,a,i;r=F(r),2===e?(n=dn,a=pn,i=yn):(n=vn,a=mn,i=gn),j(t,{name:r,fromWireType:s=>{var u=T[s>>2],c=n(s+4,u*e,!0);return z(s),c},toWireType:(s,u)=>{"string"!=typeof u&&$(`Cannot pass non-string to C++ string type ${r}`);var c=i(u),h=Xt(4+c+e);return T[h>>2]=c/e,a(u,h+4,c+e),null!==s&&s.push(z,h),h},readValueFromPointer:it,destructorFunction(s){z(s)}})},I:(t,e,r,n,a,i)=>{gt[t]={name:F(e),rawConstructor:L(r,n),rawDestructor:L(a,i),fields:[]}},ua:(t,e,r,n,a,i,s,u,c,h)=>{gt[t].fields.push({fieldName:F(e),getterReturnType:r,getter:L(n,a),getterContext:i,setterArgumentType:s,setter:L(u,c),setterContext:h})},pa:(t,e)=>{j(t,{isVoid:!0,name:e=F(e),fromWireType:()=>{},toWireType:(r,n)=>{}})},N:(t,e,r)=>{var[a,...i]=((t,e)=>{for(var r=new Array(t),n=0;n<t;++n)r[n]=En(T[e+4*n>>2],`parameter ${n}`);return r})(t,e),s=a.toWireType.bind(a),u=i.map(y=>y.readValueFromPointer.bind(y));t--;var c=new Array(t),p=`methodCaller<(${i.map(y=>y.name)}) => ${a.name}>`;return(t=>{var e=zt.length;return zt.push(t),e})(Ut(p,(y,C,P,S)=>{for(var x=0,O=0;O<t;++O)c[O]=u[O](S+x),x+=8;var E;switch(r){case 0:E=B.toValue(y).apply(null,c);break;case 2:E=Reflect.construct(B.toValue(y),c);break;case 3:E=c[0];break;case 1:E=B.toValue(y)[Te(C)](...c)}return((t,e,r)=>{var n=[],a=t(n,r);return n.length&&(T[e>>2]=B.toHandle(n)),a})(s,P,E)}))},va:Nt,D:t=>t?(t=Te(t),B.toHandle(globalThis[t])):B.toHandle(globalThis),S:t=>{t>9&&(J[t+1]+=1)},M:(t,e,r,n,a)=>zt[t](e,r,n,a),ia:t=>{var e=B.toValue(t);Lt(e),Nt(t)},da:(t,e,r,n)=>{var a=(new Date).getFullYear(),i=new Date(a,0,1),s=new Date(a,6,1),u=i.getTimezoneOffset(),c=s.getTimezoneOffset(),h=Math.max(u,c);T[t>>2]=60*h,ot[e>>2]=+(u!=c);var p=P=>{var S=P>=0?"-":"+",x=Math.abs(P);return`UTC${S}${String(Math.floor(x/60)).padStart(2,"0")}${String(x%60).padStart(2,"0")}`},y=p(u),C=p(c);c<u?(rt(y,r,17),rt(C,n,17)):(rt(y,n,17),rt(C,r,17))},ga:t=>{var e=W.length,r=2147483648;if((t>>>=0)>r)return!1;for(var n=1;n<=4;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var i=Math.min(r,Rn(Math.max(t,a),65536));if(Ln(i))return!0}return!1},ea:(t,e)=>{var r=0,n=0;for(var a of ct()){var i=e+r;T[t+n>>2]=i,r+=rt(a,i,1/0)+1,n+=4}return 0},fa:(t,e)=>{var r=ct();T[t>>2]=r.length;var n=0;for(var a of r)n+=ge(a)+1;return T[e>>2]=n,0},ha:t=>52,$:function Hn(t,e,r,n,a){return 70},V:(t,e,r,n)=>{for(var a=0,i=0;i<r;i++){var s=T[e>>2],u=T[e+4>>2];e+=8;for(var c=0;c<u;c++)Nn(t,W[s+c]);a+=u}return T[n>>2]=a,0},K:function ma(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(i){if(m(a),i!==i+0)throw i;v(1,0)}},C:function ba(t,e,r,n,a,i){var s=g();try{return w(t)(e,r,n,a,i)}catch(u){if(m(s),u!==u+0)throw u;v(1,0)}},Z:function ea(t,e,r,n,a,i){var s=g();try{return w(t)(e,r,n,a,i)}catch(u){if(m(s),u!==u+0)throw u;v(1,0)}},T:function Oa(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(i){if(m(a),i!==i+0)throw i;v(1,0)}},r:function da(t){var e=g();try{return w(t)()}catch(r){if(m(e),r!==r+0)throw r;v(1,0)}},b:function Kn(t,e){var r=g();try{return w(t)(e)}catch(n){if(m(r),n!==n+0)throw n;v(1,0)}},E:function va(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(i){if(m(a),i!==i+0)throw i;v(1,0)}},ka:function Ca(t,e,r){var n=g();try{return w(t)(e,r)}catch(a){if(m(n),a!==a+0)throw a;v(1,0)}},c:function ra(t,e,r){var n=g();try{return w(t)(e,r)}catch(a){if(m(n),a!==a+0)throw a;v(1,0)}},ja:function Ta(t,e,r,n,a){var i=g();try{return w(t)(e,r,n,a)}catch(s){if(m(i),s!==s+0)throw s;v(1,0)}},h:function ta(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(i){if(m(a),i!==i+0)throw i;v(1,0)}},i:function oa(t,e,r,n,a){var i=g();try{return w(t)(e,r,n,a)}catch(s){if(m(i),s!==s+0)throw s;v(1,0)}},q:function ca(t,e,r,n,a,i){var s=g();try{return w(t)(e,r,n,a,i)}catch(u){if(m(s),u!==u+0)throw u;v(1,0)}},P:function ya(t,e,r,n,a,i,s){var u=g();try{return w(t)(e,r,n,a,i,s)}catch(c){if(m(u),c!==c+0)throw c;v(1,0)}},v:function fa(t,e,r,n,a,i,s){var u=g();try{return w(t)(e,r,n,a,i,s)}catch(c){if(m(u),c!==c+0)throw c;v(1,0)}},F:function ha(t,e,r,n,a,i,s,u){var c=g();try{return w(t)(e,r,n,a,i,s,u)}catch(h){if(m(c),h!==h+0)throw h;v(1,0)}},L:function pa(t,e,r,n,a,i,s,u,c){var h=g();try{return w(t)(e,r,n,a,i,s,u,c)}catch(p){if(m(h),p!==p+0)throw p;v(1,0)}},z:function $a(t,e,r,n,a,i,s,u,c,h){var p=g();try{return w(t)(e,r,n,a,i,s,u,c,h)}catch(y){if(m(p),y!==y+0)throw y;v(1,0)}},J:function _a(t,e,r,n,a,i,s,u,c,h,p,y){var C=g();try{return w(t)(e,r,n,a,i,s,u,c,h,p,y)}catch(P){if(m(C),P!==P+0)throw P;v(1,0)}},aa:function xa(t,e,r,n,a,i,s){var u=g();try{return Me(t,e,r,n,a,i,s)}catch(c){if(m(u),c!==c+0)throw c;v(1,0)}},_:function Sa(t,e,r,n,a){var i=g();try{return Ae(t,e,r,n,a)}catch(s){if(m(i),s!==s+0)throw s;v(1,0)}},f:function na(t){var e=g();try{w(t)()}catch(r){if(m(e),r!==r+0)throw r;v(1,0)}},l:function Yn(t,e){var r=g();try{w(t)(e)}catch(n){if(m(r),n!==n+0)throw n;v(1,0)}},e:function Jn(t,e,r){var n=g();try{w(t)(e,r)}catch(a){if(m(n),a!==a+0)throw a;v(1,0)}},g:function Qn(t,e,r,n){var a=g();try{w(t)(e,r,n)}catch(i){if(m(a),i!==i+0)throw i;v(1,0)}},O:function Pa(t,e,r,n,a,i,s){var u=g();try{w(t)(e,r,n,a,i,s)}catch(c){if(m(u),c!==c+0)throw c;v(1,0)}},k:function Zn(t,e,r,n,a){var i=g();try{w(t)(e,r,n,a)}catch(s){if(m(i),s!==s+0)throw s;v(1,0)}},la:function ga(t,e,r,n,a,i,s,u){var c=g();try{w(t)(e,r,n,a,i,s,u)}catch(h){if(m(c),h!==h+0)throw h;v(1,0)}},o:function la(t,e,r,n,a,i){var s=g();try{w(t)(e,r,n,a,i)}catch(u){if(m(s),u!==u+0)throw u;v(1,0)}},B:function ia(t,e,r,n,a,i,s){var u=g();try{w(t)(e,r,n,a,i,s)}catch(c){if(m(u),c!==c+0)throw c;v(1,0)}},u:function wa(t,e,r,n,a,i,s,u){var c=g();try{w(t)(e,r,n,a,i,s,u)}catch(h){if(m(c),h!==h+0)throw h;v(1,0)}},W:function ua(t,e,r,n,a,i,s,u,c){var h=g();try{w(t)(e,r,n,a,i,s,u,c)}catch(p){if(m(h),p!==p+0)throw p;v(1,0)}},A:function Ea(t,e,r,n,a,i,s,u,c,h){var p=g();try{w(t)(e,r,n,a,i,s,u,c,h)}catch(y){if(m(p),y!==y+0)throw y;v(1,0)}},n:function aa(t,e,r,n,a,i,s,u,c,h,p){var y=g();try{w(t)(e,r,n,a,i,s,u,c,h,p)}catch(C){if(m(y),C!==C+0)throw C;v(1,0)}},G:function sa(t,e,r,n,a,i,s,u,c,h,p,y,C,P,S,x){var O=g();try{w(t)(e,r,n,a,i,s,u,c,h,p,y,C,P,S,x)}catch(E){if(m(O),E!==E+0)throw E;v(1,0)}},y:t=>t};return lt=await async function dr(){function t(i,s){return function Xn(t){Ee=t.ya,z=f._free=t.za,Xt=f._malloc=t.Ba,Pe=t.Ca,v=t.Da,Oe=t.Ea,_e=t.Fa,xe=t.Ga,Se=t.Ha,Ie=t.Ia,De=t.Ja,N.viijii=t.Ka,Me=N.iiijj=t.La,N.jiji=t.Ma,Ae=N.jiiii=t.Na,N.iiiiij=t.Oa,N.iiiiijj=t.Pa,N.iiiiiijj=t.Qa,Pt=t.wa,Fe=t.Aa}(lt=i.exports),re(),lt}var r=function hr(){return{a:qn}}();return f.instantiateWasm?new Promise((i,s)=>{f.instantiateWasm(r,(u,c)=>{i(t(u))})}):(null!=pt||(pt=sr()),function e(i){return t(i.instance)}(await fr(q,pt,r)))}(),function Ia(){function t(){var e,r;f.calledRun=!0,!ht&&(function or(){ee=!0,lt.xa()}(),null===(e=Qt)||void 0===e||e(f),null===(r=f.onRuntimeInitialized)||void 0===r||r.call(f),function ir(){if(f.postRun)for("function"==typeof f.postRun&&(f.postRun=[f.postRun]);f.postRun.length;)pr(f.postRun.shift());ne(ae)}())}!function ar(){if(f.preRun)for("function"==typeof f.preRun&&(f.preRun=[f.preRun]);f.preRun.length;)yr(f.preRun.shift());ne(oe)}(),f.setStatus?(f.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>f.setStatus(""),1),t()},1)):t()}(),l=ee?f:new Promise((t,e)=>{Qt=t,Jt=e}),l}function qe(o){return Xe(Zt,o)}async function Za(o,l){return async function Ya(o,l,d=It){const b={...It,...d},f=await Xe(o,{fireImmediately:!0});let I,D;if("width"in l&&"height"in l&&"data"in l){const{data:_,data:{byteLength:A},width:U,height:G}=l;D=f._malloc(A),f.HEAPU8.set(_,D),I=f.readBarcodesFromPixmap(D,U,G,ze(b))}else{let _,A;if("buffer"in l)[_,A]=[l.byteLength,l];else if("byteLength"in l)[_,A]=[l.byteLength,new Uint8Array(l)];else{if(!("size"in l))throw new TypeError("Invalid input type");[_,A]=[l.size,new Uint8Array(await l.arrayBuffer())]}D=f._malloc(_),f.HEAPU8.set(A,D),I=f.readBarcodesFromImage(D,_,ze(b))}f._free(D);const M=[];for(let _=0;_<I.size();++_)M.push(za(I.get(_)));return M}(Zt,o,l)}const Ye=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],Qa=[...Ye,["unknown"]].map(o=>o[0]),Yt=new Map(Ye);function Ja(o){for(const[l,d]of Yt)if(o===d)return l;return"unknown"}function Ze(o){var l,d;try{return o instanceof(null==(d=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:d.HTMLImageElement)}catch{return!1}}function Qe(o){var l,d;try{return o instanceof(null==(d=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:d.SVGImageElement)}catch{return!1}}function Je(o){var l,d;try{return o instanceof(null==(d=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:d.HTMLVideoElement)}catch{return!1}}function Ke(o){var l,d;try{return o instanceof(null==(d=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:d.HTMLCanvasElement)}catch{return!1}}function tr(o){try{return o instanceof ImageBitmap||"[object ImageBitmap]"===Object.prototype.toString.call(o)}catch{return!1}}function er(o){try{return o instanceof OffscreenCanvas||"[object OffscreenCanvas]"===Object.prototype.toString.call(o)}catch{return!1}}function rr(o){try{return o instanceof VideoFrame||"[object VideoFrame]"===Object.prototype.toString.call(o)}catch{return!1}}async function nr(o){if(Ze(o)&&!await async function io(o){try{return await o.decode(),!0}catch{return!1}}(o))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Qe(o)&&!await async function so(o){var l;try{return await(null==(l=o.decode)?void 0:l.call(o)),!0}catch{return!1}}(o))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(rr(o)&&function uo(o){return null===o.format}(o))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(Je(o)&&(0===o.readyState||1===o.readyState))throw new DOMException("Invalid element or state.","InvalidStateError");if(tr(o)&&function lo(o){return 0===o.width&&0===o.height}(o))throw new DOMException("The image source is detached.","InvalidStateError");const{width:l,height:d}=function Ka(o){if(Ze(o))return{width:o.naturalWidth,height:o.naturalHeight};if(Qe(o))return{width:o.width.baseVal.value,height:o.height.baseVal.value};if(Je(o))return{width:o.videoWidth,height:o.videoHeight};if(tr(o))return{width:o.width,height:o.height};if(rr(o))return{width:o.displayWidth,height:o.displayHeight};if(Ke(o))return{width:o.width,height:o.height};if(er(o))return{width:o.width,height:o.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}(o);if(0===l||0===d)return null;const f=function ro(o,l){try{const d=new OffscreenCanvas(o,l);if(d.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return d;throw void 0}catch{const d=document.createElement("canvas");return d.width=o,d.height=l,d}}(l,d).getContext("2d");f.drawImage(o,0,0);try{return f.getImageData(0,0,l,d)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function oo(o){if(function to(o){try{return o instanceof Blob||"[object Blob]"===Object.prototype.toString.call(o)}catch{return!1}}(o))return await async function no(o){let l;try{l=await createImageBitmap(o)}catch{try{if(!globalThis.Image)return o;{l=new Image;let f="";try{f=URL.createObjectURL(o),l.src=f,await l.decode()}finally{URL.revokeObjectURL(f)}}}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await nr(l)}(o);if(function eo(o){try{return o instanceof ImageData||"[object ImageData]"===Object.prototype.toString.call(o)}catch{return!1}}(o)){if(function co(o){return 0===o.data.buffer.byteLength}(o))throw new DOMException("The image data has been detached.","InvalidStateError");return o}return Ke(o)||er(o)?function ao(o){const{width:l,height:d}=o;if(0===l||0===d)return null;const b=o.getContext("2d");try{return b.getImageData(0,0,l,d)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}(o):await nr(o)}function Ge(o,l){return function fo(o){return o instanceof DOMException||"[object DOMException]"===Object.prototype.toString.call(o)}(o)?new DOMException(`${l}: ${o.message}`,o.name):function ho(o){return o instanceof Error||"[object Error]"===Object.prototype.toString.call(o)}(o)?new o.constructor(`${l}: ${o.message}`):new Error(`${l}: ${o}`)}var ft;class bo{constructor(l={}){var d;((o,l,d)=>{l.has(o)?Ue("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(o):l.set(o,d)})(this,ft);try{const b=null==(d=null==l?void 0:l.formats)?void 0:d.filter(f=>"unknown"!==f);if(0===(null==b?void 0:b.length))throw new TypeError("Hint option provided, but is empty.");for(const f of null!=b?b:[])if(!Yt.has(f))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${f}' is not a valid enum value of type BarcodeFormat.`);((o,l,d,b)=>{Ve(o,l,"write to private field"),b?b.call(o,d):l.set(o,d)})(this,ft,null!=b?b:[]),qe({fireImmediately:!0}).catch(()=>{})}catch(b){throw Ge(b,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return Qa.filter(l=>"unknown"!==l)}async detect(l){try{const d=await oo(l);if(null===d)return[];let b;const f={tryCode39ExtendedMode:!1,textMode:"Plain",formats:We(this,ft).map(I=>Yt.get(I))};try{b=await Za(d,f)}catch(I){throw console.error(I),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return b.map(I=>{const{topLeft:{x:D,y:M},topRight:{x:_,y:A},bottomLeft:{x:U,y:G},bottomRight:{x:tt,y:X}}=I.position,nt=Math.min(D,_,U,tt),V=Math.min(M,A,G,X),q=Math.max(D,_,U,tt),ht=Math.max(M,A,G,X);return{boundingBox:new DOMRectReadOnly(nt,V,q-nt,ht-V),rawValue:I.text,format:Ja(I.format),cornerPoints:[{x:D,y:M},{x:_,y:A},{x:tt,y:X},{x:U,y:G}]}})}catch(d){throw Ge(d,"Failed to execute 'detect' on 'BarcodeDetector'")}}}ft=new WeakMap,null!=globalThis.BarcodeDetector||(globalThis.BarcodeDetector=bo)},"./node_modules/react/cjs/react-jsx-runtime.production.js"(__unused_webpack_module,exports){var REACT_ELEMENT_TYPE=Symbol.for("react.transitional.element");function jsxProd(type,config,maybeKey){var key=null;if(void 0!==maybeKey&&(key=""+maybeKey),void 0!==config.key&&(key=""+config.key),"key"in config)for(var propName in maybeKey={},config)"key"!==propName&&(maybeKey[propName]=config[propName]);else maybeKey=config;return config=maybeKey.ref,{$$typeof:REACT_ELEMENT_TYPE,type,key,ref:void 0!==config?config:null,props:maybeKey}}Symbol.for("react.fragment"),exports.jsx=jsxProd,exports.jsxs=jsxProd},"./node_modules/react/jsx-runtime.js"(module,__unused_webpack_exports,__webpack_require__){module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.js")},"./node_modules/sdp/sdp.js"(module){const SDPUtils={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};SDPUtils.localCName=SDPUtils.generateIdentifier(),SDPUtils.splitLines=function(blob){return blob.trim().split("\n").map(line=>line.trim())},SDPUtils.splitSections=function(blob){return blob.split("\nm=").map((part,index)=>(index>0?"m="+part:part).trim()+"\r\n")},SDPUtils.getDescription=function(blob){const sections=SDPUtils.splitSections(blob);return sections&&sections[0]},SDPUtils.getMediaSections=function(blob){const sections=SDPUtils.splitSections(blob);return sections.shift(),sections},SDPUtils.matchPrefix=function(blob,prefix){return SDPUtils.splitLines(blob).filter(line=>0===line.indexOf(prefix))},SDPUtils.parseCandidate=function(line){let parts;parts=0===line.indexOf("a=candidate:")?line.substring(12).split(" "):line.substring(10).split(" ");const candidate={foundation:parts[0],component:{1:"rtp",2:"rtcp"}[parts[1]]||parts[1],protocol:parts[2].toLowerCase(),priority:parseInt(parts[3],10),ip:parts[4],address:parts[4],port:parseInt(parts[5],10),type:parts[7]};for(let i=8;i<parts.length;i+=2)switch(parts[i]){case"raddr":candidate.relatedAddress=parts[i+1];break;case"rport":candidate.relatedPort=parseInt(parts[i+1],10);break;case"tcptype":candidate.tcpType=parts[i+1];break;case"ufrag":candidate.ufrag=parts[i+1],candidate.usernameFragment=parts[i+1];break;default:void 0===candidate[parts[i]]&&(candidate[parts[i]]=parts[i+1])}return candidate},SDPUtils.writeCandidate=function(candidate){const sdp=[];sdp.push(candidate.foundation);const component=candidate.component;"rtp"===component?sdp.push(1):"rtcp"===component?sdp.push(2):sdp.push(component),sdp.push(candidate.protocol.toUpperCase()),sdp.push(candidate.priority),sdp.push(candidate.address||candidate.ip),sdp.push(candidate.port);const type=candidate.type;return sdp.push("typ"),sdp.push(type),"host"!==type&&candidate.relatedAddress&&candidate.relatedPort&&(sdp.push("raddr"),sdp.push(candidate.relatedAddress),sdp.push("rport"),sdp.push(candidate.relatedPort)),candidate.tcpType&&"tcp"===candidate.protocol.toLowerCase()&&(sdp.push("tcptype"),sdp.push(candidate.tcpType)),(candidate.usernameFragment||candidate.ufrag)&&(sdp.push("ufrag"),sdp.push(candidate.usernameFragment||candidate.ufrag)),"candidate:"+sdp.join(" ")},SDPUtils.parseIceOptions=function(line){return line.substring(14).split(" ")},SDPUtils.parseRtpMap=function(line){let parts=line.substring(9).split(" ");const parsed={payloadType:parseInt(parts.shift(),10)};return parts=parts[0].split("/"),parsed.name=parts[0],parsed.clockRate=parseInt(parts[1],10),parsed.channels=3===parts.length?parseInt(parts[2],10):1,parsed.numChannels=parsed.channels,parsed},SDPUtils.writeRtpMap=function(codec){let pt=codec.payloadType;void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType);const channels=codec.channels||codec.numChannels||1;return"a=rtpmap:"+pt+" "+codec.name+"/"+codec.clockRate+(1!==channels?"/"+channels:"")+"\r\n"},SDPUtils.parseExtmap=function(line){const parts=line.substring(9).split(" ");return{id:parseInt(parts[0],10),direction:parts[0].indexOf("/")>0?parts[0].split("/")[1]:"sendrecv",uri:parts[1],attributes:parts.slice(2).join(" ")}},SDPUtils.writeExtmap=function(headerExtension){return"a=extmap:"+(headerExtension.id||headerExtension.preferredId)+(headerExtension.direction&&"sendrecv"!==headerExtension.direction?"/"+headerExtension.direction:"")+" "+headerExtension.uri+(headerExtension.attributes?" "+headerExtension.attributes:"")+"\r\n"},SDPUtils.parseFmtp=function(line){const parsed={};let kv;const parts=line.substring(line.indexOf(" ")+1).split(";");for(let j=0;j<parts.length;j++)kv=parts[j].trim().split("="),parsed[kv[0].trim()]=kv[1];return parsed},SDPUtils.writeFmtp=function(codec){let line="",pt=codec.payloadType;if(void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.parameters&&Object.keys(codec.parameters).length){const params=[];Object.keys(codec.parameters).forEach(param=>{void 0!==codec.parameters[param]?params.push(param+"="+codec.parameters[param]):params.push(param)}),line+="a=fmtp:"+pt+" "+params.join(";")+"\r\n"}return line},SDPUtils.parseRtcpFb=function(line){const parts=line.substring(line.indexOf(" ")+1).split(" ");return{type:parts.shift(),parameter:parts.join(" ")}},SDPUtils.writeRtcpFb=function(codec){let lines="",pt=codec.payloadType;return void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.rtcpFeedback&&codec.rtcpFeedback.length&&codec.rtcpFeedback.forEach(fb=>{lines+="a=rtcp-fb:"+pt+" "+fb.type+(fb.parameter&&fb.parameter.length?" "+fb.parameter:"")+"\r\n"}),lines},SDPUtils.parseSsrcMedia=function(line){const sp=line.indexOf(" "),parts={ssrc:parseInt(line.substring(7,sp),10)},colon=line.indexOf(":",sp);return colon>-1?(parts.attribute=line.substring(sp+1,colon),parts.value=line.substring(colon+1)):parts.attribute=line.substring(sp+1),parts},SDPUtils.parseSsrcGroup=function(line){const parts=line.substring(13).split(" ");return{semantics:parts.shift(),ssrcs:parts.map(ssrc=>parseInt(ssrc,10))}},SDPUtils.getMid=function(mediaSection){const mid=SDPUtils.matchPrefix(mediaSection,"a=mid:")[0];if(mid)return mid.substring(6)},SDPUtils.parseFingerprint=function(line){const parts=line.substring(14).split(" ");return{algorithm:parts[0].toLowerCase(),value:parts[1].toUpperCase()}},SDPUtils.getDtlsParameters=function(mediaSection,sessionpart){return{role:"auto",fingerprints:SDPUtils.matchPrefix(mediaSection+sessionpart,"a=fingerprint:").map(SDPUtils.parseFingerprint)}},SDPUtils.writeDtlsParameters=function(params,setupType){let sdp="a=setup:"+setupType+"\r\n";return params.fingerprints.forEach(fp=>{sdp+="a=fingerprint:"+fp.algorithm+" "+fp.value+"\r\n"}),sdp},SDPUtils.parseCryptoLine=function(line){const parts=line.substring(9).split(" ");return{tag:parseInt(parts[0],10),cryptoSuite:parts[1],keyParams:parts[2],sessionParams:parts.slice(3)}},SDPUtils.writeCryptoLine=function(parameters){return"a=crypto:"+parameters.tag+" "+parameters.cryptoSuite+" "+("object"==typeof parameters.keyParams?SDPUtils.writeCryptoKeyParams(parameters.keyParams):parameters.keyParams)+(parameters.sessionParams?" "+parameters.sessionParams.join(" "):"")+"\r\n"},SDPUtils.parseCryptoKeyParams=function(keyParams){if(0!==keyParams.indexOf("inline:"))return null;const parts=keyParams.substring(7).split("|");return{keyMethod:"inline",keySalt:parts[0],lifeTime:parts[1],mkiValue:parts[2]?parts[2].split(":")[0]:void 0,mkiLength:parts[2]?parts[2].split(":")[1]:void 0}},SDPUtils.writeCryptoKeyParams=function(keyParams){return keyParams.keyMethod+":"+keyParams.keySalt+(keyParams.lifeTime?"|"+keyParams.lifeTime:"")+(keyParams.mkiValue&&keyParams.mkiLength?"|"+keyParams.mkiValue+":"+keyParams.mkiLength:"")},SDPUtils.getCryptoParameters=function(mediaSection,sessionpart){return SDPUtils.matchPrefix(mediaSection+sessionpart,"a=crypto:").map(SDPUtils.parseCryptoLine)},SDPUtils.getIceParameters=function(mediaSection,sessionpart){const ufrag=SDPUtils.matchPrefix(mediaSection+sessionpart,"a=ice-ufrag:")[0],pwd=SDPUtils.matchPrefix(mediaSection+sessionpart,"a=ice-pwd:")[0];return ufrag&&pwd?{usernameFragment:ufrag.substring(12),password:pwd.substring(10)}:null},SDPUtils.writeIceParameters=function(params){let sdp="a=ice-ufrag:"+params.usernameFragment+"\r\na=ice-pwd:"+params.password+"\r\n";return params.iceLite&&(sdp+="a=ice-lite\r\n"),sdp},SDPUtils.parseRtpParameters=function(mediaSection){const description={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},mline=SDPUtils.splitLines(mediaSection)[0].split(" ");description.profile=mline[2];for(let i=3;i<mline.length;i++){const pt=mline[i],rtpmapline=SDPUtils.matchPrefix(mediaSection,"a=rtpmap:"+pt+" ")[0];if(rtpmapline){const codec=SDPUtils.parseRtpMap(rtpmapline),fmtps=SDPUtils.matchPrefix(mediaSection,"a=fmtp:"+pt+" ");switch(codec.parameters=fmtps.length?SDPUtils.parseFmtp(fmtps[0]):{},codec.rtcpFeedback=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:"+pt+" ").map(SDPUtils.parseRtcpFb),description.codecs.push(codec),codec.name.toUpperCase()){case"RED":case"ULPFEC":description.fecMechanisms.push(codec.name.toUpperCase())}}}SDPUtils.matchPrefix(mediaSection,"a=extmap:").forEach(line=>{description.headerExtensions.push(SDPUtils.parseExtmap(line))});const wildcardRtcpFb=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:* ").map(SDPUtils.parseRtcpFb);return description.codecs.forEach(codec=>{wildcardRtcpFb.forEach(fb=>{codec.rtcpFeedback.find(existingFeedback=>existingFeedback.type===fb.type&&existingFeedback.parameter===fb.parameter)||codec.rtcpFeedback.push(fb)})}),description},SDPUtils.writeRtpDescription=function(kind,caps){let sdp="";sdp+="m="+kind+" ",sdp+=caps.codecs.length>0?"9":"0",sdp+=" "+(caps.profile||"UDP/TLS/RTP/SAVPF")+" ",sdp+=caps.codecs.map(codec=>void 0!==codec.preferredPayloadType?codec.preferredPayloadType:codec.payloadType).join(" ")+"\r\n",sdp+="c=IN IP4 0.0.0.0\r\n",sdp+="a=rtcp:9 IN IP4 0.0.0.0\r\n",caps.codecs.forEach(codec=>{sdp+=SDPUtils.writeRtpMap(codec),sdp+=SDPUtils.writeFmtp(codec),sdp+=SDPUtils.writeRtcpFb(codec)});let maxptime=0;return caps.codecs.forEach(codec=>{codec.maxptime>maxptime&&(maxptime=codec.maxptime)}),maxptime>0&&(sdp+="a=maxptime:"+maxptime+"\r\n"),caps.headerExtensions&&caps.headerExtensions.forEach(extension=>{sdp+=SDPUtils.writeExtmap(extension)}),sdp},SDPUtils.parseRtpEncodingParameters=function(mediaSection){const encodingParameters=[],description=SDPUtils.parseRtpParameters(mediaSection),hasRed=-1!==description.fecMechanisms.indexOf("RED"),hasUlpfec=-1!==description.fecMechanisms.indexOf("ULPFEC"),ssrcs=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map(line=>SDPUtils.parseSsrcMedia(line)).filter(parts=>"cname"===parts.attribute),primarySsrc=ssrcs.length>0&&ssrcs[0].ssrc;let secondarySsrc;const flows=SDPUtils.matchPrefix(mediaSection,"a=ssrc-group:FID").map(line=>line.substring(17).split(" ").map(part=>parseInt(part,10)));flows.length>0&&flows[0].length>1&&flows[0][0]===primarySsrc&&(secondarySsrc=flows[0][1]),description.codecs.forEach(codec=>{if("RTX"===codec.name.toUpperCase()&&codec.parameters.apt){let encParam={ssrc:primarySsrc,codecPayloadType:parseInt(codec.parameters.apt,10)};primarySsrc&&secondarySsrc&&(encParam.rtx={ssrc:secondarySsrc}),encodingParameters.push(encParam),hasRed&&(encParam=JSON.parse(JSON.stringify(encParam)),encParam.fec={ssrc:primarySsrc,mechanism:hasUlpfec?"red+ulpfec":"red"},encodingParameters.push(encParam))}}),0===encodingParameters.length&&primarySsrc&&encodingParameters.push({ssrc:primarySsrc});let bandwidth=SDPUtils.matchPrefix(mediaSection,"b=");return bandwidth.length&&(bandwidth=0===bandwidth[0].indexOf("b=TIAS:")?parseInt(bandwidth[0].substring(7),10):0===bandwidth[0].indexOf("b=AS:")?1e3*parseInt(bandwidth[0].substring(5),10)*.95-16e3:void 0,encodingParameters.forEach(params=>{params.maxBitrate=bandwidth})),encodingParameters},SDPUtils.parseRtcpParameters=function(mediaSection){const rtcpParameters={},remoteSsrc=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map(line=>SDPUtils.parseSsrcMedia(line)).filter(obj=>"cname"===obj.attribute)[0];remoteSsrc&&(rtcpParameters.cname=remoteSsrc.value,rtcpParameters.ssrc=remoteSsrc.ssrc);const rsize=SDPUtils.matchPrefix(mediaSection,"a=rtcp-rsize");rtcpParameters.reducedSize=rsize.length>0,rtcpParameters.compound=0===rsize.length;const mux=SDPUtils.matchPrefix(mediaSection,"a=rtcp-mux");return rtcpParameters.mux=mux.length>0,rtcpParameters},SDPUtils.writeRtcpParameters=function(rtcpParameters){let sdp="";return rtcpParameters.reducedSize&&(sdp+="a=rtcp-rsize\r\n"),rtcpParameters.mux&&(sdp+="a=rtcp-mux\r\n"),void 0!==rtcpParameters.ssrc&&rtcpParameters.cname&&(sdp+="a=ssrc:"+rtcpParameters.ssrc+" cname:"+rtcpParameters.cname+"\r\n"),sdp},SDPUtils.parseMsid=function(mediaSection){let parts;const spec=SDPUtils.matchPrefix(mediaSection,"a=msid:");if(1===spec.length)return parts=spec[0].substring(7).split(" "),{stream:parts[0],track:parts[1]};const planB=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map(line=>SDPUtils.parseSsrcMedia(line)).filter(msidParts=>"msid"===msidParts.attribute);return planB.length>0?(parts=planB[0].value.split(" "),{stream:parts[0],track:parts[1]}):void 0},SDPUtils.parseSctpDescription=function(mediaSection){const mline=SDPUtils.parseMLine(mediaSection),maxSizeLine=SDPUtils.matchPrefix(mediaSection,"a=max-message-size:");let maxMessageSize;maxSizeLine.length>0&&(maxMessageSize=parseInt(maxSizeLine[0].substring(19),10)),isNaN(maxMessageSize)&&(maxMessageSize=65536);const sctpPort=SDPUtils.matchPrefix(mediaSection,"a=sctp-port:");if(sctpPort.length>0)return{port:parseInt(sctpPort[0].substring(12),10),protocol:mline.fmt,maxMessageSize};const sctpMapLines=SDPUtils.matchPrefix(mediaSection,"a=sctpmap:");if(sctpMapLines.length>0){const parts=sctpMapLines[0].substring(10).split(" ");return{port:parseInt(parts[0],10),protocol:parts[1],maxMessageSize}}},SDPUtils.writeSctpDescription=function(media,sctp){let output=[];return output="DTLS/SCTP"!==media.protocol?["m="+media.kind+" 9 "+media.protocol+" "+sctp.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+sctp.port+"\r\n"]:["m="+media.kind+" 9 "+media.protocol+" "+sctp.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+sctp.port+" "+sctp.protocol+" 65535\r\n"],void 0!==sctp.maxMessageSize&&output.push("a=max-message-size:"+sctp.maxMessageSize+"\r\n"),output.join("")},SDPUtils.generateSessionId=function(){return Math.random().toString().substr(2,22)},SDPUtils.writeSessionBoilerplate=function(sessId,sessVer,sessUser){let sessionId;const version=void 0!==sessVer?sessVer:2;sessionId=sessId||SDPUtils.generateSessionId();return"v=0\r\no="+(sessUser||"thisisadapterortc")+" "+sessionId+" "+version+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},SDPUtils.getDirection=function(mediaSection,sessionpart){const lines=SDPUtils.splitLines(mediaSection);for(let i=0;i<lines.length;i++)switch(lines[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return lines[i].substring(2)}return sessionpart?SDPUtils.getDirection(sessionpart):"sendrecv"},SDPUtils.getKind=function(mediaSection){return SDPUtils.splitLines(mediaSection)[0].split(" ")[0].substring(2)},SDPUtils.isRejected=function(mediaSection){return"0"===mediaSection.split(" ",2)[1]},SDPUtils.parseMLine=function(mediaSection){const parts=SDPUtils.splitLines(mediaSection)[0].substring(2).split(" ");return{kind:parts[0],port:parseInt(parts[1],10),protocol:parts[2],fmt:parts.slice(3).join(" ")}},SDPUtils.parseOLine=function(mediaSection){const parts=SDPUtils.matchPrefix(mediaSection,"o=")[0].substring(2).split(" ");return{username:parts[0],sessionId:parts[1],sessionVersion:parseInt(parts[2],10),netType:parts[3],addressType:parts[4],address:parts[5]}},SDPUtils.isValidSDP=function(blob){if("string"!=typeof blob||0===blob.length)return!1;const lines=SDPUtils.splitLines(blob);for(let i=0;i<lines.length;i++)if(lines[i].length<2||"="!==lines[i].charAt(1))return!1;return!0},module.exports=SDPUtils},"./node_modules/webrtc-adapter/src/js/adapter_core.js"(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__){var chrome_shim_namespaceObject={};__webpack_require__.r(chrome_shim_namespaceObject),__webpack_require__.d(chrome_shim_namespaceObject,{fixNegotiationNeeded:()=>fixNegotiationNeeded,shimAddTrackRemoveTrack:()=>shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative:()=>shimAddTrackRemoveTrackWithNative,shimGetSendersWithDtmf:()=>shimGetSendersWithDtmf,shimGetUserMedia:()=>shimGetUserMedia,shimMediaStream:()=>shimMediaStream,shimOnTrack:()=>shimOnTrack,shimPeerConnection:()=>shimPeerConnection,shimSenderReceiverGetStats:()=>shimSenderReceiverGetStats});var firefox_shim_namespaceObject={};__webpack_require__.r(firefox_shim_namespaceObject),__webpack_require__.d(firefox_shim_namespaceObject,{shimAddTransceiver:()=>shimAddTransceiver,shimCreateAnswer:()=>shimCreateAnswer,shimCreateOffer:()=>shimCreateOffer,shimGetDisplayMedia:()=>shimGetDisplayMedia,shimGetParameters:()=>shimGetParameters,shimGetUserMedia:()=>getusermedia_shimGetUserMedia,shimOnTrack:()=>firefox_shim_shimOnTrack,shimPeerConnection:()=>firefox_shim_shimPeerConnection,shimRTCDataChannel:()=>shimRTCDataChannel,shimReceiverGetStats:()=>shimReceiverGetStats,shimRemoveStream:()=>shimRemoveStream,shimSenderGetStats:()=>shimSenderGetStats});var safari_shim_namespaceObject={};__webpack_require__.r(safari_shim_namespaceObject),__webpack_require__.d(safari_shim_namespaceObject,{shimAudioContext:()=>shimAudioContext,shimCallbacksAPI:()=>shimCallbacksAPI,shimConstraints:()=>shimConstraints,shimCreateOfferLegacy:()=>shimCreateOfferLegacy,shimGetUserMedia:()=>safari_shim_shimGetUserMedia,shimLocalStreamsAPI:()=>shimLocalStreamsAPI,shimRTCIceServerUrls:()=>shimRTCIceServerUrls,shimRemoteStreamsAPI:()=>shimRemoteStreamsAPI,shimTrackEventTransceiver:()=>shimTrackEventTransceiver});var common_shim_namespaceObject={};__webpack_require__.r(common_shim_namespaceObject),__webpack_require__.d(common_shim_namespaceObject,{removeExtmapAllowMixed:()=>removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty:()=>shimAddIceCandidateNullOrEmpty,shimConnectionState:()=>shimConnectionState,shimMaxMessageSize:()=>shimMaxMessageSize,shimParameterlessSetLocalDescription:()=>shimParameterlessSetLocalDescription,shimRTCIceCandidate:()=>shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol:()=>shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError:()=>shimSendThrowTypeError});let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(uastring,expr,pos){const match=uastring.match(expr);return match&&match.length>=pos&&parseFloat(match[pos],10)}function wrapPeerConnectionEvent(window,eventNameToWrap,wrapper){if(!window.RTCPeerConnection)return;const proto=window.RTCPeerConnection.prototype,nativeAddEventListener=proto.addEventListener;proto.addEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap)return nativeAddEventListener.apply(this,arguments);const wrappedCallback=e=>{const modifiedEvent=wrapper(e);modifiedEvent&&(cb.handleEvent?cb.handleEvent(modifiedEvent):cb(modifiedEvent))};return this._eventMap=this._eventMap||{},this._eventMap[eventNameToWrap]||(this._eventMap[eventNameToWrap]=new Map),this._eventMap[eventNameToWrap].set(cb,wrappedCallback),nativeAddEventListener.apply(this,[nativeEventName,wrappedCallback])};const nativeRemoveEventListener=proto.removeEventListener;proto.removeEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap||!this._eventMap||!this._eventMap[eventNameToWrap])return nativeRemoveEventListener.apply(this,arguments);if(!this._eventMap[eventNameToWrap].has(cb))return nativeRemoveEventListener.apply(this,arguments);const unwrappedCb=this._eventMap[eventNameToWrap].get(cb);return this._eventMap[eventNameToWrap].delete(cb),0===this._eventMap[eventNameToWrap].size&&delete this._eventMap[eventNameToWrap],0===Object.keys(this._eventMap).length&&delete this._eventMap,nativeRemoveEventListener.apply(this,[nativeEventName,unwrappedCb])},Object.defineProperty(proto,"on"+eventNameToWrap,{get(){return this["_on"+eventNameToWrap]},set(cb){this["_on"+eventNameToWrap]&&(this.removeEventListener(eventNameToWrap,this["_on"+eventNameToWrap]),delete this["_on"+eventNameToWrap]),cb&&this.addEventListener(eventNameToWrap,this["_on"+eventNameToWrap]=cb)},enumerable:!0,configurable:!0})}function disableLog(bool){return"boolean"!=typeof bool?new Error("Argument type: "+typeof bool+". Please use a boolean."):(logDisabled_=bool,bool?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(bool){return"boolean"!=typeof bool?new Error("Argument type: "+typeof bool+". Please use a boolean."):(deprecationWarnings_=!bool,"adapter.js deprecation warnings "+(bool?"disabled":"enabled"))}function log(){if("object"==typeof window){if(logDisabled_)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function deprecated(oldMethod,newMethod){deprecationWarnings_&&console.warn(oldMethod+" is deprecated, please use "+newMethod+" instead.")}function isObject(val){return"[object Object]"===Object.prototype.toString.call(val)}function compactObject(data){return isObject(data)?Object.keys(data).reduce(function(accumulator,key){const isObj=isObject(data[key]),value=isObj?compactObject(data[key]):data[key],isEmptyObject=isObj&&!Object.keys(value).length;return void 0===value||isEmptyObject?accumulator:Object.assign(accumulator,{[key]:value})},{}):data}function walkStats(stats,base,resultSet){base&&!resultSet.has(base.id)&&(resultSet.set(base.id,base),Object.keys(base).forEach(name=>{name.endsWith("Id")?walkStats(stats,stats.get(base[name]),resultSet):name.endsWith("Ids")&&base[name].forEach(id=>{walkStats(stats,stats.get(id),resultSet)})}))}function filterStats(result,track,outbound){const streamStatsType=outbound?"outbound-rtp":"inbound-rtp",filteredResult=new Map;if(null===track)return filteredResult;const trackStats=[];return result.forEach(value=>{"track"===value.type&&value.trackIdentifier===track.id&&trackStats.push(value)}),trackStats.forEach(trackStat=>{result.forEach(stats=>{stats.type===streamStatsType&&stats.trackId===trackStat.id&&walkStats(result,stats,filteredResult)})}),filteredResult}const logging=log;function shimGetUserMedia(window,browserDetails){const navigator=window&&window.navigator;if(!navigator.mediaDevices)return;const constraintsToChrome_=function(c){if("object"!=typeof c||c.mandatory||c.optional)return c;const cc={};return Object.keys(c).forEach(key=>{if("require"===key||"advanced"===key||"mediaSource"===key)return;const r="object"==typeof c[key]?c[key]:{ideal:c[key]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const oldname_=function(prefix,name){return prefix?prefix+name.charAt(0).toUpperCase()+name.slice(1):"deviceId"===name?"sourceId":name};if(void 0!==r.ideal){cc.optional=cc.optional||[];let oc={};"number"==typeof r.ideal?(oc[oldname_("min",key)]=r.ideal,cc.optional.push(oc),oc={},oc[oldname_("max",key)]=r.ideal,cc.optional.push(oc)):(oc[oldname_("",key)]=r.ideal,cc.optional.push(oc))}void 0!==r.exact&&"number"!=typeof r.exact?(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_("",key)]=r.exact):["min","max"].forEach(mix=>{void 0!==r[mix]&&(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_(mix,key)]=r[mix])})}),c.advanced&&(cc.optional=(cc.optional||[]).concat(c.advanced)),cc},shimConstraints_=function(constraints,func){if(browserDetails.version>=61)return func(constraints);if((constraints=JSON.parse(JSON.stringify(constraints)))&&"object"==typeof constraints.audio){const remap=function(obj,a,b){a in obj&&!(b in obj)&&(obj[b]=obj[a],delete obj[a])};remap((constraints=JSON.parse(JSON.stringify(constraints))).audio,"autoGainControl","googAutoGainControl"),remap(constraints.audio,"noiseSuppression","googNoiseSuppression"),constraints.audio=constraintsToChrome_(constraints.audio)}if(constraints&&"object"==typeof constraints.video){let face=constraints.video.facingMode;face=face&&("object"==typeof face?face:{ideal:face});const getSupportedFacingModeLies=browserDetails.version<66;if(face&&("user"===face.exact||"environment"===face.exact||"user"===face.ideal||"environment"===face.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode||getSupportedFacingModeLies)){let matches;if(delete constraints.video.facingMode,"environment"===face.exact||"environment"===face.ideal?matches=["back","rear"]:"user"!==face.exact&&"user"!==face.ideal||(matches=["front"]),matches)return navigator.mediaDevices.enumerateDevices().then(devices=>{let dev=(devices=devices.filter(d=>"videoinput"===d.kind)).find(d=>matches.some(match=>d.label.toLowerCase().includes(match)));return!dev&&devices.length&&matches.includes("back")&&(dev=devices[devices.length-1]),dev&&(constraints.video.deviceId=face.exact?{exact:dev.deviceId}:{ideal:dev.deviceId}),constraints.video=constraintsToChrome_(constraints.video),logging("chrome: "+JSON.stringify(constraints)),func(constraints)})}constraints.video=constraintsToChrome_(constraints.video)}return logging("chrome: "+JSON.stringify(constraints)),func(constraints)},shimError_=function(e){return browserDetails.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(navigator.getUserMedia=function(constraints,onSuccess,onError){shimConstraints_(constraints,c=>{navigator.webkitGetUserMedia(c,onSuccess,e=>{onError&&onError(shimError_(e))})})}.bind(navigator),navigator.mediaDevices.getUserMedia){const origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(cs){return shimConstraints_(cs,c=>origGetUserMedia(c).then(stream=>{if(c.audio&&!stream.getAudioTracks().length||c.video&&!stream.getVideoTracks().length)throw stream.getTracks().forEach(track=>{track.stop()}),new DOMException("","NotFoundError");return stream},e=>Promise.reject(shimError_(e))))}}}function shimMediaStream(window){window.MediaStream=window.MediaStream||window.webkitMediaStream}function shimOnTrack(window){if("object"==typeof window&&window.RTCPeerConnection&&!("ontrack"in window.RTCPeerConnection.prototype)){Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(f){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=f)},enumerable:!0,configurable:!0});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){return this._ontrackpoly||(this._ontrackpoly=e=>{e.stream.addEventListener("addtrack",te=>{let receiver;receiver=window.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(r=>r.track&&r.track.id===te.track.id):{track:te.track};const event=new Event("track");event.track=te.track,event.receiver=receiver,event.transceiver={receiver},event.streams=[e.stream],this.dispatchEvent(event)}),e.stream.getTracks().forEach(track=>{let receiver;receiver=window.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find(r=>r.track&&r.track.id===track.id):{track};const event=new Event("track");event.track=track,event.receiver=receiver,event.transceiver={receiver},event.streams=[e.stream],this.dispatchEvent(event)})},this.addEventListener("addstream",this._ontrackpoly)),origSetRemoteDescription.apply(this,arguments)}}else wrapPeerConnectionEvent(window,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function shimGetSendersWithDtmf(window){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in window.RTCPeerConnection.prototype)&&"createDTMFSender"in window.RTCPeerConnection.prototype){const shimSenderWithDtmf=function(pc,track){return{track,get dtmf(){return void 0===this._dtmf&&("audio"===track.kind?this._dtmf=pc.createDTMFSender(track):this._dtmf=null),this._dtmf},_pc:pc}};if(!window.RTCPeerConnection.prototype.getSenders){window.RTCPeerConnection.prototype.getSenders=function getSenders(){return this._senders=this._senders||[],this._senders.slice()};const origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){let sender=origAddTrack.apply(this,arguments);return sender||(sender=shimSenderWithDtmf(this,track),this._senders.push(sender)),sender};const origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){origRemoveTrack.apply(this,arguments);const idx=this._senders.indexOf(sender);-1!==idx&&this._senders.splice(idx,1)}}const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._senders=this._senders||[],origAddStream.apply(this,[stream]),stream.getTracks().forEach(track=>{this._senders.push(shimSenderWithDtmf(this,track))})};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._senders=this._senders||[],origRemoveStream.apply(this,[stream]),stream.getTracks().forEach(track=>{const sender=this._senders.find(s=>s.track===track);sender&&this._senders.splice(this._senders.indexOf(sender),1)})}}else if("object"==typeof window&&window.RTCPeerConnection&&"getSenders"in window.RTCPeerConnection.prototype&&"createDTMFSender"in window.RTCPeerConnection.prototype&&window.RTCRtpSender&&!("dtmf"in window.RTCRtpSender.prototype)){const origGetSenders=window.RTCPeerConnection.prototype.getSenders;window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach(sender=>sender._pc=this),senders},Object.defineProperty(window.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimSenderReceiverGetStats(window){if(!("object"==typeof window&&window.RTCPeerConnection&&window.RTCRtpSender&&window.RTCRtpReceiver))return;if(!("getStats"in window.RTCRtpSender.prototype)){const origGetSenders=window.RTCPeerConnection.prototype.getSenders;origGetSenders&&(window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach(sender=>sender._pc=this),senders});const origAddTrack=window.RTCPeerConnection.prototype.addTrack;origAddTrack&&(window.RTCPeerConnection.prototype.addTrack=function addTrack(){const sender=origAddTrack.apply(this,arguments);return sender._pc=this,sender}),window.RTCRtpSender.prototype.getStats=function getStats(){const sender=this;return this._pc.getStats().then(result=>filterStats(result,sender.track,!0))}}if(!("getStats"in window.RTCRtpReceiver.prototype)){const origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;origGetReceivers&&(window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){const receivers=origGetReceivers.apply(this,[]);return receivers.forEach(receiver=>receiver._pc=this),receivers}),wrapPeerConnectionEvent(window,"track",e=>(e.receiver._pc=e.srcElement,e)),window.RTCRtpReceiver.prototype.getStats=function getStats(){const receiver=this;return this._pc.getStats().then(result=>filterStats(result,receiver.track,!1))}}if(!("getStats"in window.RTCRtpSender.prototype)||!("getStats"in window.RTCRtpReceiver.prototype))return;const origGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){if(arguments.length>0&&arguments[0]instanceof window.MediaStreamTrack){const track=arguments[0];let sender,receiver,err;return this.getSenders().forEach(s=>{s.track===track&&(sender?err=!0:sender=s)}),this.getReceivers().forEach(r=>(r.track===track&&(receiver?err=!0:receiver=r),r.track===track)),err||sender&&receiver?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):sender?sender.getStats():receiver?receiver.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return origGetStats.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(window){window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(streamId=>this._shimmedLocalStreams[streamId][0])};const origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){if(!stream)return origAddTrack.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const sender=origAddTrack.apply(this,arguments);return this._shimmedLocalStreams[stream.id]?-1===this._shimmedLocalStreams[stream.id].indexOf(sender)&&this._shimmedLocalStreams[stream.id].push(sender):this._shimmedLocalStreams[stream.id]=[stream,sender],sender};const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._shimmedLocalStreams=this._shimmedLocalStreams||{},stream.getTracks().forEach(track=>{if(this.getSenders().find(s=>s.track===track))throw new DOMException("Track already exists.","InvalidAccessError")});const existingSenders=this.getSenders();origAddStream.apply(this,arguments);const newSenders=this.getSenders().filter(newSender=>-1===existingSenders.indexOf(newSender));this._shimmedLocalStreams[stream.id]=[stream].concat(newSenders)};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[stream.id],origRemoveStream.apply(this,arguments)};const origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},sender&&Object.keys(this._shimmedLocalStreams).forEach(streamId=>{const idx=this._shimmedLocalStreams[streamId].indexOf(sender);-1!==idx&&this._shimmedLocalStreams[streamId].splice(idx,1),1===this._shimmedLocalStreams[streamId].length&&delete this._shimmedLocalStreams[streamId]}),origRemoveTrack.apply(this,arguments)}}function shimAddTrackRemoveTrack(window,browserDetails){if(!window.RTCPeerConnection)return;if(window.RTCPeerConnection.prototype.addTrack&&browserDetails.version>=65)return shimAddTrackRemoveTrackWithNative(window);const origGetLocalStreams=window.RTCPeerConnection.prototype.getLocalStreams;window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){const nativeStreams=origGetLocalStreams.apply(this);return this._reverseStreams=this._reverseStreams||{},nativeStreams.map(stream=>this._reverseStreams[stream.id])};const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},stream.getTracks().forEach(track=>{if(this.getSenders().find(s=>s.track===track))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[stream.id]){const newStream=new window.MediaStream(stream.getTracks());this._streams[stream.id]=newStream,this._reverseStreams[newStream.id]=stream,stream=newStream}origAddStream.apply(this,[stream])};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;function replaceInternalStreamId(pc,description){let sdp=description.sdp;return Object.keys(pc._reverseStreams||[]).forEach(internalId=>{const externalStream=pc._reverseStreams[internalId],internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(internalStream.id,"g"),externalStream.id)}),new RTCSessionDescription({type:description.type,sdp})}window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},origRemoveStream.apply(this,[this._streams[stream.id]||stream]),delete this._reverseStreams[this._streams[stream.id]?this._streams[stream.id].id:stream.id],delete this._streams[stream.id]},window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const streams=[].slice.call(arguments,1);if(1!==streams.length||!streams[0].getTracks().find(t=>t===track))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(s=>s.track===track))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const oldStream=this._streams[stream.id];if(oldStream)oldStream.addTrack(track),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const newStream=new window.MediaStream([track]);this._streams[stream.id]=newStream,this._reverseStreams[newStream.id]=stream,this.addStream(newStream)}return this.getSenders().find(s=>s.track===track)},["createOffer","createAnswer"].forEach(function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){const args=arguments;return arguments.length&&"function"==typeof arguments[0]?nativeMethod.apply(this,[description=>{const desc=replaceInternalStreamId(this,description);args[0].apply(null,[desc])},err=>{args[1]&&args[1].apply(null,err)},arguments[2]]):nativeMethod.apply(this,arguments).then(description=>replaceInternalStreamId(this,description))}};window.RTCPeerConnection.prototype[method]=methodObj[method]});const origSetLocalDescription=window.RTCPeerConnection.prototype.setLocalDescription;window.RTCPeerConnection.prototype.setLocalDescription=function setLocalDescription(){return arguments.length&&arguments[0].type?(arguments[0]=function replaceExternalStreamId(pc,description){let sdp=description.sdp;return Object.keys(pc._reverseStreams||[]).forEach(internalId=>{const externalStream=pc._reverseStreams[internalId],internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(externalStream.id,"g"),internalStream.id)}),new RTCSessionDescription({type:description.type,sdp})}(this,arguments[0]),origSetLocalDescription.apply(this,arguments)):origSetLocalDescription.apply(this,arguments)};const origLocalDescription=Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(window.RTCPeerConnection.prototype,"localDescription",{get(){const description=origLocalDescription.get.apply(this);return""===description.type?description:replaceInternalStreamId(this,description)}}),window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!sender._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(sender._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let stream;this._streams=this._streams||{},Object.keys(this._streams).forEach(streamid=>{this._streams[streamid].getTracks().find(track=>sender.track===track)&&(stream=this._streams[streamid])}),stream&&(1===stream.getTracks().length?this.removeStream(this._reverseStreams[stream.id]):stream.removeTrack(sender.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection(window,browserDetails){!window.RTCPeerConnection&&window.webkitRTCPeerConnection&&(window.RTCPeerConnection=window.webkitRTCPeerConnection),window.RTCPeerConnection&&browserDetails.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){return arguments[0]=new("addIceCandidate"===method?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}};window.RTCPeerConnection.prototype[method]=methodObj[method]})}function fixNegotiationNeeded(window,browserDetails){wrapPeerConnectionEvent(window,"negotiationneeded",e=>{const pc=e.target;if(!(browserDetails.version<72||pc.getConfiguration&&"plan-b"===pc.getConfiguration().sdpSemantics)||"stable"===pc.signalingState)return e})}function getusermedia_shimGetUserMedia(window,browserDetails){const navigator=window&&window.navigator,MediaStreamTrack=window&&window.MediaStreamTrack;if(navigator.getUserMedia=function(constraints,onSuccess,onError){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(constraints).then(onSuccess,onError)},!(browserDetails.version>55&&"autoGainControl"in navigator.mediaDevices.getSupportedConstraints())){const remap=function(obj,a,b){a in obj&&!(b in obj)&&(obj[b]=obj[a],delete obj[a])},nativeGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);if(navigator.mediaDevices.getUserMedia=function(c){return"object"==typeof c&&"object"==typeof c.audio&&(c=JSON.parse(JSON.stringify(c)),remap(c.audio,"autoGainControl","mozAutoGainControl"),remap(c.audio,"noiseSuppression","mozNoiseSuppression")),nativeGetUserMedia(c)},MediaStreamTrack&&MediaStreamTrack.prototype.getSettings){const nativeGetSettings=MediaStreamTrack.prototype.getSettings;MediaStreamTrack.prototype.getSettings=function(){const obj=nativeGetSettings.apply(this,arguments);return remap(obj,"mozAutoGainControl","autoGainControl"),remap(obj,"mozNoiseSuppression","noiseSuppression"),obj}}if(MediaStreamTrack&&MediaStreamTrack.prototype.applyConstraints){const nativeApplyConstraints=MediaStreamTrack.prototype.applyConstraints;MediaStreamTrack.prototype.applyConstraints=function(c){return"audio"===this.kind&&"object"==typeof c&&(c=JSON.parse(JSON.stringify(c)),remap(c,"autoGainControl","mozAutoGainControl"),remap(c,"noiseSuppression","mozNoiseSuppression")),nativeApplyConstraints.apply(this,[c])}}}}function shimGetDisplayMedia(window,preferredMediaSource){window.navigator.mediaDevices&&"getDisplayMedia"in window.navigator.mediaDevices||window.navigator.mediaDevices&&(window.navigator.mediaDevices.getDisplayMedia=function getDisplayMedia(constraints){if(!constraints||!constraints.video){const err=new DOMException("getDisplayMedia without video constraints is undefined");return err.name="NotFoundError",err.code=8,Promise.reject(err)}return!0===constraints.video?constraints.video={mediaSource:preferredMediaSource}:constraints.video.mediaSource=preferredMediaSource,window.navigator.mediaDevices.getUserMedia(constraints)})}function firefox_shim_shimOnTrack(window){"object"==typeof window&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)&&Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function firefox_shim_shimPeerConnection(window,browserDetails){if("object"!=typeof window||!window.RTCPeerConnection&&!window.mozRTCPeerConnection)return;!window.RTCPeerConnection&&window.mozRTCPeerConnection&&(window.RTCPeerConnection=window.mozRTCPeerConnection),browserDetails.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){return arguments[0]=new("addIceCandidate"===method?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}};window.RTCPeerConnection.prototype[method]=methodObj[method]});const modernStatsTypes={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},nativeGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){const[selector,onSucc,onErr]=arguments;return nativeGetStats.apply(this,[selector||null]).then(stats=>{if(browserDetails.version<53&&!onSucc)try{stats.forEach(stat=>{stat.type=modernStatsTypes[stat.type]||stat.type})}catch(e){if("TypeError"!==e.name)throw e;stats.forEach((stat,i)=>{stats.set(i,Object.assign({},stat,{type:modernStatsTypes[stat.type]||stat.type}))})}return stats}).then(onSucc,onErr)}}function shimSenderGetStats(window){if("object"!=typeof window||!window.RTCPeerConnection||!window.RTCRtpSender)return;if(window.RTCRtpSender&&"getStats"in window.RTCRtpSender.prototype)return;const origGetSenders=window.RTCPeerConnection.prototype.getSenders;origGetSenders&&(window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach(sender=>sender._pc=this),senders});const origAddTrack=window.RTCPeerConnection.prototype.addTrack;origAddTrack&&(window.RTCPeerConnection.prototype.addTrack=function addTrack(){const sender=origAddTrack.apply(this,arguments);return sender._pc=this,sender}),window.RTCRtpSender.prototype.getStats=function getStats(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(window){if("object"!=typeof window||!window.RTCPeerConnection||!window.RTCRtpSender)return;if(window.RTCRtpSender&&"getStats"in window.RTCRtpReceiver.prototype)return;const origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;origGetReceivers&&(window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){const receivers=origGetReceivers.apply(this,[]);return receivers.forEach(receiver=>receiver._pc=this),receivers}),wrapPeerConnectionEvent(window,"track",e=>(e.receiver._pc=e.srcElement,e)),window.RTCRtpReceiver.prototype.getStats=function getStats(){return this._pc.getStats(this.track)}}function shimRemoveStream(window){window.RTCPeerConnection&&!("removeStream"in window.RTCPeerConnection.prototype)&&(window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){deprecated("removeStream","removeTrack"),this.getSenders().forEach(sender=>{sender.track&&stream.getTracks().includes(sender.track)&&this.removeTrack(sender)})})}function shimRTCDataChannel(window){window.DataChannel&&!window.RTCDataChannel&&(window.RTCDataChannel=window.DataChannel)}function shimAddTransceiver(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origAddTransceiver=window.RTCPeerConnection.prototype.addTransceiver;origAddTransceiver&&(window.RTCPeerConnection.prototype.addTransceiver=function addTransceiver(){this.setParametersPromises=[];let sendEncodings=arguments[1]&&arguments[1].sendEncodings;void 0===sendEncodings&&(sendEncodings=[]),sendEncodings=[...sendEncodings];const shouldPerformCheck=sendEncodings.length>0;shouldPerformCheck&&sendEncodings.forEach(encodingParam=>{if("rid"in encodingParam){if(!/^[a-z0-9]{0,16}$/i.test(encodingParam.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in encodingParam&&!(parseFloat(encodingParam.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in encodingParam&&!(parseFloat(encodingParam.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const transceiver=origAddTransceiver.apply(this,arguments);if(shouldPerformCheck){const{sender}=transceiver,params=sender.getParameters();(!("encodings"in params)||1===params.encodings.length&&0===Object.keys(params.encodings[0]).length)&&(params.encodings=sendEncodings,sender.sendEncodings=sendEncodings,this.setParametersPromises.push(sender.setParameters(params).then(()=>{delete sender.sendEncodings}).catch(()=>{delete sender.sendEncodings})))}return transceiver})}function shimGetParameters(window){if("object"!=typeof window||!window.RTCRtpSender)return;const origGetParameters=window.RTCRtpSender.prototype.getParameters;origGetParameters&&(window.RTCRtpSender.prototype.getParameters=function getParameters(){const params=origGetParameters.apply(this,arguments);return"encodings"in params||(params.encodings=[].concat(this.sendEncodings||[{}])),params})}function shimCreateOffer(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>origCreateOffer.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):origCreateOffer.apply(this,arguments)}}function shimCreateAnswer(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origCreateAnswer=window.RTCPeerConnection.prototype.createAnswer;window.RTCPeerConnection.prototype.createAnswer=function createAnswer(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>origCreateAnswer.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):origCreateAnswer.apply(this,arguments)}}function shimLocalStreamsAPI(window){if("object"==typeof window&&window.RTCPeerConnection){if("getLocalStreams"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in window.RTCPeerConnection.prototype)){const _addTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._localStreams||(this._localStreams=[]),this._localStreams.includes(stream)||this._localStreams.push(stream),stream.getAudioTracks().forEach(track=>_addTrack.call(this,track,stream)),stream.getVideoTracks().forEach(track=>_addTrack.call(this,track,stream))},window.RTCPeerConnection.prototype.addTrack=function addTrack(track,...streams){return streams&&streams.forEach(stream=>{this._localStreams?this._localStreams.includes(stream)||this._localStreams.push(stream):this._localStreams=[stream]}),_addTrack.apply(this,arguments)}}"removeStream"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._localStreams||(this._localStreams=[]);const index=this._localStreams.indexOf(stream);if(-1===index)return;this._localStreams.splice(index,1);const tracks=stream.getTracks();this.getSenders().forEach(sender=>{tracks.includes(sender.track)&&this.removeTrack(sender)})})}}function shimRemoteStreamsAPI(window){if("object"==typeof window&&window.RTCPeerConnection&&("getRemoteStreams"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.getRemoteStreams=function getRemoteStreams(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in window.RTCPeerConnection.prototype))){Object.defineProperty(window.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(f){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=f),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach(stream=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(stream))return;this._remoteStreams.push(stream);const event=new Event("addstream");event.stream=stream,this.dispatchEvent(event)})})}});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){const pc=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach(stream=>{if(pc._remoteStreams||(pc._remoteStreams=[]),pc._remoteStreams.indexOf(stream)>=0)return;pc._remoteStreams.push(stream);const event=new Event("addstream");event.stream=stream,pc.dispatchEvent(event)})}),origSetRemoteDescription.apply(pc,arguments)}}}function shimCallbacksAPI(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const prototype=window.RTCPeerConnection.prototype,origCreateOffer=prototype.createOffer,origCreateAnswer=prototype.createAnswer,setLocalDescription=prototype.setLocalDescription,setRemoteDescription=prototype.setRemoteDescription,addIceCandidate=prototype.addIceCandidate;prototype.createOffer=function createOffer(successCallback,failureCallback){const options=arguments.length>=2?arguments[2]:arguments[0],promise=origCreateOffer.apply(this,[options]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.createAnswer=function createAnswer(successCallback,failureCallback){const options=arguments.length>=2?arguments[2]:arguments[0],promise=origCreateAnswer.apply(this,[options]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise};let withCallback=function(description,successCallback,failureCallback){const promise=setLocalDescription.apply(this,[description]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise};prototype.setLocalDescription=withCallback,withCallback=function(description,successCallback,failureCallback){const promise=setRemoteDescription.apply(this,[description]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.setRemoteDescription=withCallback,withCallback=function(candidate,successCallback,failureCallback){const promise=addIceCandidate.apply(this,[candidate]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.addIceCandidate=withCallback}function safari_shim_shimGetUserMedia(window){const navigator=window&&window.navigator;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const mediaDevices=navigator.mediaDevices,_getUserMedia=mediaDevices.getUserMedia.bind(mediaDevices);navigator.mediaDevices.getUserMedia=constraints=>_getUserMedia(shimConstraints(constraints))}!navigator.getUserMedia&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function getUserMedia(constraints,cb,errcb){navigator.mediaDevices.getUserMedia(constraints).then(cb,errcb)}.bind(navigator))}function shimConstraints(constraints){return constraints&&void 0!==constraints.video?Object.assign({},constraints,{video:compactObject(constraints.video)}):constraints}function shimRTCIceServerUrls(window){if(!window.RTCPeerConnection)return;const OrigPeerConnection=window.RTCPeerConnection;window.RTCPeerConnection=function RTCPeerConnection(pcConfig,pcConstraints){if(pcConfig&&pcConfig.iceServers){const newIceServers=[];for(let i=0;i<pcConfig.iceServers.length;i++){let server=pcConfig.iceServers[i];void 0===server.urls&&server.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),server=JSON.parse(JSON.stringify(server)),server.urls=server.url,delete server.url,newIceServers.push(server)):newIceServers.push(pcConfig.iceServers[i])}pcConfig.iceServers=newIceServers}return new OrigPeerConnection(pcConfig,pcConstraints)},window.RTCPeerConnection.prototype=OrigPeerConnection.prototype,"generateCertificate"in OrigPeerConnection&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:()=>OrigPeerConnection.generateCertificate})}function shimTrackEventTransceiver(window){"object"==typeof window&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)&&Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(window){const origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(offerOptions){if(offerOptions){void 0!==offerOptions.offerToReceiveAudio&&(offerOptions.offerToReceiveAudio=!!offerOptions.offerToReceiveAudio);const audioTransceiver=this.getTransceivers().find(transceiver=>"audio"===transceiver.receiver.track.kind);!1===offerOptions.offerToReceiveAudio&&audioTransceiver?"sendrecv"===audioTransceiver.direction?audioTransceiver.setDirection?audioTransceiver.setDirection("sendonly"):audioTransceiver.direction="sendonly":"recvonly"===audioTransceiver.direction&&(audioTransceiver.setDirection?audioTransceiver.setDirection("inactive"):audioTransceiver.direction="inactive"):!0!==offerOptions.offerToReceiveAudio||audioTransceiver||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==offerOptions.offerToReceiveVideo&&(offerOptions.offerToReceiveVideo=!!offerOptions.offerToReceiveVideo);const videoTransceiver=this.getTransceivers().find(transceiver=>"video"===transceiver.receiver.track.kind);!1===offerOptions.offerToReceiveVideo&&videoTransceiver?"sendrecv"===videoTransceiver.direction?videoTransceiver.setDirection?videoTransceiver.setDirection("sendonly"):videoTransceiver.direction="sendonly":"recvonly"===videoTransceiver.direction&&(videoTransceiver.setDirection?videoTransceiver.setDirection("inactive"):videoTransceiver.direction="inactive"):!0!==offerOptions.offerToReceiveVideo||videoTransceiver||this.addTransceiver("video",{direction:"recvonly"})}return origCreateOffer.apply(this,arguments)}}function shimAudioContext(window){"object"!=typeof window||window.AudioContext||(window.AudioContext=window.webkitAudioContext)}var sdp=__webpack_require__("./node_modules/sdp/sdp.js"),sdp_default=__webpack_require__.n(sdp);function shimRTCIceCandidate(window){if(!window.RTCIceCandidate||window.RTCIceCandidate&&"foundation"in window.RTCIceCandidate.prototype)return;const NativeRTCIceCandidate=window.RTCIceCandidate;window.RTCIceCandidate=function RTCIceCandidate(args){if("object"==typeof args&&args.candidate&&0===args.candidate.indexOf("a=")&&((args=JSON.parse(JSON.stringify(args))).candidate=args.candidate.substring(2)),args.candidate&&args.candidate.length){const nativeCandidate=new NativeRTCIceCandidate(args),parsedCandidate=sdp_default().parseCandidate(args.candidate);for(const key in parsedCandidate)key in nativeCandidate||Object.defineProperty(nativeCandidate,key,{value:parsedCandidate[key]});return nativeCandidate.toJSON=function toJSON(){return{candidate:nativeCandidate.candidate,sdpMid:nativeCandidate.sdpMid,sdpMLineIndex:nativeCandidate.sdpMLineIndex,usernameFragment:nativeCandidate.usernameFragment}},nativeCandidate}return new NativeRTCIceCandidate(args)},window.RTCIceCandidate.prototype=NativeRTCIceCandidate.prototype,wrapPeerConnectionEvent(window,"icecandidate",e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new window.RTCIceCandidate(e.candidate),writable:"false"}),e))}function shimRTCIceCandidateRelayProtocol(window){!window.RTCIceCandidate||window.RTCIceCandidate&&"relayProtocol"in window.RTCIceCandidate.prototype||wrapPeerConnectionEvent(window,"icecandidate",e=>{if(e.candidate){const parsedCandidate=sdp_default().parseCandidate(e.candidate.candidate);"relay"===parsedCandidate.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[parsedCandidate.priority>>24])}return e})}function shimMaxMessageSize(window,browserDetails){if(!window.RTCPeerConnection)return;"sctp"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){if(this._sctp=null,"chrome"===browserDetails.browser&&browserDetails.version>=76){const{sdpSemantics}=this.getConfiguration();"plan-b"===sdpSemantics&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(description){if(!description||!description.sdp)return!1;const sections=sdp_default().splitSections(description.sdp);return sections.shift(),sections.some(mediaSection=>{const mLine=sdp_default().parseMLine(mediaSection);return mLine&&"application"===mLine.kind&&-1!==mLine.protocol.indexOf("SCTP")})}(arguments[0])){const isFirefox=function(description){const match=description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===match||match.length<2)return-1;const version=parseInt(match[1],10);return version!=version?-1:version}(arguments[0]),canSendMMS=function(remoteIsFirefox){let canSendMaxMessageSize=65536;return"firefox"===browserDetails.browser&&(canSendMaxMessageSize=browserDetails.version<57?-1===remoteIsFirefox?16384:2147483637:browserDetails.version<60?57===browserDetails.version?65535:65536:2147483637),canSendMaxMessageSize}(isFirefox),remoteMMS=function(description,remoteIsFirefox){let maxMessageSize=65536;"firefox"===browserDetails.browser&&57===browserDetails.version&&(maxMessageSize=65535);const match=sdp_default().matchPrefix(description.sdp,"a=max-message-size:");return match.length>0?maxMessageSize=parseInt(match[0].substring(19),10):"firefox"===browserDetails.browser&&-1!==remoteIsFirefox&&(maxMessageSize=2147483637),maxMessageSize}(arguments[0],isFirefox);let maxMessageSize;maxMessageSize=0===canSendMMS&&0===remoteMMS?Number.POSITIVE_INFINITY:0===canSendMMS||0===remoteMMS?Math.max(canSendMMS,remoteMMS):Math.min(canSendMMS,remoteMMS);const sctp={};Object.defineProperty(sctp,"maxMessageSize",{get:()=>maxMessageSize}),this._sctp=sctp}return origSetRemoteDescription.apply(this,arguments)}}function shimSendThrowTypeError(window){if(!window.RTCPeerConnection||!("createDataChannel"in window.RTCPeerConnection.prototype))return;function wrapDcSend(dc,pc){const origDataChannelSend=dc.send;dc.send=function send(){const data=arguments[0],length=data.length||data.size||data.byteLength;if("open"===dc.readyState&&pc.sctp&&length>pc.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+pc.sctp.maxMessageSize+" bytes)");return origDataChannelSend.apply(dc,arguments)}}const origCreateDataChannel=window.RTCPeerConnection.prototype.createDataChannel;window.RTCPeerConnection.prototype.createDataChannel=function createDataChannel(){const dataChannel=origCreateDataChannel.apply(this,arguments);return wrapDcSend(dataChannel,this),dataChannel},wrapPeerConnectionEvent(window,"datachannel",e=>(wrapDcSend(e.channel,e.target),e))}function shimConnectionState(window){if(!window.RTCPeerConnection||"connectionState"in window.RTCPeerConnection.prototype)return;const proto=window.RTCPeerConnection.prototype;Object.defineProperty(proto,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(proto,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(cb){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),cb&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=cb)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(method=>{const origMethod=proto[method];proto[method]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const pc=e.target;if(pc._lastConnectionState!==pc.connectionState){pc._lastConnectionState=pc.connectionState;const newEvent=new Event("connectionstatechange",e);pc.dispatchEvent(newEvent)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),origMethod.apply(this,arguments)}})}function removeExtmapAllowMixed(window,browserDetails){if(!window.RTCPeerConnection)return;if("chrome"===browserDetails.browser&&browserDetails.version>=71)return;if("safari"===browserDetails.browser&&browserDetails._safariVersion>=13.1)return;const nativeSRD=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(desc){if(desc&&desc.sdp&&-1!==desc.sdp.indexOf("\na=extmap-allow-mixed")){const sdp=desc.sdp.split("\n").filter(line=>"a=extmap-allow-mixed"!==line.trim()).join("\n");window.RTCSessionDescription&&desc instanceof window.RTCSessionDescription?arguments[0]=new window.RTCSessionDescription({type:desc.type,sdp}):desc.sdp=sdp}return nativeSRD.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(window,browserDetails){if(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype)return;const nativeAddIceCandidate=window.RTCPeerConnection.prototype.addIceCandidate;nativeAddIceCandidate&&0!==nativeAddIceCandidate.length&&(window.RTCPeerConnection.prototype.addIceCandidate=function addIceCandidate(){return arguments[0]?("chrome"===browserDetails.browser&&browserDetails.version<78||"firefox"===browserDetails.browser&&browserDetails.version<68||"safari"===browserDetails.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():nativeAddIceCandidate.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(window,browserDetails){if(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype)return;const nativeSetLocalDescription=window.RTCPeerConnection.prototype.setLocalDescription;nativeSetLocalDescription&&0!==nativeSetLocalDescription.length&&(window.RTCPeerConnection.prototype.setLocalDescription=function setLocalDescription(){let desc=arguments[0]||{};if("object"!=typeof desc||desc.type&&desc.sdp)return nativeSetLocalDescription.apply(this,arguments);if(desc={type:desc.type,sdp:desc.sdp},!desc.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":desc.type="offer";break;default:desc.type="answer"}if(desc.sdp||"offer"!==desc.type&&"answer"!==desc.type)return nativeSetLocalDescription.apply(this,[desc]);return("offer"===desc.type?this.createOffer:this.createAnswer).apply(this).then(d=>nativeSetLocalDescription.apply(this,[d]))})}(function adapterFactory({window}={},options={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const logging=log,browserDetails=function detectBrowser(window){const result={browser:null,version:null};if(void 0===window||!window.navigator||!window.navigator.userAgent)return result.browser="Not a browser.",result;const{navigator}=window;if(navigator.userAgentData&&navigator.userAgentData.brands){const chromium=navigator.userAgentData.brands.find(brand=>"Chromium"===brand.brand);if(chromium)return{browser:"chrome",version:parseInt(chromium.version,10)}}if(navigator.mozGetUserMedia)result.browser="firefox",result.version=parseInt(extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1));else if(navigator.webkitGetUserMedia||!1===window.isSecureContext&&window.webkitRTCPeerConnection)result.browser="chrome",result.version=parseInt(extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else{if(!window.RTCPeerConnection||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return result.browser="Not a supported browser.",result;result.browser="safari",result.version=parseInt(extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)),result.supportsUnifiedPlan=window.RTCRtpTransceiver&&"currentDirection"in window.RTCRtpTransceiver.prototype,result._safariVersion=extractVersion(navigator.userAgent,/Version\/(\d+(\.?\d+))/,1)}return result}(window),adapter={browserDetails,commonShim:common_shim_namespaceObject,extractVersion,disableLog,disableWarnings,sdp};switch(browserDetails.browser){case"chrome":if(!chrome_shim_namespaceObject||!shimPeerConnection||!options.shimChrome)return logging("Chrome shim is not included in this adapter release."),adapter;if(null===browserDetails.version)return logging("Chrome shim can not determine version, not shimming."),adapter;logging("adapter.js shimming chrome."),adapter.browserShim=chrome_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),shimGetUserMedia(window,browserDetails),shimMediaStream(window),shimPeerConnection(window,browserDetails),shimOnTrack(window),shimAddTrackRemoveTrack(window,browserDetails),shimGetSendersWithDtmf(window),shimSenderReceiverGetStats(window),fixNegotiationNeeded(window,browserDetails),shimRTCIceCandidate(window),shimRTCIceCandidateRelayProtocol(window),shimConnectionState(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window),removeExtmapAllowMixed(window,browserDetails);break;case"firefox":if(!firefox_shim_namespaceObject||!firefox_shim_shimPeerConnection||!options.shimFirefox)return logging("Firefox shim is not included in this adapter release."),adapter;logging("adapter.js shimming firefox."),adapter.browserShim=firefox_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),getusermedia_shimGetUserMedia(window,browserDetails),firefox_shim_shimPeerConnection(window,browserDetails),firefox_shim_shimOnTrack(window),shimRemoveStream(window),shimSenderGetStats(window),shimReceiverGetStats(window),shimRTCDataChannel(window),shimAddTransceiver(window),shimGetParameters(window),shimCreateOffer(window),shimCreateAnswer(window),shimRTCIceCandidate(window),shimConnectionState(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window);break;case"safari":if(!safari_shim_namespaceObject||!options.shimSafari)return logging("Safari shim is not included in this adapter release."),adapter;logging("adapter.js shimming safari."),adapter.browserShim=safari_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),shimRTCIceServerUrls(window),shimCreateOfferLegacy(window),shimCallbacksAPI(window),shimLocalStreamsAPI(window),shimRemoteStreamsAPI(window),shimTrackEventTransceiver(window),safari_shim_shimGetUserMedia(window),shimAudioContext(window),shimRTCIceCandidate(window),shimRTCIceCandidateRelayProtocol(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window),removeExtmapAllowMixed(window,browserDetails);break;default:logging("Unsupported browser!")}return adapter})({window:"undefined"==typeof window?void 0:window})}}]);