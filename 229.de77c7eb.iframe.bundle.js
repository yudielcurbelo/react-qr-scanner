"use strict";(self.webpackChunk_yudiel_react_qr_scanner=self.webpackChunk_yudiel_react_qr_scanner||[]).push([[229],{"./node_modules/barcode-detector/dist/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{vR:()=>Ri});var process=__webpack_require__("./node_modules/process/browser.js"),Xe=i=>{throw TypeError(i)},qe=(i,f,p)=>f.has(i)||Xe("Cannot "+p),Ze=(i,f,p)=>(qe(i,f,"read from private field"),p?p.call(i):f.get(i));const Bt=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],Ut=Bt.map((([i])=>i)),Za=Ut.filter(((i,f)=>"L"===Bt[f][1])),Ya=Ut.filter(((i,f)=>"M"===Bt[f][1]));function re(i){switch(i){case"Linear-Codes":return Za.reduce(((f,p)=>f|re(p)),0);case"Matrix-Codes":return Ya.reduce(((f,p)=>f|re(p)),0);case"Any":return(1<<Bt.length)-1;case"None":return 0;default:return 1<<Ut.indexOf(i)}}function Qa(i){if(0===i)return"None";const f=31-Math.clz32(i);return Ut[f]}function Ja(i){return i.reduce(((f,p)=>f|re(p)),0)}const Ka=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function ti(i){return Ka.indexOf(i)}const Je=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function ei(i){return"UnicodeBig"===i?Je.indexOf("UTF16BE"):Je.indexOf(i)}const ri=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function ni(i){return ri[i]}const ai=["Ignore","Read","Require"];function ii(i){return ai.indexOf(i)}const oi=["Plain","ECI","HRI","Hex","Escaped"];function si(i){return oi.indexOf(i)}const Lt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function Ke(i){return{...i,formats:Ja(i.formats),binarizer:ti(i.binarizer),eanAddOnSymbol:ii(i.eanAddOnSymbol),textMode:si(i.textMode),characterSet:ei(i.characterSet)}}function ui(i){return{...i,format:Qa(i.format),contentType:ni(i.contentType),eccLevel:i.ecLevel}}const ci={locateFile:(i,f)=>{const p=i.match(/_(.+?)\.wasm$/);return p?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.1.0/dist/${p[1]}/${i}`:f+i}},Rt=new WeakMap;function li(i,f){return Object.is(i,f)||Object.keys(i).length===Object.keys(f).length&&Object.keys(i).every((p=>Object.prototype.hasOwnProperty.call(f,p)&&i[p]===f[p]))}function er(i,{overrides:f,equalityFn:p=li,fireImmediately:T=!1}={}){var c;const[O,D]=null!=(c=Rt.get(i))?c:[ci],R=null!=f?f:O;let A;if(T){if(D&&(A=p(O,R)))return D;const M=i({...R});return Rt.set(i,[R,M]),M}(null!=A?A:p(O,R))||Rt.set(i,[R])}Lt.formats;var i,f,ae=(f=typeof document<"u"&&"SCRIPT"===(null==(i=document.currentScript)?void 0:i.tagName.toUpperCase())?document.currentScript.src:void 0,function(p={}){var O,D,c=p,R=new Promise(((t,e)=>{O=t,D=e})),A="object"==typeof window,M=typeof Bun<"u",k=typeof WorkerGlobalScope<"u";"object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node&&process.type;var it,ot,st,Z=Object.assign({},c),tt="./this.program",L="";(A||k||M)&&(k?L=self.location.href:typeof document<"u"&&"SCRIPT"===(null===(st=document.currentScript)||void 0===st?void 0:st.tagName.toUpperCase())&&(L=document.currentScript.src),f&&(L=f),L=L.startsWith("blob:")?"":L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),k&&(ot=t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)}),it=async t=>{var e=await fetch(t,{credentials:"same-origin"});if(e.ok)return e.arrayBuffer();throw new Error(e.status+" : "+e.url)});var dr=c.print||console.log.bind(console),et=c.printErr||console.error.bind(console);Object.assign(c,Z),Z=null,c.arguments&&c.arguments,c.thisProgram&&(tt=c.thisProgram);var mt,H,B,ut,gt,rt,P,oe,se,vt=c.wasmBinary,ie=!1;function ue(){var t=mt.buffer;c.HEAP8=H=new Int8Array(t),c.HEAP16=ut=new Int16Array(t),c.HEAPU8=B=new Uint8Array(t),c.HEAPU16=gt=new Uint16Array(t),c.HEAP32=rt=new Int32Array(t),c.HEAPU32=P=new Uint32Array(t),c.HEAPF32=oe=new Float32Array(t),c.HEAPF64=se=new Float64Array(t)}var ce=[],le=[],fe=[],Y=0,ct=null;function Wt(t){var e;null===(e=c.onAbort)||void 0===e||e.call(c,t),et(t="Aborted("+t+")"),ie=!0,t+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(t);throw D(r),r}var wt,de=t=>t.startsWith("data:application/octet-stream;base64,");function Cr(){var t="zxing_reader.wasm";return de(t)?t:function yt(t){return c.locateFile?c.locateFile(t,L):L+t}(t)}async function Pr(t){if(!vt)try{var e=await it(t);return new Uint8Array(e)}catch{}return function Tr(t){if(t==wt&&vt)return new Uint8Array(vt);if(ot)return ot(t);throw"both async and sync fetching of the wasm failed"}(t)}async function Er(t,e,r){if(!t&&"function"==typeof WebAssembly.instantiateStreaming&&!de(e)&&"function"==typeof fetch)try{var n=fetch(e,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,r)}catch(o){et(`wasm streaming compile failed: ${o}`),et("falling back to ArrayBuffer instantiation")}return async function _r(t,e){try{var r=await Pr(t);return await WebAssembly.instantiate(r,e)}catch(a){et(`failed to asynchronously prepare wasm: ${a}`),Wt(a)}}(e,r)}var kt=t=>{for(;t.length>0;)t.shift()(c)};c.noExitRuntime;var m=t=>je(t),g=()=>Re(),$t=[],bt=0,V=0;class Ht{constructor(e){this.excPtr=e,this.ptr=e-24}set_type(e){P[this.ptr+4>>2]=e}get_type(){return P[this.ptr+4>>2]}set_destructor(e){P[this.ptr+8>>2]=e}get_destructor(){return P[this.ptr+8>>2]}set_caught(e){e=e?1:0,H[this.ptr+12]=e}get_caught(){return 0!=H[this.ptr+12]}set_rethrown(e){e=e?1:0,H[this.ptr+13]=e}get_rethrown(){return 0!=H[this.ptr+13]}init(e,r){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(r)}set_adjusted_ptr(e){P[this.ptr+16>>2]=e}get_adjusted_ptr(){return P[this.ptr+16>>2]}}var Ct=t=>Fe(t),Vt=t=>{var e=V;if(!e)return Ct(0),0;var r=new Ht(e);r.set_adjusted_ptr(e);var n=r.get_type();if(!n)return Ct(0),e;for(var a of t){if(0===a||a===n)break;var o=r.ptr+16;if(Ue(a,n,o))return Ct(a),e}return Ct(n),e},Tt={},Nt=t=>{for(;t.length;){var e=t.pop();t.pop()(e)}};function lt(t){return this.fromWireType(P[t>>2])}var he,pe,at,nt={},Q={},Pt={},_t=t=>{throw new he(t)},J=(t,e,r)=>{function n(s){var l=r(s);l.length!==t.length&&_t("Mismatched type converter count");for(var d=0;d<t.length;++d)W(t[d],l[d])}t.forEach((s=>Pt[s]=e));var a=new Array(e.length),o=[],u=0;e.forEach(((s,l)=>{Q.hasOwnProperty(s)?a[l]=Q[s]:(o.push(s),nt.hasOwnProperty(s)||(nt[s]=[]),nt[s].push((()=>{a[l]=Q[s],++u===o.length&&n(a)})))})),0===o.length&&n(a)},F=t=>{for(var e="",r=t;B[r];)e+=pe[B[r++]];return e},b=t=>{throw new at(t)};function W(t,e){return function Hr(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=e.name;if(t||b(`type "${n}" must have a positive integer typeid pointer`),Q.hasOwnProperty(t)){if(r.ignoreDuplicateRegistrations)return;b(`Cannot register type '${n}' twice`)}if(Q[t]=e,delete Pt[t],nt.hasOwnProperty(t)){var a=nt[t];delete nt[t],a.forEach((o=>o()))}}(t,e,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}var N=8,Nr=t=>({count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType}),zt=t=>{b(function e(r){return r.$$.ptrType.registeredClass.name}(t)+" instance already deleted")},Gt=!1,ye=t=>{},ve=t=>{t.count.value-=1,0===t.count.value&&(t=>{t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)})(t)},me=(t,e,r)=>{if(e===r)return t;if(void 0===r.baseClass)return null;var n=me(t,e,r.baseClass);return null===n?null:r.downcast(n)},ge={},Gr={},qr=(t,e)=>(e=((t,e)=>{for(void 0===e&&b("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e})(t,e),Gr[e]),Et=(t,e)=>((!e.ptrType||!e.ptr)&&_t("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&_t("Both smartPtrType and smartPtr must be specified"),e.count={value:1},ft(Object.create(t,{$$:{value:e,writable:!0}})));function Zr(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var r=qr(this.registeredClass,e);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=e,r.$$.smartPtr=t,r.clone();var n=r.clone();return this.destructor(t),n}function a(){return this.isSmartPointer?Et(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):Et(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var s,o=this.registeredClass.getActualType(e),u=ge[o];if(!u)return a.call(this);s=this.isConst?u.constPointerType:u.pointerType;var l=me(e,this.registeredClass,s.registeredClass);return null===l?a.call(this):this.isSmartPointer?Et(s.registeredClass.instancePrototype,{ptrType:s,ptr:l,smartPtrType:this,smartPtr:t}):Et(s.registeredClass.instancePrototype,{ptrType:s,ptr:l})}var ft=t=>typeof FinalizationRegistry>"u"?(ft=e=>e,t):(Gt=new FinalizationRegistry((e=>{ve(e.$$)})),ft=e=>{var r=e.$$;if(r.smartPtr){var a={$$:r};Gt.register(e,a,e)}return e},ye=e=>Gt.unregister(e),ft(t));function Ot(){}var At=(t,e)=>Object.defineProperty(e,"name",{value:t}),we=(t,e,r)=>{if(void 0===t[e].overloadTable){var n=t[e];t[e]=function(){for(var a=arguments.length,o=new Array(a),u=0;u<a;u++)o[u]=arguments[u];return t[e].overloadTable.hasOwnProperty(o.length)||b(`Function '${r}' called with an invalid number of arguments (${o.length}) - expects one of (${t[e].overloadTable})!`),t[e].overloadTable[o.length].apply(this,o)},t[e].overloadTable=[],t[e].overloadTable[n.argCount]=n}},$e=(t,e,r)=>{c.hasOwnProperty(t)?((void 0===r||void 0!==c[t].overloadTable&&void 0!==c[t].overloadTable[r])&&b(`Cannot register public name '${t}' twice`),we(c,t,t),c[t].overloadTable.hasOwnProperty(r)&&b(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),c[t].overloadTable[r]=e):(c[t]=e,c[t].argCount=r)};function tn(t,e,r,n,a,o,u,s){this.name=t,this.constructor=e,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=o,this.upcast=u,this.downcast=s,this.pureVirtualFunctions=[]}var Xt=(t,e,r)=>{for(;e!==r;)e.upcast||b(`Expected null or instance of ${r.name}, got an instance of ${e.name}`),t=e.upcast(t),e=e.baseClass;return t};function en(t,e){if(null===e)return this.isReference&&b(`null is not a valid ${this.name}`),0;e.$$||b(`Cannot pass "${Jt(e)}" as a ${this.name}`),e.$$.ptr||b(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=e.$$.ptrType.registeredClass;return Xt(e.$$.ptr,r,this.registeredClass)}function rn(t,e){var r;if(null===e)return this.isReference&&b(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,r),r):0;(!e||!e.$$)&&b(`Cannot pass "${Jt(e)}" as a ${this.name}`),e.$$.ptr||b(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&e.$$.ptrType.isConst&&b(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);var n=e.$$.ptrType.registeredClass;if(r=Xt(e.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&b("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?r=e.$$.smartPtr:b(`Cannot convert argument of type ${e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)r=e.$$.smartPtr;else{var a=e.clone();r=this.rawShare(r,G.toHandle((()=>a.delete()))),null!==t&&t.push(this.rawDestructor,r)}break;default:b("Unsupporting sharing policy")}return r}function nn(t,e){if(null===e)return this.isReference&&b(`null is not a valid ${this.name}`),0;e.$$||b(`Cannot pass "${Jt(e)}" as a ${this.name}`),e.$$.ptr||b(`Cannot pass deleted object as a pointer of type ${this.name}`),e.$$.ptrType.isConst&&b(`Cannot convert argument of type ${e.$$.ptrType.name} to parameter type ${this.name}`);var r=e.$$.ptrType.registeredClass;return Xt(e.$$.ptr,r,this.registeredClass)}function St(t,e,r,n,a,o,u,s,l,d,h){this.name=t,this.registeredClass=e,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=o,this.sharingPolicy=u,this.rawGetPointee=s,this.rawConstructor=l,this.rawShare=d,this.rawDestructor=h,a||void 0!==e.baseClass?this.toWireType=rn:n?(this.toWireType=en,this.destructorFunction=null):(this.toWireType=nn,this.destructorFunction=null)}var Ce,Te,be=(t,e,r)=>{c.hasOwnProperty(t)||_t("Replacing nonexistent public symbol"),void 0!==c[t].overloadTable&&void 0!==r?c[t].overloadTable[r]=e:(c[t]=e,c[t].argCount=r)},xt=[],w=t=>{var e=xt[t];return e||(t>=xt.length&&(xt.length=t+1),xt[t]=e=Ce.get(t)),e},sn=function(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return t.includes("j")?((t,e,r)=>(t=t.replace(/p/g,"i"),(0,c["dynCall_"+t])(e,...r)))(t,e,r):w(e)(...r)},U=(t,e)=>{t=F(t);var n=function r(){return t.includes("j")?((t,e)=>function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return sn(t,e,n)})(t,e):w(e)}();return"function"!=typeof n&&b(`unknown function pointer with signature ${t}: ${e}`),n},Pe=t=>{var e=Ie(t),r=F(e);return X(e),r},Dt=(t,e)=>{var r=[],n={};throw e.forEach((function a(o){if(!n[o]&&!Q[o]){if(Pt[o])return void Pt[o].forEach(a);r.push(o),n[o]=!0}})),new Te(`${t}: `+r.map(Pe).join([", "]))},qt=(t,e)=>{for(var r=[],n=0;n<t;n++)r.push(P[e+4*n>>2]);return r};function Zt(t,e,r,n,a,o){var u=e.length;u<2&&b("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=null!==e[1]&&null!==r,l=function fn(t){for(var e=1;e<t.length;++e)if(null!==t[e]&&void 0===t[e].destructorFunction)return!0;return!1}(e),d="void"!==e[0].name,h=u-2,y=new Array(h),$=[],C=[];return At(t,(function(){var I;C.length=0,$.length=s?2:1,$[0]=a,s&&(I=e[1].toWireType(C,this),$[1]=I);for(var S=0;S<h;++S)y[S]=e[S+2].toWireType(C,S<0||arguments.length<=S?void 0:arguments[S]),$.push(y[S]);return function K(j){if(l)Nt(C);else for(var q=s?1:2;q<e.length;q++){var Mt=1===q?I:y[q-2];null!==e[q].destructorFunction&&e[q].destructorFunction(Mt)}if(d)return e[0].fromWireType(j)}(n(...$))}))}var _e=t=>{const e=(t=t.trim()).indexOf("(");return-1!==e?t.substr(0,e):t},Yt=[],z=[],Qt=t=>{t>9&&0==--z[t+1]&&(z[t]=void 0,Yt.push(t))},pn=()=>z.length/2-5-Yt.length,G={toValue:t=>(t||b("Cannot use deleted val. handle = "+t),z[t]),toHandle:t=>{switch(t){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const e=Yt.pop()||z.length;return z[e]=t,z[e+1]=1,e}}}},Ee={name:"emscripten::val",fromWireType:t=>{var e=G.toValue(t);return Qt(t),e},toWireType:(t,e)=>G.toHandle(e),argPackAdvance:N,readValueFromPointer:lt,destructorFunction:null},Jt=t=>{if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t},mn=(t,e)=>{switch(e){case 4:return function(r){return this.fromWireType(oe[r>>2])};case 8:return function(r){return this.fromWireType(se[r>>3])};default:throw new TypeError(`invalid float width (${e}): ${t}`)}},$n=(t,e,r)=>{switch(e){case 1:return r?n=>H[n]:n=>B[n];case 2:return r?n=>ut[n>>1]:n=>gt[n>>1];case 4:return r?n=>rt[n>>2]:n=>P[n>>2];default:throw new TypeError(`invalid integer width (${e}): ${t}`)}},Tn=Object.assign({optional:!0},Ee),dt=(t,e,r)=>((t,e,r,n)=>{if(!(n>0))return 0;for(var a=r,o=r+n-1,u=0;u<t.length;++u){var s=t.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++u)),s<=127){if(r>=o)break;e[r++]=s}else if(s<=2047){if(r+1>=o)break;e[r++]=192|s>>6,e[r++]=128|63&s}else if(s<=65535){if(r+2>=o)break;e[r++]=224|s>>12,e[r++]=128|s>>6&63,e[r++]=128|63&s}else{if(r+3>=o)break;e[r++]=240|s>>18,e[r++]=128|s>>12&63,e[r++]=128|s>>6&63,e[r++]=128|63&s}}return e[r]=0,r-a})(t,B,e,r),Oe=typeof TextDecoder<"u"?new TextDecoder:void 0,Ae=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(var n=e+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN),a=e;t[a]&&!(a>=n);)++a;if(a-e>16&&t.buffer&&Oe)return Oe.decode(t.subarray(e,a));for(var o="";e<a;){var u=t[e++];if(128&u){var s=63&t[e++];if(192!=(224&u)){var l=63&t[e++];if((u=224==(240&u)?(15&u)<<12|s<<6|l:(7&u)<<18|s<<12|l<<6|63&t[e++])<65536)o+=String.fromCharCode(u);else{var d=u-65536;o+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else o+=String.fromCharCode((31&u)<<6|s)}else o+=String.fromCharCode(u)}return o},On=(t,e)=>t?Ae(B,t,e):"",Se=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Sn=(t,e)=>{for(var r=t,n=r>>1,a=n+e/2;!(n>=a)&&gt[n];)++n;if((r=n<<1)-t>32&&Se)return Se.decode(B.subarray(t,r));for(var o="",u=0;!(u>=e/2);++u){var s=ut[t+2*u>>1];if(0==s)break;o+=String.fromCharCode(s)}return o},xn=(t,e,r)=>{var n;if(null!==(n=r)&&void 0!==n||(r=2147483647),r<2)return 0;for(var a=e,o=(r-=2)<2*t.length?r/2:t.length,u=0;u<o;++u){var s=t.charCodeAt(u);ut[e>>1]=s,e+=2}return ut[e>>1]=0,e-a},Dn=t=>2*t.length,In=(t,e)=>{for(var r=0,n="";!(r>=e/4);){var a=rt[t+4*r>>2];if(0==a)break;if(++r,a>=65536){var o=a-65536;n+=String.fromCharCode(55296|o>>10,56320|1023&o)}else n+=String.fromCharCode(a)}return n},Mn=(t,e,r)=>{var n;if(null!==(n=r)&&void 0!==n||(r=2147483647),r<4)return 0;for(var a=e,o=a+r-4,u=0;u<t.length;++u){var s=t.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++u)),rt[e>>2]=s,(e+=4)+4>o)break}return rt[e>>2]=0,e-a},Fn=t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n>=55296&&n<=57343&&++r,e+=4}return e},Kt=[],kn={},xe=()=>{if("object"==typeof globalThis)return globalThis;function t(e){e.$$$embind_global$$$=e;var r="object"==typeof $$$embind_global$$$&&e.$$$embind_global$$$==e;return r||delete e.$$$embind_global$$$,r}if("object"==typeof $$$embind_global$$$||("object"==typeof __webpack_require__.g&&t(__webpack_require__.g)?$$$embind_global$$$=__webpack_require__.g:"object"==typeof self&&t(self)&&($$$embind_global$$$=self),"object"==typeof $$$embind_global$$$))return $$$embind_global$$$;throw Error("unable to get global object.")},De=(t,e)=>{var r=Q[t];return void 0===r&&b(`${e} has unknown type ${Pe(t)}`),r},Gn=Reflect.construct,ta=(t,e)=>Math.ceil(t/e)*e,ea=t=>{var r=(t-mt.buffer.byteLength+65535)/65536|0;try{return mt.grow(r),ue(),1}catch{}},te={},ht=()=>{if(!ht.strings){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:tt||"./this.program"};for(var r in te)void 0===te[r]?delete e[r]:e[r]=te[r];var n=[];for(var r in e)n.push(`${r}=${e[r]}`);ht.strings=n}return ht.strings},ca=[null,[],[]],la=(t,e)=>{var r=ca[t];0===e||10===e?((1===t?dr:et)(Ae(r)),r.length=0):r.push(e)};he=c.InternalError=class extends Error{constructor(t){super(t),this.name="InternalError"}},(()=>{for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);pe=t})(),at=c.BindingError=class extends Error{constructor(t){super(t),this.name="BindingError"}},Object.assign(Ot.prototype,{isAliasOf(t){if(!(this instanceof Ot&&t instanceof Ot))return!1;var e=this.$$.ptrType.registeredClass,r=this.$$.ptr;t.$$=t.$$;for(var n=t.$$.ptrType.registeredClass,a=t.$$.ptr;e.baseClass;)r=e.upcast(r),e=e.baseClass;for(;n.baseClass;)a=n.upcast(a),n=n.baseClass;return e===n&&r===a},clone(){if(this.$$.ptr||zt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t=ft(Object.create(Object.getPrototypeOf(this),{$$:{value:Nr(this.$$)}}));return t.$$.count.value+=1,t.$$.deleteScheduled=!1,t},delete(){this.$$.ptr||zt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&b("Object already scheduled for deletion"),ye(this),ve(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||zt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&b("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}}),Object.assign(St.prototype,{getPointee(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},destructor(t){var e;null===(e=this.rawDestructor)||void 0===e||e.call(this,t)},argPackAdvance:N,readValueFromPointer:lt,fromWireType:Zr}),Te=c.UnboundTypeError=((t,e)=>{var r=At(e,(function(n){this.name=e,this.message=n;var a=new Error(n).stack;void 0!==a&&(this.stack=this.toString()+"\n"+a.replace(/^Error(:[^\n]*)?\n/,""))}));return r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.prototype.toString=function(){return void 0===this.message?this.name:`${this.name}: ${this.message}`},r})(Error,"UnboundTypeError"),z.push(0,1,void 0,1,null,1,!0,1,!1,1),c.count_emval_handles=pn;var E,ha={s:t=>{var e=new Ht(t);return e.get_caught()||(e.set_caught(!0),bt--),e.set_rethrown(!1),$t.push(e),Be(t),Me(t)},w:()=>{v(0,0);var t=$t.pop();Le(t.excPtr),V=0},a:()=>Vt([]),j:t=>Vt([t]),l:(t,e)=>Vt([t,e]),M:()=>{var t=$t.pop();t||Wt("no exception to throw");var e=t.excPtr;throw t.get_rethrown()||($t.push(t),t.set_rethrown(!0),t.set_caught(!1),bt++),V=e},p:(t,e,r)=>{throw new Ht(t).init(e,r),bt++,V=t},ca:()=>bt,d:t=>{throw V||(V=t),V},Z:()=>Wt(""),sa:t=>{var e=Tt[t];delete Tt[t];var r=e.rawConstructor,n=e.rawDestructor,a=e.fields,o=a.map((u=>u.getterReturnType)).concat(a.map((u=>u.setterArgumentType)));J([t],o,(u=>{var s={};return a.forEach(((l,d)=>{var h=l.fieldName,y=u[d],$=l.getter,C=l.getterContext,_=u[d+a.length],I=l.setter,S=l.setterContext;s[h]={read:x=>y.fromWireType($(C,x)),write:(x,K)=>{var j=[];I(S,x,_.toWireType(j,K)),Nt(j)}}})),[{name:e.name,fromWireType:l=>{var d={};for(var h in s)d[h]=s[h].read(l);return n(l),d},toWireType:(l,d)=>{for(var h in s)if(!(h in d))throw new TypeError(`Missing field: "${h}"`);var y=r();for(h in s)s[h].write(y,d[h]);return null!==l&&l.push(n,y),y},argPackAdvance:N,readValueFromPointer:lt,destructorFunction:n}]}))},Y:(t,e,r,n,a)=>{},na:(t,e,r,n)=>{W(t,{name:e=F(e),fromWireType:function(a){return!!a},toWireType:function(a,o){return o?r:n},argPackAdvance:N,readValueFromPointer:function(a){return this.fromWireType(B[a])},destructorFunction:null})},qa:(t,e,r,n,a,o,u,s,l,d,h,y,$)=>{h=F(h),o=U(a,o),s&&(s=U(u,s)),d&&(d=U(l,d)),$=U(y,$);var C=(t=>{var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=48&&e<=57?`_${t}`:t})(h);$e(C,(function(){Dt(`Cannot construct ${h} due to unbound types`,[n])})),J([t,e,r],n?[n]:[],(_=>{var I,S;_=_[0],S=n?(I=_.registeredClass).instancePrototype:Ot.prototype;var x=At(h,(function(){if(Object.getPrototypeOf(this)!==K)throw new at("Use 'new' to construct "+h);if(void 0===j.constructor_body)throw new at(h+" has no accessible constructor");for(var ze=arguments.length,Ft=new Array(ze),jt=0;jt<ze;jt++)Ft[jt]=arguments[jt];var Ge=j.constructor_body[Ft.length];if(void 0===Ge)throw new at(`Tried to invoke ctor of ${h} with invalid number of parameters (${Ft.length}) - expected (${Object.keys(j.constructor_body).toString()}) parameters instead!`);return Ge.apply(this,Ft)})),K=Object.create(S,{constructor:{value:x}});x.prototype=K;var q,Mt,j=new tn(h,x,K,$,I,o,s,d);j.baseClass&&(null!==(Mt=(q=j.baseClass).__derivedClasses)&&void 0!==Mt||(q.__derivedClasses=[]),j.baseClass.__derivedClasses.push(j));var qa=new St(h,j,!0,!1,!1),Ve=new St(h+"*",j,!1,!1,!1),Ne=new St(h+" const*",j,!1,!0,!1);return ge[t]={pointerType:Ve,constPointerType:Ne},be(C,x),[qa,Ve,Ne]}))},pa:(t,e,r,n,a,o)=>{var u=qt(e,r);a=U(n,a),J([],[t],(s=>{var l=`constructor ${(s=s[0]).name}`;if(void 0===s.registeredClass.constructor_body&&(s.registeredClass.constructor_body=[]),void 0!==s.registeredClass.constructor_body[e-1])throw new at(`Cannot register multiple constructors with identical number of parameters (${e-1}) for class '${s.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return s.registeredClass.constructor_body[e-1]=()=>{Dt(`Cannot construct ${s.name} due to unbound types`,u)},J([],u,(d=>(d.splice(1,0,null),s.registeredClass.constructor_body[e-1]=Zt(l,d,null,a,o),[]))),[]}))},D:(t,e,r,n,a,o,u,s,l,d)=>{var h=qt(r,n);e=F(e),e=_e(e),o=U(a,o),J([],[t],(y=>{var $=`${(y=y[0]).name}.${e}`;function C(){Dt(`Cannot call ${$} due to unbound types`,h)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),s&&y.registeredClass.pureVirtualFunctions.push(e);var _=y.registeredClass.instancePrototype,I=_[e];return void 0===I||void 0===I.overloadTable&&I.className!==y.name&&I.argCount===r-2?(C.argCount=r-2,C.className=y.name,_[e]=C):(we(_,e,$),_[e].overloadTable[r-2]=C),J([],h,(S=>{var x=Zt($,S,y,o,u);return void 0===_[e].overloadTable?(x.argCount=r-2,_[e]=x):_[e].overloadTable[r-2]=x,[]})),[]}))},la:t=>W(t,Ee),Q:(t,e,r)=>{W(t,{name:e=F(e),fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:N,readValueFromPointer:mn(e,r),destructorFunction:null})},R:(t,e,r,n,a,o,u,s)=>{var l=qt(e,r);t=F(t),t=_e(t),a=U(n,a),$e(t,(function(){Dt(`Cannot call ${t} due to unbound types`,l)}),e-1),J([],l,(d=>{var h=[d[0],null].concat(d.slice(1));return be(t,Zt(t,h,null,a,o),e-1),[]}))},x:(t,e,r,n,a)=>{e=F(e);var o=h=>h;if(0===n){var u=32-8*r;o=h=>h<<u>>>u}var s=e.includes("unsigned");W(t,{name:e,fromWireType:o,toWireType:s?function(h,y){return this.name,y>>>0}:function(h,y){return this.name,y},argPackAdvance:N,readValueFromPointer:$n(e,r,0!==n),destructorFunction:null})},t:(t,e,r)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function o(u){var s=P[u>>2],l=P[u+4>>2];return new a(H.buffer,l,s)}W(t,{name:r=F(r),fromWireType:o,argPackAdvance:N,readValueFromPointer:o},{ignoreDuplicateRegistrations:!0})},ra:(t,e)=>{W(t,Tn)},ma:(t,e)=>{W(t,{name:e=F(e),fromWireType(r){for(var o,n=P[r>>2],a=r+4,u=a,s=0;s<=n;++s){var l=a+s;if(s==n||0==B[l]){var h=On(u,l-u);void 0===o?o=h:(o+="\0",o+=h),u=l+1}}return X(r),o},toWireType(r,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a,o="string"==typeof n;o||n instanceof Uint8Array||n instanceof Uint8ClampedArray||n instanceof Int8Array||b("Cannot pass non-string to std::string"),a=o?(t=>{for(var e=0,r=0;r<t.length;++r){var n=t.charCodeAt(r);n<=127?e++:n<=2047?e+=2:n>=55296&&n<=57343?(e+=4,++r):e+=3}return e})(n):n.length;var u=ee(4+a+1),s=u+4;if(P[u>>2]=a,o)dt(n,s,a+1);else if(o)for(var l=0;l<a;++l){var d=n.charCodeAt(l);d>255&&(X(s),b("String has UTF-16 code units that do not fit in 8 bits")),B[s+l]=d}else for(l=0;l<a;++l)B[s+l]=n[l];return null!==r&&r.push(X,u),u},argPackAdvance:N,readValueFromPointer:lt,destructorFunction(r){X(r)}})},N:(t,e,r)=>{var n,a,o,u;r=F(r),2===e?(n=Sn,a=xn,u=Dn,o=s=>gt[s>>1]):4===e&&(n=In,a=Mn,u=Fn,o=s=>P[s>>2]),W(t,{name:r,fromWireType:s=>{for(var d,l=P[s>>2],h=s+4,y=0;y<=l;++y){var $=s+4+y*e;if(y==l||0==o($)){var _=n(h,$-h);void 0===d?d=_:(d+="\0",d+=_),h=$+e}}return X(s),d},toWireType:(s,l)=>{"string"!=typeof l&&b(`Cannot pass non-string to C++ string type ${r}`);var d=u(l),h=ee(4+d+e);return P[h>>2]=d/e,a(l,h+4,d+e),null!==s&&s.push(X,h),h},argPackAdvance:N,readValueFromPointer:lt,destructorFunction(s){X(s)}})},J:(t,e,r,n,a,o)=>{Tt[t]={name:F(e),rawConstructor:U(r,n),rawDestructor:U(a,o),fields:[]}},ta:(t,e,r,n,a,o,u,s,l,d)=>{Tt[t].fields.push({fieldName:F(e),getterReturnType:r,getter:U(n,a),getterContext:o,setterArgumentType:u,setter:U(s,l),setterContext:d})},oa:(t,e)=>{W(t,{isVoid:!0,name:e=F(e),argPackAdvance:0,fromWireType:()=>{},toWireType:(r,n)=>{}})},fa:(t,e,r)=>B.copyWithin(t,e,e+r),U:(t,e,r,n)=>(t=Kt[t])(null,e=G.toValue(e),r,n),ua:Qt,wa:t=>0===t?G.toHandle(xe()):(t=(t=>{var e=kn[t];return void 0===e?F(t):e})(t),G.toHandle(xe()[t])),_:(t,e,r)=>{var n=((t,e)=>{for(var r=new Array(t),n=0;n<t;++n)r[n]=De(P[e+4*n>>2],"parameter "+n);return r})(t,e),a=n.shift();t--;var o=new Array(t),s=`methodCaller<(${n.map((l=>l.name)).join(", ")}) => ${a.name}>`;return(t=>{var e=Kt.length;return Kt.push(t),e})(At(s,((l,d,h,y)=>{for(var $=0,C=0;C<t;++C)o[C]=n[C].readValueFromPointer(y+$),$+=n[C].argPackAdvance;var _=1===r?Gn(d,o):d.apply(l,o);return((t,e,r)=>{var n=[],a=t.toWireType(n,r);return n.length&&(P[e>>2]=G.toHandle(n)),a})(a,h,_)})))},S:t=>{t>9&&(z[t+1]+=1)},va:t=>{var e=G.toValue(t);Nt(e),Qt(t)},ka:(t,e)=>{var r=(t=De(t,"_emval_take_value")).readValueFromPointer(e);return G.toHandle(r)},$:(t,e,r,n)=>{var a=(new Date).getFullYear(),o=new Date(a,0,1),u=new Date(a,6,1),s=o.getTimezoneOffset(),l=u.getTimezoneOffset(),d=Math.max(s,l);P[t>>2]=60*d,rt[e>>2]=+(s!=l);var h=C=>{var _=C>=0?"-":"+",I=Math.abs(C);return`UTC${_}${String(Math.floor(I/60)).padStart(2,"0")}${String(I%60).padStart(2,"0")}`},y=h(s),$=h(l);l<s?(dt(y,r,17),dt($,n,17)):(dt(y,n,17),dt($,r,17))},da:t=>{var e=B.length,r=2147483648;if((t>>>=0)>r)return!1;for(var n=1;n<=4;n*=2){var a=e*(1+.2/n);a=Math.min(a,t+100663296);var o=Math.min(r,ta(Math.max(t,a),65536));if(ea(o))return!0}return!1},aa:(t,e)=>{var r=0;return ht().forEach(((n,a)=>{var o=e+r;P[t+4*a>>2]=o,((t,e)=>{for(var r=0;r<t.length;++r)H[e++]=t.charCodeAt(r);H[e]=0})(n,o),r+=n.length+1})),0},ba:(t,e)=>{var r=ht();P[t>>2]=r.length;var n=0;return r.forEach((a=>n+=a.length+1)),P[e>>2]=n,0},ea:t=>52,W:function ua(t,e,r,n,a){return 70},P:(t,e,r,n)=>{for(var a=0,o=0;o<r;o++){var u=P[e>>2],s=P[e+4>>2];e+=8;for(var l=0;l<s;l++)la(t,B[u+l]);a+=s}return P[n>>2]=a,0},H:function Fa(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(o){if(m(a),o!==o+0)throw o;v(1,0)}},B:function Ra(t,e,r,n,a,o){var u=g();try{return w(t)(e,r,n,a,o)}catch(s){if(m(u),s!==s+0)throw s;v(1,0)}},T:function wa(t,e,r,n,a){var o=g();try{return w(t)(e,r,n,a)}catch(u){if(m(o),u!==u+0)throw u;v(1,0)}},O:function Va(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(o){if(m(a),o!==o+0)throw o;v(1,0)}},q:function xa(t){var e=g();try{return w(t)()}catch(r){if(m(e),r!==r+0)throw r;v(1,0)}},b:function ya(t,e){var r=g();try{return w(t)(e)}catch(n){if(m(r),n!==n+0)throw n;v(1,0)}},C:function Ma(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(o){if(m(a),o!==o+0)throw o;v(1,0)}},ha:function Ba(t,e,r){var n=g();try{return w(t)(e,r)}catch(a){if(m(n),a!==a+0)throw a;v(1,0)}},c:function ma(t,e,r){var n=g();try{return w(t)(e,r)}catch(a){if(m(n),a!==a+0)throw a;v(1,0)}},ga:function Ua(t,e,r,n,a){var o=g();try{return w(t)(e,r,n,a)}catch(u){if(m(o),u!==u+0)throw u;v(1,0)}},h:function ga(t,e,r,n){var a=g();try{return w(t)(e,r,n)}catch(o){if(m(a),o!==o+0)throw o;v(1,0)}},i:function Pa(t,e,r,n,a){var o=g();try{return w(t)(e,r,n,a)}catch(u){if(m(o),u!==u+0)throw u;v(1,0)}},r:function _a(t,e,r,n,a,o){var u=g();try{return w(t)(e,r,n,a,o)}catch(s){if(m(u),s!==s+0)throw s;v(1,0)}},L:function Ia(t,e,r,n,a,o,u){var s=g();try{return w(t)(e,r,n,a,o,u)}catch(l){if(m(s),l!==l+0)throw l;v(1,0)}},v:function Oa(t,e,r,n,a,o,u){var s=g();try{return w(t)(e,r,n,a,o,u)}catch(l){if(m(s),l!==l+0)throw l;v(1,0)}},G:function ka(t,e,r,n,a,o,u,s){var l=g();try{return w(t)(e,r,n,a,o,u,s)}catch(d){if(m(l),d!==d+0)throw d;v(1,0)}},I:function Da(t,e,r,n,a,o,u,s,l){var d=g();try{return w(t)(e,r,n,a,o,u,s,l)}catch(h){if(m(d),h!==h+0)throw h;v(1,0)}},z:function La(t,e,r,n,a,o,u,s,l,d){var h=g();try{return w(t)(e,r,n,a,o,u,s,l,d)}catch(y){if(m(h),y!==y+0)throw y;v(1,0)}},F:function Na(t,e,r,n,a,o,u,s,l,d,h,y){var $=g();try{return w(t)(e,r,n,a,o,u,s,l,d,h,y)}catch(C){if(m($),C!==C+0)throw C;v(1,0)}},X:function Ga(t,e,r,n){var a=g();try{return We(t,e,r,n)}catch(o){if(m(a),o!==o+0)throw o;v(1,0)}},V:function Xa(t,e,r,n,a){var o=g();try{return ke(t,e,r,n,a)}catch(u){if(m(o),u!==u+0)throw u;v(1,0)}},k:function ba(t){var e=g();try{w(t)()}catch(r){if(m(e),r!==r+0)throw r;v(1,0)}},f:function $a(t,e){var r=g();try{w(t)(e)}catch(n){if(m(r),n!==n+0)throw n;v(1,0)}},e:function va(t,e,r){var n=g();try{w(t)(e,r)}catch(a){if(m(n),a!==a+0)throw a;v(1,0)}},g:function pa(t,e,r,n){var a=g();try{w(t)(e,r,n)}catch(o){if(m(a),o!==o+0)throw o;v(1,0)}},K:function Ha(t,e,r,n,a,o,u){var s=g();try{w(t)(e,r,n,a,o,u)}catch(l){if(m(s),l!==l+0)throw l;v(1,0)}},m:function Ta(t,e,r,n,a){var o=g();try{w(t)(e,r,n,a)}catch(u){if(m(o),u!==u+0)throw u;v(1,0)}},ia:function ja(t,e,r,n,a,o,u,s){var l=g();try{w(t)(e,r,n,a,o,u,s)}catch(d){if(m(l),d!==d+0)throw d;v(1,0)}},o:function Ea(t,e,r,n,a,o){var u=g();try{w(t)(e,r,n,a,o)}catch(s){if(m(u),s!==s+0)throw s;v(1,0)}},u:function Aa(t,e,r,n,a,o,u,s){var l=g();try{w(t)(e,r,n,a,o,u,s)}catch(d){if(m(l),d!==d+0)throw d;v(1,0)}},ja:function Sa(t,e,r,n,a,o,u,s,l){var d=g();try{w(t)(e,r,n,a,o,u,s,l)}catch(h){if(m(d),h!==h+0)throw h;v(1,0)}},A:function Wa(t,e,r,n,a,o,u,s,l,d){var h=g();try{w(t)(e,r,n,a,o,u,s,l,d)}catch(y){if(m(h),y!==y+0)throw y;v(1,0)}},n:function Ca(t,e,r,n,a,o,u,s,l,d,h){var y=g();try{w(t)(e,r,n,a,o,u,s,l,d,h)}catch($){if(m(y),$!==$+0)throw $;v(1,0)}},E:function za(t,e,r,n,a,o,u,s,l,d,h,y,$,C,_,I){var S=g();try{w(t)(e,r,n,a,o,u,s,l,d,h,y,$,C,_,I)}catch(x){if(m(S),x!==x+0)throw x;v(1,0)}},y:t=>t};!async function Ar(){var t;function e(o,u){return E=o.exports,mt=E.xa,ue(),Ce=E.Ba,function mr(t){le.unshift(t)}(E.ya),function $r(t){var e;if(Y--,null===(e=c.monitorRunDependencies)||void 0===e||e.call(c,Y),0==Y&&ct){var r=ct;ct=null,r()}}(),E}!function wr(t){var e;Y++,null===(e=c.monitorRunDependencies)||void 0===e||e.call(c,Y)}();var n=function Or(){return{a:ha}}();if(c.instantiateWasm)try{return c.instantiateWasm(n,e)}catch(o){et(`Module.instantiateWasm callback failed with error: ${o}`),D(o)}null!==(t=wt)&&void 0!==t||(wt=Cr());try{var a=await Er(vt,wt,n);return function r(o){e(o.instance)}(a),a}catch(o){return void D(o)}}();var Ie=t=>(Ie=E.za)(t),X=c._free=t=>(X=c._free=E.Aa)(t),ee=c._malloc=t=>(ee=c._malloc=E.Ca)(t),Me=t=>(Me=E.Da)(t),v=(t,e)=>(v=E.Ea)(t,e),Fe=t=>(Fe=E.Fa)(t),je=t=>(je=E.Ga)(t),Re=()=>(Re=E.Ha)(),Le=t=>(Le=E.Ia)(t),Be=t=>(Be=E.Ja)(t),Ue=(t,e,r)=>(Ue=E.Ka)(t,e,r);c.dynCall_viijii=(t,e,r,n,a,o,u)=>(c.dynCall_viijii=E.La)(t,e,r,n,a,o,u);var We=c.dynCall_jiii=(t,e,r,n)=>(We=c.dynCall_jiii=E.Ma)(t,e,r,n);c.dynCall_jiji=(t,e,r,n,a)=>(c.dynCall_jiji=E.Na)(t,e,r,n,a);var It,ke=c.dynCall_jiiii=(t,e,r,n,a)=>(ke=c.dynCall_jiiii=E.Oa)(t,e,r,n,a);function He(){function t(){var e;It||(It=!0,c.calledRun=!0,!ie&&(function pr(){kt(le)}(),O(c),null===(e=c.onRuntimeInitialized)||void 0===e||e.call(c),function yr(){if(c.postRun)for("function"==typeof c.postRun&&(c.postRun=[c.postRun]);c.postRun.length;)t=c.postRun.shift(),fe.unshift(t);var t;kt(fe)}()))}Y>0||(function hr(){if(c.preRun)for("function"==typeof c.preRun&&(c.preRun=[c.preRun]);c.preRun.length;)t=c.preRun.shift(),ce.unshift(t);var t;kt(ce)}(),Y>0)||(c.setStatus?(c.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>c.setStatus("")),1),t()}),1)):t())}if(c.dynCall_iiiiij=(t,e,r,n,a,o,u)=>(c.dynCall_iiiiij=E.Pa)(t,e,r,n,a,o,u),c.dynCall_iiiiijj=(t,e,r,n,a,o,u,s,l)=>(c.dynCall_iiiiijj=E.Qa)(t,e,r,n,a,o,u,s,l),c.dynCall_iiiiiijj=(t,e,r,n,a,o,u,s,l,d)=>(c.dynCall_iiiiiijj=E.Ra)(t,e,r,n,a,o,u,s,l,d),ct=function t(){It||He(),It||(ct=t)},c.preInit)for("function"==typeof c.preInit&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return He(),R});function rr(i){return er(ae,i)}async function hi(i,f){return async function di(i,f,p=Lt){const T={...Lt,...p},c=await er(i,{fireImmediately:!0});let O,D;if("width"in f&&"height"in f&&"data"in f){const{data:A,data:{byteLength:M},width:k,height:Z}=f;D=c._malloc(M),c.HEAPU8.set(A,D),O=c.readBarcodesFromPixmap(D,k,Z,Ke(T))}else{let A,M;if("buffer"in f)[A,M]=[f.byteLength,f];else if("byteLength"in f)[A,M]=[f.byteLength,new Uint8Array(f)];else{if(!("size"in f))throw new TypeError("Invalid input type");[A,M]=[f.size,new Uint8Array(await f.arrayBuffer())]}D=c._malloc(A),c.HEAPU8.set(M,D),O=c.readBarcodesFromImage(D,A,Ke(T))}c._free(D);const R=[];for(let A=0;A<O.size();++A)R.push(ui(O.get(A)));return R}(ae,i,f)}const nr=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],pi=[...nr,["unknown"]].map((i=>i[0])),ne=new Map(nr);function yi(i){for(const[f,p]of ne)if(i===p)return f;return"unknown"}function ar(i){var f,p;try{return i instanceof(null==(p=null==(f=null==i?void 0:i.ownerDocument)?void 0:f.defaultView)?void 0:p.HTMLImageElement)}catch{return!1}}function ir(i){var f,p;try{return i instanceof(null==(p=null==(f=null==i?void 0:i.ownerDocument)?void 0:f.defaultView)?void 0:p.SVGImageElement)}catch{return!1}}function or(i){var f,p;try{return i instanceof(null==(p=null==(f=null==i?void 0:i.ownerDocument)?void 0:f.defaultView)?void 0:p.HTMLVideoElement)}catch{return!1}}function sr(i){var f,p;try{return i instanceof(null==(p=null==(f=null==i?void 0:i.ownerDocument)?void 0:f.defaultView)?void 0:p.HTMLCanvasElement)}catch{return!1}}function ur(i){try{return i instanceof ImageBitmap||"[object ImageBitmap]"===Object.prototype.toString.call(i)}catch{return!1}}function cr(i){try{return i instanceof OffscreenCanvas||"[object OffscreenCanvas]"===Object.prototype.toString.call(i)}catch{return!1}}function lr(i){try{return i instanceof VideoFrame||"[object VideoFrame]"===Object.prototype.toString.call(i)}catch{return!1}}async function fr(i){if(ar(i)&&!await async function Ti(i){try{return await i.decode(),!0}catch{return!1}}(i))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(ir(i)&&!await async function Pi(i){var f;try{return await(null==(f=i.decode)?void 0:f.call(i)),!0}catch{return!1}}(i))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(lr(i)&&function _i(i){return null===i.format}(i))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(or(i)&&(0===i.readyState||1===i.readyState))throw new DOMException("Invalid element or state.","InvalidStateError");if(ur(i)&&function Oi(i){return 0===i.width&&0===i.height}(i))throw new DOMException("The image source is detached.","InvalidStateError");const{width:f,height:p}=function vi(i){if(ar(i))return{width:i.naturalWidth,height:i.naturalHeight};if(ir(i))return{width:i.width.baseVal.value,height:i.height.baseVal.value};if(or(i))return{width:i.videoWidth,height:i.videoHeight};if(ur(i))return{width:i.width,height:i.height};if(lr(i))return{width:i.displayWidth,height:i.displayHeight};if(sr(i))return{width:i.width,height:i.height};if(cr(i))return{width:i.width,height:i.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}(i);if(0===f||0===p)return null;const c=function wi(i,f){try{const p=new OffscreenCanvas(i,f);if(p.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return p;throw void 0}catch{const p=document.createElement("canvas");return p.width=i,p.height=f,p}}(f,p).getContext("2d");c.drawImage(i,0,0);try{return c.getImageData(0,0,f,p)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function Ci(i){if(function mi(i){try{return i instanceof Blob||"[object Blob]"===Object.prototype.toString.call(i)}catch{return!1}}(i))return await async function $i(i){let f;try{f=await createImageBitmap(i)}catch{try{if(!globalThis.Image)return i;{f=new Image;let c="";try{c=URL.createObjectURL(i),f.src=c,await f.decode()}finally{URL.revokeObjectURL(c)}}}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await fr(f)}(i);if(function gi(i){try{return i instanceof ImageData||"[object ImageData]"===Object.prototype.toString.call(i)}catch{return!1}}(i)){if(function Ei(i){return 0===i.data.buffer.byteLength}(i))throw new DOMException("The image data has been detached.","InvalidStateError");return i}return sr(i)||cr(i)?function bi(i){const{width:f,height:p}=i;if(0===f||0===p)return null;const T=i.getContext("2d");try{return T.getImageData(0,0,f,p)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}(i):await fr(i)}function tr(i,f){return function Ai(i){return i instanceof DOMException||"[object DOMException]"===Object.prototype.toString.call(i)}(i)?new DOMException(`${f}: ${i.message}`,i.name):function Si(i){return i instanceof Error||"[object Error]"===Object.prototype.toString.call(i)}(i)?new i.constructor(`${f}: ${i.message}`):new Error(`${f}: ${i}`)}var pt;class Ri{constructor(f={}){var p;((i,f,p)=>{f.has(i)?Xe("Cannot add the same private member more than once"):f instanceof WeakSet?f.add(i):f.set(i,p)})(this,pt);try{const T=null==(p=null==f?void 0:f.formats)?void 0:p.filter((c=>"unknown"!==c));if(0===(null==T?void 0:T.length))throw new TypeError("Hint option provided, but is empty.");for(const c of null!=T?T:[])if(!ne.has(c))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${c}' is not a valid enum value of type BarcodeFormat.`);((i,f,p,T)=>{qe(i,f,"write to private field"),T?T.call(i,p):f.set(i,p)})(this,pt,null!=T?T:[]),rr({fireImmediately:!0}).catch((()=>{}))}catch(T){throw tr(T,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return pi.filter((f=>"unknown"!==f))}async detect(f){try{const p=await Ci(f);if(null===p)return[];let T;const c={tryCode39ExtendedMode:!1,textMode:"Plain",formats:Ze(this,pt).map((O=>ne.get(O)))};try{T=await hi(p,c)}catch(O){throw console.error(O),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return T.map((O=>{const{topLeft:{x:D,y:R},topRight:{x:A,y:M},bottomLeft:{x:k,y:Z},bottomRight:{x:tt,y:L}}=O.position,yt=Math.min(D,A,k,tt),it=Math.min(R,M,Z,L),ot=Math.max(D,A,k,tt),st=Math.max(R,M,Z,L);return{boundingBox:new DOMRectReadOnly(yt,it,ot-yt,st-it),rawValue:O.text,format:yi(O.format),cornerPoints:[{x:D,y:R},{x:A,y:M},{x:tt,y:L},{x:k,y:Z}]}}))}catch(p){throw tr(p,"Failed to execute 'detect' on 'BarcodeDetector'")}}}pt=new WeakMap,null!=globalThis.BarcodeDetector||(globalThis.BarcodeDetector=Ri)},"./node_modules/sdp/sdp.js":module=>{const SDPUtils={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};SDPUtils.localCName=SDPUtils.generateIdentifier(),SDPUtils.splitLines=function(blob){return blob.trim().split("\n").map((line=>line.trim()))},SDPUtils.splitSections=function(blob){return blob.split("\nm=").map(((part,index)=>(index>0?"m="+part:part).trim()+"\r\n"))},SDPUtils.getDescription=function(blob){const sections=SDPUtils.splitSections(blob);return sections&&sections[0]},SDPUtils.getMediaSections=function(blob){const sections=SDPUtils.splitSections(blob);return sections.shift(),sections},SDPUtils.matchPrefix=function(blob,prefix){return SDPUtils.splitLines(blob).filter((line=>0===line.indexOf(prefix)))},SDPUtils.parseCandidate=function(line){let parts;parts=0===line.indexOf("a=candidate:")?line.substring(12).split(" "):line.substring(10).split(" ");const candidate={foundation:parts[0],component:{1:"rtp",2:"rtcp"}[parts[1]]||parts[1],protocol:parts[2].toLowerCase(),priority:parseInt(parts[3],10),ip:parts[4],address:parts[4],port:parseInt(parts[5],10),type:parts[7]};for(let i=8;i<parts.length;i+=2)switch(parts[i]){case"raddr":candidate.relatedAddress=parts[i+1];break;case"rport":candidate.relatedPort=parseInt(parts[i+1],10);break;case"tcptype":candidate.tcpType=parts[i+1];break;case"ufrag":candidate.ufrag=parts[i+1],candidate.usernameFragment=parts[i+1];break;default:void 0===candidate[parts[i]]&&(candidate[parts[i]]=parts[i+1])}return candidate},SDPUtils.writeCandidate=function(candidate){const sdp=[];sdp.push(candidate.foundation);const component=candidate.component;"rtp"===component?sdp.push(1):"rtcp"===component?sdp.push(2):sdp.push(component),sdp.push(candidate.protocol.toUpperCase()),sdp.push(candidate.priority),sdp.push(candidate.address||candidate.ip),sdp.push(candidate.port);const type=candidate.type;return sdp.push("typ"),sdp.push(type),"host"!==type&&candidate.relatedAddress&&candidate.relatedPort&&(sdp.push("raddr"),sdp.push(candidate.relatedAddress),sdp.push("rport"),sdp.push(candidate.relatedPort)),candidate.tcpType&&"tcp"===candidate.protocol.toLowerCase()&&(sdp.push("tcptype"),sdp.push(candidate.tcpType)),(candidate.usernameFragment||candidate.ufrag)&&(sdp.push("ufrag"),sdp.push(candidate.usernameFragment||candidate.ufrag)),"candidate:"+sdp.join(" ")},SDPUtils.parseIceOptions=function(line){return line.substring(14).split(" ")},SDPUtils.parseRtpMap=function(line){let parts=line.substring(9).split(" ");const parsed={payloadType:parseInt(parts.shift(),10)};return parts=parts[0].split("/"),parsed.name=parts[0],parsed.clockRate=parseInt(parts[1],10),parsed.channels=3===parts.length?parseInt(parts[2],10):1,parsed.numChannels=parsed.channels,parsed},SDPUtils.writeRtpMap=function(codec){let pt=codec.payloadType;void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType);const channels=codec.channels||codec.numChannels||1;return"a=rtpmap:"+pt+" "+codec.name+"/"+codec.clockRate+(1!==channels?"/"+channels:"")+"\r\n"},SDPUtils.parseExtmap=function(line){const parts=line.substring(9).split(" ");return{id:parseInt(parts[0],10),direction:parts[0].indexOf("/")>0?parts[0].split("/")[1]:"sendrecv",uri:parts[1],attributes:parts.slice(2).join(" ")}},SDPUtils.writeExtmap=function(headerExtension){return"a=extmap:"+(headerExtension.id||headerExtension.preferredId)+(headerExtension.direction&&"sendrecv"!==headerExtension.direction?"/"+headerExtension.direction:"")+" "+headerExtension.uri+(headerExtension.attributes?" "+headerExtension.attributes:"")+"\r\n"},SDPUtils.parseFmtp=function(line){const parsed={};let kv;const parts=line.substring(line.indexOf(" ")+1).split(";");for(let j=0;j<parts.length;j++)kv=parts[j].trim().split("="),parsed[kv[0].trim()]=kv[1];return parsed},SDPUtils.writeFmtp=function(codec){let line="",pt=codec.payloadType;if(void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.parameters&&Object.keys(codec.parameters).length){const params=[];Object.keys(codec.parameters).forEach((param=>{void 0!==codec.parameters[param]?params.push(param+"="+codec.parameters[param]):params.push(param)})),line+="a=fmtp:"+pt+" "+params.join(";")+"\r\n"}return line},SDPUtils.parseRtcpFb=function(line){const parts=line.substring(line.indexOf(" ")+1).split(" ");return{type:parts.shift(),parameter:parts.join(" ")}},SDPUtils.writeRtcpFb=function(codec){let lines="",pt=codec.payloadType;return void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.rtcpFeedback&&codec.rtcpFeedback.length&&codec.rtcpFeedback.forEach((fb=>{lines+="a=rtcp-fb:"+pt+" "+fb.type+(fb.parameter&&fb.parameter.length?" "+fb.parameter:"")+"\r\n"})),lines},SDPUtils.parseSsrcMedia=function(line){const sp=line.indexOf(" "),parts={ssrc:parseInt(line.substring(7,sp),10)},colon=line.indexOf(":",sp);return colon>-1?(parts.attribute=line.substring(sp+1,colon),parts.value=line.substring(colon+1)):parts.attribute=line.substring(sp+1),parts},SDPUtils.parseSsrcGroup=function(line){const parts=line.substring(13).split(" ");return{semantics:parts.shift(),ssrcs:parts.map((ssrc=>parseInt(ssrc,10)))}},SDPUtils.getMid=function(mediaSection){const mid=SDPUtils.matchPrefix(mediaSection,"a=mid:")[0];if(mid)return mid.substring(6)},SDPUtils.parseFingerprint=function(line){const parts=line.substring(14).split(" ");return{algorithm:parts[0].toLowerCase(),value:parts[1].toUpperCase()}},SDPUtils.getDtlsParameters=function(mediaSection,sessionpart){return{role:"auto",fingerprints:SDPUtils.matchPrefix(mediaSection+sessionpart,"a=fingerprint:").map(SDPUtils.parseFingerprint)}},SDPUtils.writeDtlsParameters=function(params,setupType){let sdp="a=setup:"+setupType+"\r\n";return params.fingerprints.forEach((fp=>{sdp+="a=fingerprint:"+fp.algorithm+" "+fp.value+"\r\n"})),sdp},SDPUtils.parseCryptoLine=function(line){const parts=line.substring(9).split(" ");return{tag:parseInt(parts[0],10),cryptoSuite:parts[1],keyParams:parts[2],sessionParams:parts.slice(3)}},SDPUtils.writeCryptoLine=function(parameters){return"a=crypto:"+parameters.tag+" "+parameters.cryptoSuite+" "+("object"==typeof parameters.keyParams?SDPUtils.writeCryptoKeyParams(parameters.keyParams):parameters.keyParams)+(parameters.sessionParams?" "+parameters.sessionParams.join(" "):"")+"\r\n"},SDPUtils.parseCryptoKeyParams=function(keyParams){if(0!==keyParams.indexOf("inline:"))return null;const parts=keyParams.substring(7).split("|");return{keyMethod:"inline",keySalt:parts[0],lifeTime:parts[1],mkiValue:parts[2]?parts[2].split(":")[0]:void 0,mkiLength:parts[2]?parts[2].split(":")[1]:void 0}},SDPUtils.writeCryptoKeyParams=function(keyParams){return keyParams.keyMethod+":"+keyParams.keySalt+(keyParams.lifeTime?"|"+keyParams.lifeTime:"")+(keyParams.mkiValue&&keyParams.mkiLength?"|"+keyParams.mkiValue+":"+keyParams.mkiLength:"")},SDPUtils.getCryptoParameters=function(mediaSection,sessionpart){return SDPUtils.matchPrefix(mediaSection+sessionpart,"a=crypto:").map(SDPUtils.parseCryptoLine)},SDPUtils.getIceParameters=function(mediaSection,sessionpart){const ufrag=SDPUtils.matchPrefix(mediaSection+sessionpart,"a=ice-ufrag:")[0],pwd=SDPUtils.matchPrefix(mediaSection+sessionpart,"a=ice-pwd:")[0];return ufrag&&pwd?{usernameFragment:ufrag.substring(12),password:pwd.substring(10)}:null},SDPUtils.writeIceParameters=function(params){let sdp="a=ice-ufrag:"+params.usernameFragment+"\r\na=ice-pwd:"+params.password+"\r\n";return params.iceLite&&(sdp+="a=ice-lite\r\n"),sdp},SDPUtils.parseRtpParameters=function(mediaSection){const description={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},mline=SDPUtils.splitLines(mediaSection)[0].split(" ");description.profile=mline[2];for(let i=3;i<mline.length;i++){const pt=mline[i],rtpmapline=SDPUtils.matchPrefix(mediaSection,"a=rtpmap:"+pt+" ")[0];if(rtpmapline){const codec=SDPUtils.parseRtpMap(rtpmapline),fmtps=SDPUtils.matchPrefix(mediaSection,"a=fmtp:"+pt+" ");switch(codec.parameters=fmtps.length?SDPUtils.parseFmtp(fmtps[0]):{},codec.rtcpFeedback=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:"+pt+" ").map(SDPUtils.parseRtcpFb),description.codecs.push(codec),codec.name.toUpperCase()){case"RED":case"ULPFEC":description.fecMechanisms.push(codec.name.toUpperCase())}}}SDPUtils.matchPrefix(mediaSection,"a=extmap:").forEach((line=>{description.headerExtensions.push(SDPUtils.parseExtmap(line))}));const wildcardRtcpFb=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:* ").map(SDPUtils.parseRtcpFb);return description.codecs.forEach((codec=>{wildcardRtcpFb.forEach((fb=>{codec.rtcpFeedback.find((existingFeedback=>existingFeedback.type===fb.type&&existingFeedback.parameter===fb.parameter))||codec.rtcpFeedback.push(fb)}))})),description},SDPUtils.writeRtpDescription=function(kind,caps){let sdp="";sdp+="m="+kind+" ",sdp+=caps.codecs.length>0?"9":"0",sdp+=" "+(caps.profile||"UDP/TLS/RTP/SAVPF")+" ",sdp+=caps.codecs.map((codec=>void 0!==codec.preferredPayloadType?codec.preferredPayloadType:codec.payloadType)).join(" ")+"\r\n",sdp+="c=IN IP4 0.0.0.0\r\n",sdp+="a=rtcp:9 IN IP4 0.0.0.0\r\n",caps.codecs.forEach((codec=>{sdp+=SDPUtils.writeRtpMap(codec),sdp+=SDPUtils.writeFmtp(codec),sdp+=SDPUtils.writeRtcpFb(codec)}));let maxptime=0;return caps.codecs.forEach((codec=>{codec.maxptime>maxptime&&(maxptime=codec.maxptime)})),maxptime>0&&(sdp+="a=maxptime:"+maxptime+"\r\n"),caps.headerExtensions&&caps.headerExtensions.forEach((extension=>{sdp+=SDPUtils.writeExtmap(extension)})),sdp},SDPUtils.parseRtpEncodingParameters=function(mediaSection){const encodingParameters=[],description=SDPUtils.parseRtpParameters(mediaSection),hasRed=-1!==description.fecMechanisms.indexOf("RED"),hasUlpfec=-1!==description.fecMechanisms.indexOf("ULPFEC"),ssrcs=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map((line=>SDPUtils.parseSsrcMedia(line))).filter((parts=>"cname"===parts.attribute)),primarySsrc=ssrcs.length>0&&ssrcs[0].ssrc;let secondarySsrc;const flows=SDPUtils.matchPrefix(mediaSection,"a=ssrc-group:FID").map((line=>line.substring(17).split(" ").map((part=>parseInt(part,10)))));flows.length>0&&flows[0].length>1&&flows[0][0]===primarySsrc&&(secondarySsrc=flows[0][1]),description.codecs.forEach((codec=>{if("RTX"===codec.name.toUpperCase()&&codec.parameters.apt){let encParam={ssrc:primarySsrc,codecPayloadType:parseInt(codec.parameters.apt,10)};primarySsrc&&secondarySsrc&&(encParam.rtx={ssrc:secondarySsrc}),encodingParameters.push(encParam),hasRed&&(encParam=JSON.parse(JSON.stringify(encParam)),encParam.fec={ssrc:primarySsrc,mechanism:hasUlpfec?"red+ulpfec":"red"},encodingParameters.push(encParam))}})),0===encodingParameters.length&&primarySsrc&&encodingParameters.push({ssrc:primarySsrc});let bandwidth=SDPUtils.matchPrefix(mediaSection,"b=");return bandwidth.length&&(bandwidth=0===bandwidth[0].indexOf("b=TIAS:")?parseInt(bandwidth[0].substring(7),10):0===bandwidth[0].indexOf("b=AS:")?1e3*parseInt(bandwidth[0].substring(5),10)*.95-16e3:void 0,encodingParameters.forEach((params=>{params.maxBitrate=bandwidth}))),encodingParameters},SDPUtils.parseRtcpParameters=function(mediaSection){const rtcpParameters={},remoteSsrc=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map((line=>SDPUtils.parseSsrcMedia(line))).filter((obj=>"cname"===obj.attribute))[0];remoteSsrc&&(rtcpParameters.cname=remoteSsrc.value,rtcpParameters.ssrc=remoteSsrc.ssrc);const rsize=SDPUtils.matchPrefix(mediaSection,"a=rtcp-rsize");rtcpParameters.reducedSize=rsize.length>0,rtcpParameters.compound=0===rsize.length;const mux=SDPUtils.matchPrefix(mediaSection,"a=rtcp-mux");return rtcpParameters.mux=mux.length>0,rtcpParameters},SDPUtils.writeRtcpParameters=function(rtcpParameters){let sdp="";return rtcpParameters.reducedSize&&(sdp+="a=rtcp-rsize\r\n"),rtcpParameters.mux&&(sdp+="a=rtcp-mux\r\n"),void 0!==rtcpParameters.ssrc&&rtcpParameters.cname&&(sdp+="a=ssrc:"+rtcpParameters.ssrc+" cname:"+rtcpParameters.cname+"\r\n"),sdp},SDPUtils.parseMsid=function(mediaSection){let parts;const spec=SDPUtils.matchPrefix(mediaSection,"a=msid:");if(1===spec.length)return parts=spec[0].substring(7).split(" "),{stream:parts[0],track:parts[1]};const planB=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map((line=>SDPUtils.parseSsrcMedia(line))).filter((msidParts=>"msid"===msidParts.attribute));return planB.length>0?(parts=planB[0].value.split(" "),{stream:parts[0],track:parts[1]}):void 0},SDPUtils.parseSctpDescription=function(mediaSection){const mline=SDPUtils.parseMLine(mediaSection),maxSizeLine=SDPUtils.matchPrefix(mediaSection,"a=max-message-size:");let maxMessageSize;maxSizeLine.length>0&&(maxMessageSize=parseInt(maxSizeLine[0].substring(19),10)),isNaN(maxMessageSize)&&(maxMessageSize=65536);const sctpPort=SDPUtils.matchPrefix(mediaSection,"a=sctp-port:");if(sctpPort.length>0)return{port:parseInt(sctpPort[0].substring(12),10),protocol:mline.fmt,maxMessageSize};const sctpMapLines=SDPUtils.matchPrefix(mediaSection,"a=sctpmap:");if(sctpMapLines.length>0){const parts=sctpMapLines[0].substring(10).split(" ");return{port:parseInt(parts[0],10),protocol:parts[1],maxMessageSize}}},SDPUtils.writeSctpDescription=function(media,sctp){let output=[];return output="DTLS/SCTP"!==media.protocol?["m="+media.kind+" 9 "+media.protocol+" "+sctp.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+sctp.port+"\r\n"]:["m="+media.kind+" 9 "+media.protocol+" "+sctp.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+sctp.port+" "+sctp.protocol+" 65535\r\n"],void 0!==sctp.maxMessageSize&&output.push("a=max-message-size:"+sctp.maxMessageSize+"\r\n"),output.join("")},SDPUtils.generateSessionId=function(){return Math.random().toString().substr(2,22)},SDPUtils.writeSessionBoilerplate=function(sessId,sessVer,sessUser){let sessionId;const version=void 0!==sessVer?sessVer:2;sessionId=sessId||SDPUtils.generateSessionId();return"v=0\r\no="+(sessUser||"thisisadapterortc")+" "+sessionId+" "+version+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},SDPUtils.getDirection=function(mediaSection,sessionpart){const lines=SDPUtils.splitLines(mediaSection);for(let i=0;i<lines.length;i++)switch(lines[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return lines[i].substring(2)}return sessionpart?SDPUtils.getDirection(sessionpart):"sendrecv"},SDPUtils.getKind=function(mediaSection){return SDPUtils.splitLines(mediaSection)[0].split(" ")[0].substring(2)},SDPUtils.isRejected=function(mediaSection){return"0"===mediaSection.split(" ",2)[1]},SDPUtils.parseMLine=function(mediaSection){const parts=SDPUtils.splitLines(mediaSection)[0].substring(2).split(" ");return{kind:parts[0],port:parseInt(parts[1],10),protocol:parts[2],fmt:parts.slice(3).join(" ")}},SDPUtils.parseOLine=function(mediaSection){const parts=SDPUtils.matchPrefix(mediaSection,"o=")[0].substring(2).split(" ");return{username:parts[0],sessionId:parts[1],sessionVersion:parseInt(parts[2],10),netType:parts[3],addressType:parts[4],address:parts[5]}},SDPUtils.isValidSDP=function(blob){if("string"!=typeof blob||0===blob.length)return!1;const lines=SDPUtils.splitLines(blob);for(let i=0;i<lines.length;i++)if(lines[i].length<2||"="!==lines[i].charAt(1))return!1;return!0},module.exports=SDPUtils},"./node_modules/webrtc-adapter/src/js/adapter_core.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{var chrome_shim_namespaceObject={};__webpack_require__.r(chrome_shim_namespaceObject),__webpack_require__.d(chrome_shim_namespaceObject,{fixNegotiationNeeded:()=>fixNegotiationNeeded,shimAddTrackRemoveTrack:()=>shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative:()=>shimAddTrackRemoveTrackWithNative,shimGetSendersWithDtmf:()=>shimGetSendersWithDtmf,shimGetUserMedia:()=>shimGetUserMedia,shimMediaStream:()=>shimMediaStream,shimOnTrack:()=>shimOnTrack,shimPeerConnection:()=>shimPeerConnection,shimSenderReceiverGetStats:()=>shimSenderReceiverGetStats});var firefox_shim_namespaceObject={};__webpack_require__.r(firefox_shim_namespaceObject),__webpack_require__.d(firefox_shim_namespaceObject,{shimAddTransceiver:()=>shimAddTransceiver,shimCreateAnswer:()=>shimCreateAnswer,shimCreateOffer:()=>shimCreateOffer,shimGetDisplayMedia:()=>shimGetDisplayMedia,shimGetParameters:()=>shimGetParameters,shimGetUserMedia:()=>getusermedia_shimGetUserMedia,shimOnTrack:()=>firefox_shim_shimOnTrack,shimPeerConnection:()=>firefox_shim_shimPeerConnection,shimRTCDataChannel:()=>shimRTCDataChannel,shimReceiverGetStats:()=>shimReceiverGetStats,shimRemoveStream:()=>shimRemoveStream,shimSenderGetStats:()=>shimSenderGetStats});var safari_shim_namespaceObject={};__webpack_require__.r(safari_shim_namespaceObject),__webpack_require__.d(safari_shim_namespaceObject,{shimAudioContext:()=>shimAudioContext,shimCallbacksAPI:()=>shimCallbacksAPI,shimConstraints:()=>shimConstraints,shimCreateOfferLegacy:()=>shimCreateOfferLegacy,shimGetUserMedia:()=>safari_shim_shimGetUserMedia,shimLocalStreamsAPI:()=>shimLocalStreamsAPI,shimRTCIceServerUrls:()=>shimRTCIceServerUrls,shimRemoteStreamsAPI:()=>shimRemoteStreamsAPI,shimTrackEventTransceiver:()=>shimTrackEventTransceiver});var common_shim_namespaceObject={};__webpack_require__.r(common_shim_namespaceObject),__webpack_require__.d(common_shim_namespaceObject,{removeExtmapAllowMixed:()=>removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty:()=>shimAddIceCandidateNullOrEmpty,shimConnectionState:()=>shimConnectionState,shimMaxMessageSize:()=>shimMaxMessageSize,shimParameterlessSetLocalDescription:()=>shimParameterlessSetLocalDescription,shimRTCIceCandidate:()=>shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol:()=>shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError:()=>shimSendThrowTypeError});let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(uastring,expr,pos){const match=uastring.match(expr);return match&&match.length>=pos&&parseInt(match[pos],10)}function wrapPeerConnectionEvent(window,eventNameToWrap,wrapper){if(!window.RTCPeerConnection)return;const proto=window.RTCPeerConnection.prototype,nativeAddEventListener=proto.addEventListener;proto.addEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap)return nativeAddEventListener.apply(this,arguments);const wrappedCallback=e=>{const modifiedEvent=wrapper(e);modifiedEvent&&(cb.handleEvent?cb.handleEvent(modifiedEvent):cb(modifiedEvent))};return this._eventMap=this._eventMap||{},this._eventMap[eventNameToWrap]||(this._eventMap[eventNameToWrap]=new Map),this._eventMap[eventNameToWrap].set(cb,wrappedCallback),nativeAddEventListener.apply(this,[nativeEventName,wrappedCallback])};const nativeRemoveEventListener=proto.removeEventListener;proto.removeEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap||!this._eventMap||!this._eventMap[eventNameToWrap])return nativeRemoveEventListener.apply(this,arguments);if(!this._eventMap[eventNameToWrap].has(cb))return nativeRemoveEventListener.apply(this,arguments);const unwrappedCb=this._eventMap[eventNameToWrap].get(cb);return this._eventMap[eventNameToWrap].delete(cb),0===this._eventMap[eventNameToWrap].size&&delete this._eventMap[eventNameToWrap],0===Object.keys(this._eventMap).length&&delete this._eventMap,nativeRemoveEventListener.apply(this,[nativeEventName,unwrappedCb])},Object.defineProperty(proto,"on"+eventNameToWrap,{get(){return this["_on"+eventNameToWrap]},set(cb){this["_on"+eventNameToWrap]&&(this.removeEventListener(eventNameToWrap,this["_on"+eventNameToWrap]),delete this["_on"+eventNameToWrap]),cb&&this.addEventListener(eventNameToWrap,this["_on"+eventNameToWrap]=cb)},enumerable:!0,configurable:!0})}function disableLog(bool){return"boolean"!=typeof bool?new Error("Argument type: "+typeof bool+". Please use a boolean."):(logDisabled_=bool,bool?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(bool){return"boolean"!=typeof bool?new Error("Argument type: "+typeof bool+". Please use a boolean."):(deprecationWarnings_=!bool,"adapter.js deprecation warnings "+(bool?"disabled":"enabled"))}function log(){if("object"==typeof window){if(logDisabled_)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function deprecated(oldMethod,newMethod){deprecationWarnings_&&console.warn(oldMethod+" is deprecated, please use "+newMethod+" instead.")}function isObject(val){return"[object Object]"===Object.prototype.toString.call(val)}function compactObject(data){return isObject(data)?Object.keys(data).reduce((function(accumulator,key){const isObj=isObject(data[key]),value=isObj?compactObject(data[key]):data[key],isEmptyObject=isObj&&!Object.keys(value).length;return void 0===value||isEmptyObject?accumulator:Object.assign(accumulator,{[key]:value})}),{}):data}function walkStats(stats,base,resultSet){base&&!resultSet.has(base.id)&&(resultSet.set(base.id,base),Object.keys(base).forEach((name=>{name.endsWith("Id")?walkStats(stats,stats.get(base[name]),resultSet):name.endsWith("Ids")&&base[name].forEach((id=>{walkStats(stats,stats.get(id),resultSet)}))})))}function filterStats(result,track,outbound){const streamStatsType=outbound?"outbound-rtp":"inbound-rtp",filteredResult=new Map;if(null===track)return filteredResult;const trackStats=[];return result.forEach((value=>{"track"===value.type&&value.trackIdentifier===track.id&&trackStats.push(value)})),trackStats.forEach((trackStat=>{result.forEach((stats=>{stats.type===streamStatsType&&stats.trackId===trackStat.id&&walkStats(result,stats,filteredResult)}))})),filteredResult}const logging=log;function shimGetUserMedia(window,browserDetails){const navigator=window&&window.navigator;if(!navigator.mediaDevices)return;const constraintsToChrome_=function(c){if("object"!=typeof c||c.mandatory||c.optional)return c;const cc={};return Object.keys(c).forEach((key=>{if("require"===key||"advanced"===key||"mediaSource"===key)return;const r="object"==typeof c[key]?c[key]:{ideal:c[key]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const oldname_=function(prefix,name){return prefix?prefix+name.charAt(0).toUpperCase()+name.slice(1):"deviceId"===name?"sourceId":name};if(void 0!==r.ideal){cc.optional=cc.optional||[];let oc={};"number"==typeof r.ideal?(oc[oldname_("min",key)]=r.ideal,cc.optional.push(oc),oc={},oc[oldname_("max",key)]=r.ideal,cc.optional.push(oc)):(oc[oldname_("",key)]=r.ideal,cc.optional.push(oc))}void 0!==r.exact&&"number"!=typeof r.exact?(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_("",key)]=r.exact):["min","max"].forEach((mix=>{void 0!==r[mix]&&(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_(mix,key)]=r[mix])}))})),c.advanced&&(cc.optional=(cc.optional||[]).concat(c.advanced)),cc},shimConstraints_=function(constraints,func){if(browserDetails.version>=61)return func(constraints);if((constraints=JSON.parse(JSON.stringify(constraints)))&&"object"==typeof constraints.audio){const remap=function(obj,a,b){a in obj&&!(b in obj)&&(obj[b]=obj[a],delete obj[a])};remap((constraints=JSON.parse(JSON.stringify(constraints))).audio,"autoGainControl","googAutoGainControl"),remap(constraints.audio,"noiseSuppression","googNoiseSuppression"),constraints.audio=constraintsToChrome_(constraints.audio)}if(constraints&&"object"==typeof constraints.video){let face=constraints.video.facingMode;face=face&&("object"==typeof face?face:{ideal:face});const getSupportedFacingModeLies=browserDetails.version<66;if(face&&("user"===face.exact||"environment"===face.exact||"user"===face.ideal||"environment"===face.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode||getSupportedFacingModeLies)){let matches;if(delete constraints.video.facingMode,"environment"===face.exact||"environment"===face.ideal?matches=["back","rear"]:"user"!==face.exact&&"user"!==face.ideal||(matches=["front"]),matches)return navigator.mediaDevices.enumerateDevices().then((devices=>{let dev=(devices=devices.filter((d=>"videoinput"===d.kind))).find((d=>matches.some((match=>d.label.toLowerCase().includes(match)))));return!dev&&devices.length&&matches.includes("back")&&(dev=devices[devices.length-1]),dev&&(constraints.video.deviceId=face.exact?{exact:dev.deviceId}:{ideal:dev.deviceId}),constraints.video=constraintsToChrome_(constraints.video),logging("chrome: "+JSON.stringify(constraints)),func(constraints)}))}constraints.video=constraintsToChrome_(constraints.video)}return logging("chrome: "+JSON.stringify(constraints)),func(constraints)},shimError_=function(e){return browserDetails.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(navigator.getUserMedia=function(constraints,onSuccess,onError){shimConstraints_(constraints,(c=>{navigator.webkitGetUserMedia(c,onSuccess,(e=>{onError&&onError(shimError_(e))}))}))}.bind(navigator),navigator.mediaDevices.getUserMedia){const origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(cs){return shimConstraints_(cs,(c=>origGetUserMedia(c).then((stream=>{if(c.audio&&!stream.getAudioTracks().length||c.video&&!stream.getVideoTracks().length)throw stream.getTracks().forEach((track=>{track.stop()})),new DOMException("","NotFoundError");return stream}),(e=>Promise.reject(shimError_(e))))))}}}function shimMediaStream(window){window.MediaStream=window.MediaStream||window.webkitMediaStream}function shimOnTrack(window){if("object"==typeof window&&window.RTCPeerConnection&&!("ontrack"in window.RTCPeerConnection.prototype)){Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(f){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=f)},enumerable:!0,configurable:!0});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){return this._ontrackpoly||(this._ontrackpoly=e=>{e.stream.addEventListener("addtrack",(te=>{let receiver;receiver=window.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((r=>r.track&&r.track.id===te.track.id)):{track:te.track};const event=new Event("track");event.track=te.track,event.receiver=receiver,event.transceiver={receiver},event.streams=[e.stream],this.dispatchEvent(event)})),e.stream.getTracks().forEach((track=>{let receiver;receiver=window.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((r=>r.track&&r.track.id===track.id)):{track};const event=new Event("track");event.track=track,event.receiver=receiver,event.transceiver={receiver},event.streams=[e.stream],this.dispatchEvent(event)}))},this.addEventListener("addstream",this._ontrackpoly)),origSetRemoteDescription.apply(this,arguments)}}else wrapPeerConnectionEvent(window,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function shimGetSendersWithDtmf(window){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in window.RTCPeerConnection.prototype)&&"createDTMFSender"in window.RTCPeerConnection.prototype){const shimSenderWithDtmf=function(pc,track){return{track,get dtmf(){return void 0===this._dtmf&&("audio"===track.kind?this._dtmf=pc.createDTMFSender(track):this._dtmf=null),this._dtmf},_pc:pc}};if(!window.RTCPeerConnection.prototype.getSenders){window.RTCPeerConnection.prototype.getSenders=function getSenders(){return this._senders=this._senders||[],this._senders.slice()};const origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){let sender=origAddTrack.apply(this,arguments);return sender||(sender=shimSenderWithDtmf(this,track),this._senders.push(sender)),sender};const origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){origRemoveTrack.apply(this,arguments);const idx=this._senders.indexOf(sender);-1!==idx&&this._senders.splice(idx,1)}}const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._senders=this._senders||[],origAddStream.apply(this,[stream]),stream.getTracks().forEach((track=>{this._senders.push(shimSenderWithDtmf(this,track))}))};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._senders=this._senders||[],origRemoveStream.apply(this,[stream]),stream.getTracks().forEach((track=>{const sender=this._senders.find((s=>s.track===track));sender&&this._senders.splice(this._senders.indexOf(sender),1)}))}}else if("object"==typeof window&&window.RTCPeerConnection&&"getSenders"in window.RTCPeerConnection.prototype&&"createDTMFSender"in window.RTCPeerConnection.prototype&&window.RTCRtpSender&&!("dtmf"in window.RTCRtpSender.prototype)){const origGetSenders=window.RTCPeerConnection.prototype.getSenders;window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach((sender=>sender._pc=this)),senders},Object.defineProperty(window.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimSenderReceiverGetStats(window){if(!("object"==typeof window&&window.RTCPeerConnection&&window.RTCRtpSender&&window.RTCRtpReceiver))return;if(!("getStats"in window.RTCRtpSender.prototype)){const origGetSenders=window.RTCPeerConnection.prototype.getSenders;origGetSenders&&(window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach((sender=>sender._pc=this)),senders});const origAddTrack=window.RTCPeerConnection.prototype.addTrack;origAddTrack&&(window.RTCPeerConnection.prototype.addTrack=function addTrack(){const sender=origAddTrack.apply(this,arguments);return sender._pc=this,sender}),window.RTCRtpSender.prototype.getStats=function getStats(){const sender=this;return this._pc.getStats().then((result=>filterStats(result,sender.track,!0)))}}if(!("getStats"in window.RTCRtpReceiver.prototype)){const origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;origGetReceivers&&(window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){const receivers=origGetReceivers.apply(this,[]);return receivers.forEach((receiver=>receiver._pc=this)),receivers}),wrapPeerConnectionEvent(window,"track",(e=>(e.receiver._pc=e.srcElement,e))),window.RTCRtpReceiver.prototype.getStats=function getStats(){const receiver=this;return this._pc.getStats().then((result=>filterStats(result,receiver.track,!1)))}}if(!("getStats"in window.RTCRtpSender.prototype)||!("getStats"in window.RTCRtpReceiver.prototype))return;const origGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){if(arguments.length>0&&arguments[0]instanceof window.MediaStreamTrack){const track=arguments[0];let sender,receiver,err;return this.getSenders().forEach((s=>{s.track===track&&(sender?err=!0:sender=s)})),this.getReceivers().forEach((r=>(r.track===track&&(receiver?err=!0:receiver=r),r.track===track))),err||sender&&receiver?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):sender?sender.getStats():receiver?receiver.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return origGetStats.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(window){window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((streamId=>this._shimmedLocalStreams[streamId][0]))};const origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){if(!stream)return origAddTrack.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const sender=origAddTrack.apply(this,arguments);return this._shimmedLocalStreams[stream.id]?-1===this._shimmedLocalStreams[stream.id].indexOf(sender)&&this._shimmedLocalStreams[stream.id].push(sender):this._shimmedLocalStreams[stream.id]=[stream,sender],sender};const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._shimmedLocalStreams=this._shimmedLocalStreams||{},stream.getTracks().forEach((track=>{if(this.getSenders().find((s=>s.track===track)))throw new DOMException("Track already exists.","InvalidAccessError")}));const existingSenders=this.getSenders();origAddStream.apply(this,arguments);const newSenders=this.getSenders().filter((newSender=>-1===existingSenders.indexOf(newSender)));this._shimmedLocalStreams[stream.id]=[stream].concat(newSenders)};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[stream.id],origRemoveStream.apply(this,arguments)};const origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},sender&&Object.keys(this._shimmedLocalStreams).forEach((streamId=>{const idx=this._shimmedLocalStreams[streamId].indexOf(sender);-1!==idx&&this._shimmedLocalStreams[streamId].splice(idx,1),1===this._shimmedLocalStreams[streamId].length&&delete this._shimmedLocalStreams[streamId]})),origRemoveTrack.apply(this,arguments)}}function shimAddTrackRemoveTrack(window,browserDetails){if(!window.RTCPeerConnection)return;if(window.RTCPeerConnection.prototype.addTrack&&browserDetails.version>=65)return shimAddTrackRemoveTrackWithNative(window);const origGetLocalStreams=window.RTCPeerConnection.prototype.getLocalStreams;window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){const nativeStreams=origGetLocalStreams.apply(this);return this._reverseStreams=this._reverseStreams||{},nativeStreams.map((stream=>this._reverseStreams[stream.id]))};const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},stream.getTracks().forEach((track=>{if(this.getSenders().find((s=>s.track===track)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[stream.id]){const newStream=new window.MediaStream(stream.getTracks());this._streams[stream.id]=newStream,this._reverseStreams[newStream.id]=stream,stream=newStream}origAddStream.apply(this,[stream])};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;function replaceInternalStreamId(pc,description){let sdp=description.sdp;return Object.keys(pc._reverseStreams||[]).forEach((internalId=>{const externalStream=pc._reverseStreams[internalId],internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(internalStream.id,"g"),externalStream.id)})),new RTCSessionDescription({type:description.type,sdp})}window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},origRemoveStream.apply(this,[this._streams[stream.id]||stream]),delete this._reverseStreams[this._streams[stream.id]?this._streams[stream.id].id:stream.id],delete this._streams[stream.id]},window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const streams=[].slice.call(arguments,1);if(1!==streams.length||!streams[0].getTracks().find((t=>t===track)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((s=>s.track===track)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const oldStream=this._streams[stream.id];if(oldStream)oldStream.addTrack(track),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const newStream=new window.MediaStream([track]);this._streams[stream.id]=newStream,this._reverseStreams[newStream.id]=stream,this.addStream(newStream)}return this.getSenders().find((s=>s.track===track))},["createOffer","createAnswer"].forEach((function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){const args=arguments;return arguments.length&&"function"==typeof arguments[0]?nativeMethod.apply(this,[description=>{const desc=replaceInternalStreamId(this,description);args[0].apply(null,[desc])},err=>{args[1]&&args[1].apply(null,err)},arguments[2]]):nativeMethod.apply(this,arguments).then((description=>replaceInternalStreamId(this,description)))}};window.RTCPeerConnection.prototype[method]=methodObj[method]}));const origSetLocalDescription=window.RTCPeerConnection.prototype.setLocalDescription;window.RTCPeerConnection.prototype.setLocalDescription=function setLocalDescription(){return arguments.length&&arguments[0].type?(arguments[0]=function replaceExternalStreamId(pc,description){let sdp=description.sdp;return Object.keys(pc._reverseStreams||[]).forEach((internalId=>{const externalStream=pc._reverseStreams[internalId],internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(externalStream.id,"g"),internalStream.id)})),new RTCSessionDescription({type:description.type,sdp})}(this,arguments[0]),origSetLocalDescription.apply(this,arguments)):origSetLocalDescription.apply(this,arguments)};const origLocalDescription=Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(window.RTCPeerConnection.prototype,"localDescription",{get(){const description=origLocalDescription.get.apply(this);return""===description.type?description:replaceInternalStreamId(this,description)}}),window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!sender._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(sender._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let stream;this._streams=this._streams||{},Object.keys(this._streams).forEach((streamid=>{this._streams[streamid].getTracks().find((track=>sender.track===track))&&(stream=this._streams[streamid])})),stream&&(1===stream.getTracks().length?this.removeStream(this._reverseStreams[stream.id]):stream.removeTrack(sender.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection(window,browserDetails){!window.RTCPeerConnection&&window.webkitRTCPeerConnection&&(window.RTCPeerConnection=window.webkitRTCPeerConnection),window.RTCPeerConnection&&browserDetails.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){return arguments[0]=new("addIceCandidate"===method?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}};window.RTCPeerConnection.prototype[method]=methodObj[method]}))}function fixNegotiationNeeded(window,browserDetails){wrapPeerConnectionEvent(window,"negotiationneeded",(e=>{const pc=e.target;if(!(browserDetails.version<72||pc.getConfiguration&&"plan-b"===pc.getConfiguration().sdpSemantics)||"stable"===pc.signalingState)return e}))}function getusermedia_shimGetUserMedia(window,browserDetails){const navigator=window&&window.navigator,MediaStreamTrack=window&&window.MediaStreamTrack;if(navigator.getUserMedia=function(constraints,onSuccess,onError){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(constraints).then(onSuccess,onError)},!(browserDetails.version>55&&"autoGainControl"in navigator.mediaDevices.getSupportedConstraints())){const remap=function(obj,a,b){a in obj&&!(b in obj)&&(obj[b]=obj[a],delete obj[a])},nativeGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);if(navigator.mediaDevices.getUserMedia=function(c){return"object"==typeof c&&"object"==typeof c.audio&&(c=JSON.parse(JSON.stringify(c)),remap(c.audio,"autoGainControl","mozAutoGainControl"),remap(c.audio,"noiseSuppression","mozNoiseSuppression")),nativeGetUserMedia(c)},MediaStreamTrack&&MediaStreamTrack.prototype.getSettings){const nativeGetSettings=MediaStreamTrack.prototype.getSettings;MediaStreamTrack.prototype.getSettings=function(){const obj=nativeGetSettings.apply(this,arguments);return remap(obj,"mozAutoGainControl","autoGainControl"),remap(obj,"mozNoiseSuppression","noiseSuppression"),obj}}if(MediaStreamTrack&&MediaStreamTrack.prototype.applyConstraints){const nativeApplyConstraints=MediaStreamTrack.prototype.applyConstraints;MediaStreamTrack.prototype.applyConstraints=function(c){return"audio"===this.kind&&"object"==typeof c&&(c=JSON.parse(JSON.stringify(c)),remap(c,"autoGainControl","mozAutoGainControl"),remap(c,"noiseSuppression","mozNoiseSuppression")),nativeApplyConstraints.apply(this,[c])}}}}function shimGetDisplayMedia(window,preferredMediaSource){window.navigator.mediaDevices&&"getDisplayMedia"in window.navigator.mediaDevices||window.navigator.mediaDevices&&(window.navigator.mediaDevices.getDisplayMedia=function getDisplayMedia(constraints){if(!constraints||!constraints.video){const err=new DOMException("getDisplayMedia without video constraints is undefined");return err.name="NotFoundError",err.code=8,Promise.reject(err)}return!0===constraints.video?constraints.video={mediaSource:preferredMediaSource}:constraints.video.mediaSource=preferredMediaSource,window.navigator.mediaDevices.getUserMedia(constraints)})}function firefox_shim_shimOnTrack(window){"object"==typeof window&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)&&Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function firefox_shim_shimPeerConnection(window,browserDetails){if("object"!=typeof window||!window.RTCPeerConnection&&!window.mozRTCPeerConnection)return;!window.RTCPeerConnection&&window.mozRTCPeerConnection&&(window.RTCPeerConnection=window.mozRTCPeerConnection),browserDetails.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){return arguments[0]=new("addIceCandidate"===method?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}};window.RTCPeerConnection.prototype[method]=methodObj[method]}));const modernStatsTypes={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},nativeGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){const[selector,onSucc,onErr]=arguments;return nativeGetStats.apply(this,[selector||null]).then((stats=>{if(browserDetails.version<53&&!onSucc)try{stats.forEach((stat=>{stat.type=modernStatsTypes[stat.type]||stat.type}))}catch(e){if("TypeError"!==e.name)throw e;stats.forEach(((stat,i)=>{stats.set(i,Object.assign({},stat,{type:modernStatsTypes[stat.type]||stat.type}))}))}return stats})).then(onSucc,onErr)}}function shimSenderGetStats(window){if("object"!=typeof window||!window.RTCPeerConnection||!window.RTCRtpSender)return;if(window.RTCRtpSender&&"getStats"in window.RTCRtpSender.prototype)return;const origGetSenders=window.RTCPeerConnection.prototype.getSenders;origGetSenders&&(window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach((sender=>sender._pc=this)),senders});const origAddTrack=window.RTCPeerConnection.prototype.addTrack;origAddTrack&&(window.RTCPeerConnection.prototype.addTrack=function addTrack(){const sender=origAddTrack.apply(this,arguments);return sender._pc=this,sender}),window.RTCRtpSender.prototype.getStats=function getStats(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(window){if("object"!=typeof window||!window.RTCPeerConnection||!window.RTCRtpSender)return;if(window.RTCRtpSender&&"getStats"in window.RTCRtpReceiver.prototype)return;const origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;origGetReceivers&&(window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){const receivers=origGetReceivers.apply(this,[]);return receivers.forEach((receiver=>receiver._pc=this)),receivers}),wrapPeerConnectionEvent(window,"track",(e=>(e.receiver._pc=e.srcElement,e))),window.RTCRtpReceiver.prototype.getStats=function getStats(){return this._pc.getStats(this.track)}}function shimRemoveStream(window){window.RTCPeerConnection&&!("removeStream"in window.RTCPeerConnection.prototype)&&(window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){deprecated("removeStream","removeTrack"),this.getSenders().forEach((sender=>{sender.track&&stream.getTracks().includes(sender.track)&&this.removeTrack(sender)}))})}function shimRTCDataChannel(window){window.DataChannel&&!window.RTCDataChannel&&(window.RTCDataChannel=window.DataChannel)}function shimAddTransceiver(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origAddTransceiver=window.RTCPeerConnection.prototype.addTransceiver;origAddTransceiver&&(window.RTCPeerConnection.prototype.addTransceiver=function addTransceiver(){this.setParametersPromises=[];let sendEncodings=arguments[1]&&arguments[1].sendEncodings;void 0===sendEncodings&&(sendEncodings=[]),sendEncodings=[...sendEncodings];const shouldPerformCheck=sendEncodings.length>0;shouldPerformCheck&&sendEncodings.forEach((encodingParam=>{if("rid"in encodingParam){if(!/^[a-z0-9]{0,16}$/i.test(encodingParam.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in encodingParam&&!(parseFloat(encodingParam.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in encodingParam&&!(parseFloat(encodingParam.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const transceiver=origAddTransceiver.apply(this,arguments);if(shouldPerformCheck){const{sender}=transceiver,params=sender.getParameters();(!("encodings"in params)||1===params.encodings.length&&0===Object.keys(params.encodings[0]).length)&&(params.encodings=sendEncodings,sender.sendEncodings=sendEncodings,this.setParametersPromises.push(sender.setParameters(params).then((()=>{delete sender.sendEncodings})).catch((()=>{delete sender.sendEncodings}))))}return transceiver})}function shimGetParameters(window){if("object"!=typeof window||!window.RTCRtpSender)return;const origGetParameters=window.RTCRtpSender.prototype.getParameters;origGetParameters&&(window.RTCRtpSender.prototype.getParameters=function getParameters(){const params=origGetParameters.apply(this,arguments);return"encodings"in params||(params.encodings=[].concat(this.sendEncodings||[{}])),params})}function shimCreateOffer(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>origCreateOffer.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):origCreateOffer.apply(this,arguments)}}function shimCreateAnswer(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origCreateAnswer=window.RTCPeerConnection.prototype.createAnswer;window.RTCPeerConnection.prototype.createAnswer=function createAnswer(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>origCreateAnswer.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):origCreateAnswer.apply(this,arguments)}}function shimLocalStreamsAPI(window){if("object"==typeof window&&window.RTCPeerConnection){if("getLocalStreams"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in window.RTCPeerConnection.prototype)){const _addTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._localStreams||(this._localStreams=[]),this._localStreams.includes(stream)||this._localStreams.push(stream),stream.getAudioTracks().forEach((track=>_addTrack.call(this,track,stream))),stream.getVideoTracks().forEach((track=>_addTrack.call(this,track,stream)))},window.RTCPeerConnection.prototype.addTrack=function addTrack(track,...streams){return streams&&streams.forEach((stream=>{this._localStreams?this._localStreams.includes(stream)||this._localStreams.push(stream):this._localStreams=[stream]})),_addTrack.apply(this,arguments)}}"removeStream"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._localStreams||(this._localStreams=[]);const index=this._localStreams.indexOf(stream);if(-1===index)return;this._localStreams.splice(index,1);const tracks=stream.getTracks();this.getSenders().forEach((sender=>{tracks.includes(sender.track)&&this.removeTrack(sender)}))})}}function shimRemoteStreamsAPI(window){if("object"==typeof window&&window.RTCPeerConnection&&("getRemoteStreams"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.getRemoteStreams=function getRemoteStreams(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in window.RTCPeerConnection.prototype))){Object.defineProperty(window.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(f){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=f),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((stream=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(stream))return;this._remoteStreams.push(stream);const event=new Event("addstream");event.stream=stream,this.dispatchEvent(event)}))})}});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){const pc=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((stream=>{if(pc._remoteStreams||(pc._remoteStreams=[]),pc._remoteStreams.indexOf(stream)>=0)return;pc._remoteStreams.push(stream);const event=new Event("addstream");event.stream=stream,pc.dispatchEvent(event)}))}),origSetRemoteDescription.apply(pc,arguments)}}}function shimCallbacksAPI(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const prototype=window.RTCPeerConnection.prototype,origCreateOffer=prototype.createOffer,origCreateAnswer=prototype.createAnswer,setLocalDescription=prototype.setLocalDescription,setRemoteDescription=prototype.setRemoteDescription,addIceCandidate=prototype.addIceCandidate;prototype.createOffer=function createOffer(successCallback,failureCallback){const options=arguments.length>=2?arguments[2]:arguments[0],promise=origCreateOffer.apply(this,[options]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.createAnswer=function createAnswer(successCallback,failureCallback){const options=arguments.length>=2?arguments[2]:arguments[0],promise=origCreateAnswer.apply(this,[options]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise};let withCallback=function(description,successCallback,failureCallback){const promise=setLocalDescription.apply(this,[description]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise};prototype.setLocalDescription=withCallback,withCallback=function(description,successCallback,failureCallback){const promise=setRemoteDescription.apply(this,[description]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.setRemoteDescription=withCallback,withCallback=function(candidate,successCallback,failureCallback){const promise=addIceCandidate.apply(this,[candidate]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.addIceCandidate=withCallback}function safari_shim_shimGetUserMedia(window){const navigator=window&&window.navigator;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const mediaDevices=navigator.mediaDevices,_getUserMedia=mediaDevices.getUserMedia.bind(mediaDevices);navigator.mediaDevices.getUserMedia=constraints=>_getUserMedia(shimConstraints(constraints))}!navigator.getUserMedia&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function getUserMedia(constraints,cb,errcb){navigator.mediaDevices.getUserMedia(constraints).then(cb,errcb)}.bind(navigator))}function shimConstraints(constraints){return constraints&&void 0!==constraints.video?Object.assign({},constraints,{video:compactObject(constraints.video)}):constraints}function shimRTCIceServerUrls(window){if(!window.RTCPeerConnection)return;const OrigPeerConnection=window.RTCPeerConnection;window.RTCPeerConnection=function RTCPeerConnection(pcConfig,pcConstraints){if(pcConfig&&pcConfig.iceServers){const newIceServers=[];for(let i=0;i<pcConfig.iceServers.length;i++){let server=pcConfig.iceServers[i];void 0===server.urls&&server.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),server=JSON.parse(JSON.stringify(server)),server.urls=server.url,delete server.url,newIceServers.push(server)):newIceServers.push(pcConfig.iceServers[i])}pcConfig.iceServers=newIceServers}return new OrigPeerConnection(pcConfig,pcConstraints)},window.RTCPeerConnection.prototype=OrigPeerConnection.prototype,"generateCertificate"in OrigPeerConnection&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:()=>OrigPeerConnection.generateCertificate})}function shimTrackEventTransceiver(window){"object"==typeof window&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)&&Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(window){const origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(offerOptions){if(offerOptions){void 0!==offerOptions.offerToReceiveAudio&&(offerOptions.offerToReceiveAudio=!!offerOptions.offerToReceiveAudio);const audioTransceiver=this.getTransceivers().find((transceiver=>"audio"===transceiver.receiver.track.kind));!1===offerOptions.offerToReceiveAudio&&audioTransceiver?"sendrecv"===audioTransceiver.direction?audioTransceiver.setDirection?audioTransceiver.setDirection("sendonly"):audioTransceiver.direction="sendonly":"recvonly"===audioTransceiver.direction&&(audioTransceiver.setDirection?audioTransceiver.setDirection("inactive"):audioTransceiver.direction="inactive"):!0!==offerOptions.offerToReceiveAudio||audioTransceiver||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==offerOptions.offerToReceiveVideo&&(offerOptions.offerToReceiveVideo=!!offerOptions.offerToReceiveVideo);const videoTransceiver=this.getTransceivers().find((transceiver=>"video"===transceiver.receiver.track.kind));!1===offerOptions.offerToReceiveVideo&&videoTransceiver?"sendrecv"===videoTransceiver.direction?videoTransceiver.setDirection?videoTransceiver.setDirection("sendonly"):videoTransceiver.direction="sendonly":"recvonly"===videoTransceiver.direction&&(videoTransceiver.setDirection?videoTransceiver.setDirection("inactive"):videoTransceiver.direction="inactive"):!0!==offerOptions.offerToReceiveVideo||videoTransceiver||this.addTransceiver("video",{direction:"recvonly"})}return origCreateOffer.apply(this,arguments)}}function shimAudioContext(window){"object"!=typeof window||window.AudioContext||(window.AudioContext=window.webkitAudioContext)}var sdp=__webpack_require__("./node_modules/sdp/sdp.js"),sdp_default=__webpack_require__.n(sdp);function shimRTCIceCandidate(window){if(!window.RTCIceCandidate||window.RTCIceCandidate&&"foundation"in window.RTCIceCandidate.prototype)return;const NativeRTCIceCandidate=window.RTCIceCandidate;window.RTCIceCandidate=function RTCIceCandidate(args){if("object"==typeof args&&args.candidate&&0===args.candidate.indexOf("a=")&&((args=JSON.parse(JSON.stringify(args))).candidate=args.candidate.substring(2)),args.candidate&&args.candidate.length){const nativeCandidate=new NativeRTCIceCandidate(args),parsedCandidate=sdp_default().parseCandidate(args.candidate);for(const key in parsedCandidate)key in nativeCandidate||Object.defineProperty(nativeCandidate,key,{value:parsedCandidate[key]});return nativeCandidate.toJSON=function toJSON(){return{candidate:nativeCandidate.candidate,sdpMid:nativeCandidate.sdpMid,sdpMLineIndex:nativeCandidate.sdpMLineIndex,usernameFragment:nativeCandidate.usernameFragment}},nativeCandidate}return new NativeRTCIceCandidate(args)},window.RTCIceCandidate.prototype=NativeRTCIceCandidate.prototype,wrapPeerConnectionEvent(window,"icecandidate",(e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new window.RTCIceCandidate(e.candidate),writable:"false"}),e)))}function shimRTCIceCandidateRelayProtocol(window){!window.RTCIceCandidate||window.RTCIceCandidate&&"relayProtocol"in window.RTCIceCandidate.prototype||wrapPeerConnectionEvent(window,"icecandidate",(e=>{if(e.candidate){const parsedCandidate=sdp_default().parseCandidate(e.candidate.candidate);"relay"===parsedCandidate.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[parsedCandidate.priority>>24])}return e}))}function shimMaxMessageSize(window,browserDetails){if(!window.RTCPeerConnection)return;"sctp"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){if(this._sctp=null,"chrome"===browserDetails.browser&&browserDetails.version>=76){const{sdpSemantics}=this.getConfiguration();"plan-b"===sdpSemantics&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(description){if(!description||!description.sdp)return!1;const sections=sdp_default().splitSections(description.sdp);return sections.shift(),sections.some((mediaSection=>{const mLine=sdp_default().parseMLine(mediaSection);return mLine&&"application"===mLine.kind&&-1!==mLine.protocol.indexOf("SCTP")}))}(arguments[0])){const isFirefox=function(description){const match=description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===match||match.length<2)return-1;const version=parseInt(match[1],10);return version!=version?-1:version}(arguments[0]),canSendMMS=function(remoteIsFirefox){let canSendMaxMessageSize=65536;return"firefox"===browserDetails.browser&&(canSendMaxMessageSize=browserDetails.version<57?-1===remoteIsFirefox?16384:2147483637:browserDetails.version<60?57===browserDetails.version?65535:65536:2147483637),canSendMaxMessageSize}(isFirefox),remoteMMS=function(description,remoteIsFirefox){let maxMessageSize=65536;"firefox"===browserDetails.browser&&57===browserDetails.version&&(maxMessageSize=65535);const match=sdp_default().matchPrefix(description.sdp,"a=max-message-size:");return match.length>0?maxMessageSize=parseInt(match[0].substring(19),10):"firefox"===browserDetails.browser&&-1!==remoteIsFirefox&&(maxMessageSize=2147483637),maxMessageSize}(arguments[0],isFirefox);let maxMessageSize;maxMessageSize=0===canSendMMS&&0===remoteMMS?Number.POSITIVE_INFINITY:0===canSendMMS||0===remoteMMS?Math.max(canSendMMS,remoteMMS):Math.min(canSendMMS,remoteMMS);const sctp={};Object.defineProperty(sctp,"maxMessageSize",{get:()=>maxMessageSize}),this._sctp=sctp}return origSetRemoteDescription.apply(this,arguments)}}function shimSendThrowTypeError(window){if(!window.RTCPeerConnection||!("createDataChannel"in window.RTCPeerConnection.prototype))return;function wrapDcSend(dc,pc){const origDataChannelSend=dc.send;dc.send=function send(){const data=arguments[0],length=data.length||data.size||data.byteLength;if("open"===dc.readyState&&pc.sctp&&length>pc.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+pc.sctp.maxMessageSize+" bytes)");return origDataChannelSend.apply(dc,arguments)}}const origCreateDataChannel=window.RTCPeerConnection.prototype.createDataChannel;window.RTCPeerConnection.prototype.createDataChannel=function createDataChannel(){const dataChannel=origCreateDataChannel.apply(this,arguments);return wrapDcSend(dataChannel,this),dataChannel},wrapPeerConnectionEvent(window,"datachannel",(e=>(wrapDcSend(e.channel,e.target),e)))}function shimConnectionState(window){if(!window.RTCPeerConnection||"connectionState"in window.RTCPeerConnection.prototype)return;const proto=window.RTCPeerConnection.prototype;Object.defineProperty(proto,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(proto,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(cb){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),cb&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=cb)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((method=>{const origMethod=proto[method];proto[method]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const pc=e.target;if(pc._lastConnectionState!==pc.connectionState){pc._lastConnectionState=pc.connectionState;const newEvent=new Event("connectionstatechange",e);pc.dispatchEvent(newEvent)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),origMethod.apply(this,arguments)}}))}function removeExtmapAllowMixed(window,browserDetails){if(!window.RTCPeerConnection)return;if("chrome"===browserDetails.browser&&browserDetails.version>=71)return;if("safari"===browserDetails.browser&&browserDetails.version>=605)return;const nativeSRD=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(desc){if(desc&&desc.sdp&&-1!==desc.sdp.indexOf("\na=extmap-allow-mixed")){const sdp=desc.sdp.split("\n").filter((line=>"a=extmap-allow-mixed"!==line.trim())).join("\n");window.RTCSessionDescription&&desc instanceof window.RTCSessionDescription?arguments[0]=new window.RTCSessionDescription({type:desc.type,sdp}):desc.sdp=sdp}return nativeSRD.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(window,browserDetails){if(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype)return;const nativeAddIceCandidate=window.RTCPeerConnection.prototype.addIceCandidate;nativeAddIceCandidate&&0!==nativeAddIceCandidate.length&&(window.RTCPeerConnection.prototype.addIceCandidate=function addIceCandidate(){return arguments[0]?("chrome"===browserDetails.browser&&browserDetails.version<78||"firefox"===browserDetails.browser&&browserDetails.version<68||"safari"===browserDetails.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():nativeAddIceCandidate.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(window,browserDetails){if(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype)return;const nativeSetLocalDescription=window.RTCPeerConnection.prototype.setLocalDescription;nativeSetLocalDescription&&0!==nativeSetLocalDescription.length&&(window.RTCPeerConnection.prototype.setLocalDescription=function setLocalDescription(){let desc=arguments[0]||{};if("object"!=typeof desc||desc.type&&desc.sdp)return nativeSetLocalDescription.apply(this,arguments);if(desc={type:desc.type,sdp:desc.sdp},!desc.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":desc.type="offer";break;default:desc.type="answer"}if(desc.sdp||"offer"!==desc.type&&"answer"!==desc.type)return nativeSetLocalDescription.apply(this,[desc]);return("offer"===desc.type?this.createOffer:this.createAnswer).apply(this).then((d=>nativeSetLocalDescription.apply(this,[d])))})}(function adapterFactory({window}={},options={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const logging=log,browserDetails=function detectBrowser(window){const result={browser:null,version:null};if(void 0===window||!window.navigator||!window.navigator.userAgent)return result.browser="Not a browser.",result;const{navigator}=window;if(navigator.userAgentData&&navigator.userAgentData.brands){const chromium=navigator.userAgentData.brands.find((brand=>"Chromium"===brand.brand));if(chromium)return{browser:"chrome",version:parseInt(chromium.version,10)}}if(navigator.mozGetUserMedia)result.browser="firefox",result.version=extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1);else if(navigator.webkitGetUserMedia||!1===window.isSecureContext&&window.webkitRTCPeerConnection)result.browser="chrome",result.version=extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!window.RTCPeerConnection||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return result.browser="Not a supported browser.",result;result.browser="safari",result.version=extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1),result.supportsUnifiedPlan=window.RTCRtpTransceiver&&"currentDirection"in window.RTCRtpTransceiver.prototype}return result}(window),adapter={browserDetails,commonShim:common_shim_namespaceObject,extractVersion,disableLog,disableWarnings,sdp};switch(browserDetails.browser){case"chrome":if(!chrome_shim_namespaceObject||!shimPeerConnection||!options.shimChrome)return logging("Chrome shim is not included in this adapter release."),adapter;if(null===browserDetails.version)return logging("Chrome shim can not determine version, not shimming."),adapter;logging("adapter.js shimming chrome."),adapter.browserShim=chrome_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),shimGetUserMedia(window,browserDetails),shimMediaStream(window),shimPeerConnection(window,browserDetails),shimOnTrack(window),shimAddTrackRemoveTrack(window,browserDetails),shimGetSendersWithDtmf(window),shimSenderReceiverGetStats(window),fixNegotiationNeeded(window,browserDetails),shimRTCIceCandidate(window),shimRTCIceCandidateRelayProtocol(window),shimConnectionState(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window),removeExtmapAllowMixed(window,browserDetails);break;case"firefox":if(!firefox_shim_namespaceObject||!firefox_shim_shimPeerConnection||!options.shimFirefox)return logging("Firefox shim is not included in this adapter release."),adapter;logging("adapter.js shimming firefox."),adapter.browserShim=firefox_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),getusermedia_shimGetUserMedia(window,browserDetails),firefox_shim_shimPeerConnection(window,browserDetails),firefox_shim_shimOnTrack(window),shimRemoveStream(window),shimSenderGetStats(window),shimReceiverGetStats(window),shimRTCDataChannel(window),shimAddTransceiver(window),shimGetParameters(window),shimCreateOffer(window),shimCreateAnswer(window),shimRTCIceCandidate(window),shimConnectionState(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window);break;case"safari":if(!safari_shim_namespaceObject||!options.shimSafari)return logging("Safari shim is not included in this adapter release."),adapter;logging("adapter.js shimming safari."),adapter.browserShim=safari_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),shimRTCIceServerUrls(window),shimCreateOfferLegacy(window),shimCallbacksAPI(window),shimLocalStreamsAPI(window),shimRemoteStreamsAPI(window),shimTrackEventTransceiver(window),safari_shim_shimGetUserMedia(window),shimAudioContext(window),shimRTCIceCandidate(window),shimRTCIceCandidateRelayProtocol(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window),removeExtmapAllowMixed(window,browserDetails);break;default:logging("Unsupported browser!")}return adapter})({window:"undefined"==typeof window?void 0:window})}}]);