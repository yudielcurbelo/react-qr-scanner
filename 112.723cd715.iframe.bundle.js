/*! For license information please see 112.723cd715.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunk_yudiel_react_qr_scanner=self.webpackChunk_yudiel_react_qr_scanner||[]).push([[112],{"./node_modules/barcode-detector/dist/es/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{vR:()=>Eo});var Ie=o=>{throw TypeError(o)},Me=(o,l,h)=>l.has(o)||Ie("Cannot "+h),Fe=(o,l,h)=>(Me(o,l,"read from private field"),h?h.call(o):l.get(o));const Ft=[["Aztec","M"],["Codabar","L"],["Code39","L"],["Code93","L"],["Code128","L"],["DataBar","L"],["DataBarExpanded","L"],["DataMatrix","M"],["EAN-8","L"],["EAN-13","L"],["ITF","L"],["MaxiCode","M"],["PDF417","M"],["QRCode","M"],["UPC-A","L"],["UPC-E","L"],["MicroQRCode","M"],["rMQRCode","M"],["DXFilmEdge","L"],["DataBarLimited","L"]],jt=Ft.map((([o])=>o)),Ba=jt.filter(((o,l)=>"L"===Ft[l][1])),Wa=jt.filter(((o,l)=>"M"===Ft[l][1]));function Qt(o){switch(o){case"Linear-Codes":return Ba.reduce(((l,h)=>l|Qt(h)),0);case"Matrix-Codes":return Wa.reduce(((l,h)=>l|Qt(h)),0);case"Any":return(1<<Ft.length)-1;case"None":return 0;default:return 1<<jt.indexOf(o)}}function Ua(o){if(0===o)return"None";const l=31-Math.clz32(o);return jt[l]}function Va(o){return o.reduce(((l,h)=>l|Qt(h)),0)}const ka=["LocalAverage","GlobalHistogram","FixedThreshold","BoolCast"];function Ha(o){return ka.indexOf(o)}const Le=["Unknown","ASCII","ISO8859_1","ISO8859_2","ISO8859_3","ISO8859_4","ISO8859_5","ISO8859_6","ISO8859_7","ISO8859_8","ISO8859_9","ISO8859_10","ISO8859_11","ISO8859_13","ISO8859_14","ISO8859_15","ISO8859_16","Cp437","Cp1250","Cp1251","Cp1252","Cp1256","Shift_JIS","Big5","GB2312","GB18030","EUC_JP","EUC_KR","UTF16BE","UTF16BE","UTF8","UTF16LE","UTF32BE","UTF32LE","BINARY"];function Na(o){return"UnicodeBig"===o?Le.indexOf("UTF16BE"):Le.indexOf(o)}const za=["Text","Binary","Mixed","GS1","ISO15434","UnknownECI"];function Ga(o){return za[o]}const Xa=["Ignore","Read","Require"];function qa(o){return Xa.indexOf(o)}const Ya=["Plain","ECI","HRI","Hex","Escaped"];function Za(o){return Ya.indexOf(o)}const Mt={formats:[],tryHarder:!0,tryRotate:!0,tryInvert:!0,tryDownscale:!0,tryDenoise:!1,binarizer:"LocalAverage",isPure:!1,downscaleFactor:3,downscaleThreshold:500,minLineCount:2,maxNumberOfSymbols:255,tryCode39ExtendedMode:!0,returnErrors:!1,eanAddOnSymbol:"Ignore",textMode:"HRI",characterSet:"Unknown"};function Be(o){return{...o,formats:Va(o.formats),binarizer:Ha(o.binarizer),eanAddOnSymbol:qa(o.eanAddOnSymbol),textMode:Za(o.textMode),characterSet:Na(o.characterSet)}}function Qa(o){return{...o,format:Ua(o.format),contentType:Ga(o.contentType),eccLevel:o.ecLevel}}const Ja={locateFile:(o,l)=>{const h=o.match(/_(.+?)\.wasm$/);return h?`https://fastly.jsdelivr.net/npm/zxing-wasm@2.2.2/dist/${h[1]}/${o}`:l+o}},It=new WeakMap;function Ka(o,l){return Object.is(o,l)||Object.keys(o).length===Object.keys(l).length&&Object.keys(o).every((h=>Object.hasOwn(l,h)&&o[h]===l[h]))}function Ue(o,{overrides:l,equalityFn:h=Ka,fireImmediately:f=!1}={}){var C;const[O,I]=null!=(C=It.get(o))?C:[Ja],j=null!=l?l:O;let x;if(f){if(I&&(x=h(O,j)))return I;const M=o({...j});return It.set(o,[j,M]),M}(null!=x?x:h(O,j))||It.set(o,[j])}Mt.formats;var Kt=async function(o={}){var h,C,O,f=o,I=new Promise(((e,t)=>{C=e,O=t})),j="object"==typeof window,x=typeof Bun<"u",M=typeof WorkerGlobalScope<"u";"object"==typeof process&&null!==(h=process.versions)&&void 0!==h&&h.node&&process.type;var st,et,z="./this.program",q="";if(j||M||x){try{q=new URL(".",undefined).href}catch{}M&&(et=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),st=async e=>{var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw new Error(t.status+" : "+t.url)}}var ut,yt,Y,B,mt,rt,nt,P,ee,re,vt=console.log.bind(console),G=console.error.bind(console),te=!1;function ne(){var e=yt.buffer;Y=new Int8Array(e),mt=new Int16Array(e),f.HEAPU8=B=new Uint8Array(e),rt=new Uint16Array(e),nt=new Int32Array(e),P=new Uint32Array(e),ee=new Float32Array(e),re=new Float64Array(e)}var gt,Z=0,ct=null;function Rt(e){var t;null===(t=f.onAbort)||void 0===t||t.call(f,e),G(e="Aborted("+e+")"),te=!0,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw O(r),r}function rr(){return function it(e){return f.locateFile?f.locateFile(e,q):q+e}("zxing_reader.wasm")}async function ar(e){if(!ut)try{var t=await st(e);return new Uint8Array(t)}catch{}return function nr(e){if(e==gt&&ut)return new Uint8Array(ut);if(et)return et(e);throw"both async and sync fetching of the wasm failed"}(e)}async function ir(e,t,r){if(!e&&"function"==typeof WebAssembly.instantiateStreaming)try{var n=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(n,r)}catch(i){G(`wasm streaming compile failed: ${i}`),G("falling back to ArrayBuffer instantiation")}return async function or(e,t){try{var r=await ar(e);return await WebAssembly.instantiate(r,t)}catch(a){G(`failed to asynchronously prepare wasm: ${a}`),Rt(a)}}(t,r)}var ae=e=>{for(;e.length>0;)e.shift()(f)},oe=[],cr=e=>oe.push(e),ie=[],lr=e=>ie.push(e),m=e=>qn(e),g=()=>Yn(),wt=[],$t=0,V=0;class Lt{constructor(t){this.excPtr=t,this.ptr=t-24}set_type(t){P[this.ptr+4>>2]=t}get_type(){return P[this.ptr+4>>2]}set_destructor(t){P[this.ptr+8>>2]=t}get_destructor(){return P[this.ptr+8>>2]}set_caught(t){t=t?1:0,Y[this.ptr+12]=t}get_caught(){return 0!=Y[this.ptr+12]}set_rethrown(t){t=t?1:0,Y[this.ptr+13]=t}get_rethrown(){return 0!=Y[this.ptr+13]}init(t,r){this.set_adjusted_ptr(0),this.set_type(t),this.set_destructor(r)}set_adjusted_ptr(t){P[this.ptr+16>>2]=t}get_adjusted_ptr(){return P[this.ptr+16>>2]}}var bt=e=>Xn(e),Bt=e=>{var t=V;if(!t)return bt(0),0;var r=new Lt(t);r.set_adjusted_ptr(t);var n=r.get_type();if(!n)return bt(0),t;for(var a of e){if(0===a||a===n)break;var i=r.ptr+16;if(Jn(a,n,i))return bt(a),t}return bt(n),t},Ct={},Wt=e=>{for(;e.length;){var t=e.pop();e.pop()(t)}};function lt(e){return this.fromWireType(P[e>>2])}var se,at={},Q={},Tt={},br=class extends Error{constructor(e){super(e),this.name="InternalError"}},Pt=e=>{throw new br(e)},J=(e,t,r)=>{function n(s){var c=r(s);c.length!==e.length&&Pt("Mismatched type converter count");for(var d=0;d<e.length;++d)U(e[d],c[d])}e.forEach((s=>Tt[s]=t));var a=new Array(t.length),i=[],u=0;t.forEach(((s,c)=>{Q.hasOwnProperty(s)?a[c]=Q[s]:(i.push(s),at.hasOwnProperty(s)||(at[s]=[]),at[s].push((()=>{a[c]=Q[s],++u===i.length&&n(a)})))})),0===i.length&&n(a)},F=e=>{for(var t="",r=e;B[r];)t+=se[B[r++]];return t},ft=class extends Error{constructor(e){super(e),this.name="BindingError"}},T=e=>{throw new ft(e)};function U(e,t){return function _r(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var n=t.name;if(e||T(`type "${n}" must have a positive integer typeid pointer`),Q.hasOwnProperty(e)){if(r.ignoreDuplicateRegistrations)return;T(`Cannot register type '${n}' twice`)}if(Q[e]=t,delete Tt[e],at.hasOwnProperty(e)){var a=at[e];delete at[e],a.forEach((i=>i()))}}(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}var k=8,Or=e=>({count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}),Ut=e=>{T(function t(r){return r.$$.ptrType.registeredClass.name}(e)+" instance already deleted")},Vt=!1,ue=e=>{},ce=e=>{e.count.value-=1,0===e.count.value&&(e=>{e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)})(e)},dt=e=>typeof FinalizationRegistry>"u"?(dt=t=>t,e):(Vt=new FinalizationRegistry((t=>{ce(t.$$)})),ue=t=>Vt.unregister(t),(dt=t=>{var r=t.$$;if(!!r.smartPtr){var a={$$:r};Vt.register(t,a,t)}return t})(e));function _t(){}var kt=(e,t)=>Object.defineProperty(t,"name",{value:e}),le={},fe=(e,t,r)=>{if(void 0===e[t].overloadTable){var n=e[t];e[t]=function(){for(var a=arguments.length,i=new Array(a),u=0;u<a;u++)i[u]=arguments[u];return e[t].overloadTable.hasOwnProperty(i.length)||T(`Function '${r}' called with an invalid number of arguments (${i.length}) - expects one of (${e[t].overloadTable})!`),e[t].overloadTable[i.length].apply(this,i)},e[t].overloadTable=[],e[t].overloadTable[n.argCount]=n}},de=(e,t,r)=>{f.hasOwnProperty(e)?((void 0===r||void 0!==f[e].overloadTable&&void 0!==f[e].overloadTable[r])&&T(`Cannot register public name '${e}' twice`),fe(f,e,e),f[e].overloadTable.hasOwnProperty(r)&&T(`Cannot register multiple overloads of a function with the same number of arguments (${r})!`),f[e].overloadTable[r]=t):(f[e]=t,f[e].argCount=r)};function Mr(e,t,r,n,a,i,u,s){this.name=e,this.constructor=t,this.instancePrototype=r,this.rawDestructor=n,this.baseClass=a,this.getActualType=i,this.upcast=u,this.downcast=s,this.pureVirtualFunctions=[]}var Ht=(e,t,r)=>{for(;t!==r;)t.upcast||T(`Expected null or instance of ${r.name}, got an instance of ${t.name}`),e=t.upcast(e),t=t.baseClass;return e},Nt=e=>{if(null===e)return"null";var t=typeof e;return"object"===t||"array"===t||"function"===t?e.toString():""+e};function Fr(e,t){if(null===t)return this.isReference&&T(`null is not a valid ${this.name}`),0;t.$$||T(`Cannot pass "${Nt(t)}" as a ${this.name}`),t.$$.ptr||T(`Cannot pass deleted object as a pointer of type ${this.name}`);var r=t.$$.ptrType.registeredClass;return Ht(t.$$.ptr,r,this.registeredClass)}function jr(e,t){var r;if(null===t)return this.isReference&&T(`null is not a valid ${this.name}`),this.isSmartPointer?(r=this.rawConstructor(),null!==e&&e.push(this.rawDestructor,r),r):0;(!t||!t.$$)&&T(`Cannot pass "${Nt(t)}" as a ${this.name}`),t.$$.ptr||T(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&t.$$.ptrType.isConst&&T(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);var n=t.$$.ptrType.registeredClass;if(r=Ht(t.$$.ptr,n,this.registeredClass),this.isSmartPointer)switch(void 0===t.$$.smartPtr&&T("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?r=t.$$.smartPtr:T(`Cannot convert argument of type ${t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:r=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)r=t.$$.smartPtr;else{var a=t.clone();r=this.rawShare(r,H.toHandle((()=>a.delete()))),null!==e&&e.push(this.rawDestructor,r)}break;default:T("Unsupporting sharing policy")}return r}function Rr(e,t){if(null===t)return this.isReference&&T(`null is not a valid ${this.name}`),0;t.$$||T(`Cannot pass "${Nt(t)}" as a ${this.name}`),t.$$.ptr||T(`Cannot pass deleted object as a pointer of type ${this.name}`),t.$$.ptrType.isConst&&T(`Cannot convert argument of type ${t.$$.ptrType.name} to parameter type ${this.name}`);var r=t.$$.ptrType.registeredClass;return Ht(t.$$.ptr,r,this.registeredClass)}var he=(e,t,r)=>{if(t===r)return e;if(void 0===r.baseClass)return null;var n=he(e,t,r.baseClass);return null===n?null:r.downcast(n)},Lr={},Wr=(e,t)=>(t=((e,t)=>{for(void 0===t&&T("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t})(e,t),Lr[t]),Et=(e,t)=>((!t.ptrType||!t.ptr)&&Pt("makeClassHandle requires ptr and ptrType"),!!t.smartPtrType!==!!t.smartPtr&&Pt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},dt(Object.create(e,{$$:{value:t,writable:!0}})));function Ur(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var r=Wr(this.registeredClass,t);if(void 0!==r){if(0===r.$$.count.value)return r.$$.ptr=t,r.$$.smartPtr=e,r.clone();var n=r.clone();return this.destructor(e),n}function a(){return this.isSmartPointer?Et(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):Et(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var s,i=this.registeredClass.getActualType(t),u=le[i];if(!u)return a.call(this);s=this.isConst?u.constPointerType:u.pointerType;var c=he(t,this.registeredClass,s.registeredClass);return null===c?a.call(this):this.isSmartPointer?Et(s.registeredClass.instancePrototype,{ptrType:s,ptr:c,smartPtrType:this,smartPtr:e}):Et(s.registeredClass.instancePrototype,{ptrType:s,ptr:c})}function Ot(e,t,r,n,a,i,u,s,c,d,p){this.name=e,this.registeredClass=t,this.isReference=r,this.isConst=n,this.isSmartPointer=a,this.pointeeType=i,this.sharingPolicy=u,this.rawGetPointee=s,this.rawConstructor=c,this.rawShare=d,this.rawDestructor=p,a||void 0!==t.baseClass?this.toWireType=jr:n?(this.toWireType=Fr,this.destructorFunction=null):(this.toWireType=Rr,this.destructorFunction=null)}var ye,pe=(e,t,r)=>{f.hasOwnProperty(e)||Pt("Replacing nonexistent public symbol"),void 0!==f[e].overloadTable&&void 0!==r?f[e].overloadTable[r]=t:(f[e]=t,f[e].argCount=r)},ve=[],w=e=>{var t=ve[e];return t||(ve[e]=t=ye.get(e)),t},Hr=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){for(var n=arguments.length,a=new Array(n),i=0;i<n;i++)a[i]=arguments[i];return function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.includes("j")?dynCallLegacy(e,t,r):w(t)(...r)}(e,t,a,r)}},W=function(e,t){e=F(e);var n=function r(){return e.includes("j")?Hr(e,t):w(t)}();return"function"!=typeof n&&T(`unknown function pointer with signature ${e}: ${t}`),n};class Nr extends Error{}var me=e=>{var t=zn(e),r=F(t);return tt(t),r},xt=(e,t)=>{var r=[],n={};throw t.forEach((function a(i){if(!n[i]&&!Q[i]){if(Tt[i])return void Tt[i].forEach(a);r.push(i),n[i]=!0}})),new Nr(`${e}: `+r.map(me).join([", "]))},zt=(e,t)=>{for(var r=[],n=0;n<e;n++)r.push(P[t+4*n>>2]);return r};function Gt(e,t,r,n,a,i){var u=t.length;u<2&&T("argTypes array size mismatch! Must at least get return value and 'this' types!");var s=null!==t[1]&&null!==r,c=function Gr(e){for(var t=1;t<e.length;++t)if(null!==e[t]&&void 0===e[t].destructorFunction)return!0;return!1}(t),d="void"!==t[0].name,p=u-2,v=new Array(p),$=[],b=[];return kt(e,(function(){var S;b.length=0,$.length=s?2:1,$[0]=a,s&&(S=t[1].toWireType(b,this),$[1]=S);for(var A=0;A<p;++A)v[A]=t[A+2].toWireType(b,A<0||arguments.length<=A?void 0:arguments[A]),$.push(v[A]);return function N(R){if(c)Wt(b);else for(var L=s?1:2;L<t.length;L++){var At=1===L?S:v[L-2];null!==t[L].destructorFunction&&t[L].destructorFunction(At)}if(d)return t[0].fromWireType(R)}(n(...$))}))}var ge=e=>{const t=(e=e.trim()).indexOf("(");return-1===t?e:e.slice(0,t)},we=[],K=[0,1,,1,null,1,!0,1,!1,1],Xt=e=>{e>9&&0==--K[e+1]&&(K[e]=void 0,we.push(e))},H={toValue:e=>(e||T(`Cannot use deleted val. handle = ${e}`),K[e]),toHandle:e=>{switch(e){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const t=we.pop()||K.length;return K[t]=e,K[t+1]=1,t}}}},$e={name:"emscripten::val",fromWireType:e=>{var t=H.toValue(e);return Xt(e),t},toWireType:(e,t)=>H.toHandle(t),argPackAdvance:k,readValueFromPointer:lt,destructorFunction:null},Zr=(e,t)=>{switch(t){case 4:return function(r){return this.fromWireType(ee[r>>2])};case 8:return function(r){return this.fromWireType(re[r>>3])};default:throw new TypeError(`invalid float width (${t}): ${e}`)}},Kr=(e,t,r)=>{switch(t){case 1:return r?n=>Y[n]:n=>B[n];case 2:return r?n=>mt[n>>1]:n=>rt[n>>1];case 4:return r?n=>nt[n>>2]:n=>P[n>>2];default:throw new TypeError(`invalid integer width (${t}): ${e}`)}},rn=Object.assign({optional:!0},$e),ot=(e,t,r)=>((e,t,r,n)=>{if(!(n>0))return 0;for(var a=r,i=r+n-1,u=0;u<e.length;++u){var s=e.charCodeAt(u);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++u)),s<=127){if(r>=i)break;t[r++]=s}else if(s<=2047){if(r+1>=i)break;t[r++]=192|s>>6,t[r++]=128|63&s}else if(s<=65535){if(r+2>=i)break;t[r++]=224|s>>12,t[r++]=128|s>>6&63,t[r++]=128|63&s}else{if(r+3>=i)break;t[r++]=240|s>>18,t[r++]=128|s>>12&63,t[r++]=128|s>>6&63,t[r++]=128|63&s}}return t[r]=0,r-a})(e,B,t,r),be=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n<=127?t++:n<=2047?t+=2:n>=55296&&n<=57343?(t+=4,++r):t+=3}return t},Ce=typeof TextDecoder<"u"?new TextDecoder:void 0,Te=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(var n=t+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN),a=t;e[a]&&!(a>=n);)++a;if(a-t>16&&e.buffer&&Ce)return Ce.decode(e.subarray(t,a));for(var i="";t<a;){var u=e[t++];if(128&u){var s=63&e[t++];if(192!=(224&u)){var c=63&e[t++];if((u=224==(240&u)?(15&u)<<12|s<<6|c:(7&u)<<18|s<<12|c<<6|63&e[t++])<65536)i+=String.fromCharCode(u);else{var d=u-65536;i+=String.fromCharCode(55296|d>>10,56320|1023&d)}}else i+=String.fromCharCode((31&u)<<6|s)}else i+=String.fromCharCode(u)}return i},on=(e,t)=>e?Te(B,e,t):"",Pe=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,un=(e,t)=>{for(var r=e>>1,n=r+t/2,a=r;!(a>=n)&&rt[a];)++a;if(a-r>16&&Pe)return Pe.decode(rt.subarray(r,a));for(var i="",u=r;!(u>=n);++u){var s=rt[u];if(0==s)break;i+=String.fromCharCode(s)}return i},cn=(e,t,r)=>{if(null!=r||(r=2147483647),r<2)return 0;for(var n=t,a=(r-=2)<2*e.length?r/2:e.length,i=0;i<a;++i){var u=e.charCodeAt(i);mt[t>>1]=u,t+=2}return mt[t>>1]=0,t-n},ln=e=>2*e.length,fn=(e,t)=>{for(var r=0,n="";!(r>=t/4);){var a=nt[e+4*r>>2];if(0==a)break;if(++r,a>=65536){var i=a-65536;n+=String.fromCharCode(55296|i>>10,56320|1023&i)}else n+=String.fromCharCode(a)}return n},dn=(e,t,r)=>{if(null!=r||(r=2147483647),r<4)return 0;for(var n=t,a=n+r-4,i=0;i<e.length;++i){var u=e.charCodeAt(i);if(u>=55296&&u<=57343)u=65536+((1023&u)<<10)|1023&e.charCodeAt(++i);if(nt[t>>2]=u,(t+=4)+4>a)break}return nt[t>>2]=0,t-n},hn=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);n>=55296&&n<=57343&&++r,t+=4}return t},qt=[],wn={},_e=()=>{if("object"==typeof globalThis)return globalThis;function e(t){t.$$$embind_global$$$=t;var r="object"==typeof $$$embind_global$$$&&t.$$$embind_global$$$==t;return r||delete t.$$$embind_global$$$,r}if("object"==typeof $$$embind_global$$$||("object"==typeof __webpack_require__.g&&e(__webpack_require__.g)?$$$embind_global$$$=__webpack_require__.g:"object"==typeof self&&e(self)&&($$$embind_global$$$=self),"object"==typeof $$$embind_global$$$))return $$$embind_global$$$;throw Error("unable to get global object.")},Ee=(e,t)=>{var r=Q[e];return void 0===r&&T(`${t} has unknown type ${me(e)}`),r},_n=Reflect.construct,In=(e,t)=>Math.ceil(e/t)*t,Mn=e=>{var r=(e-yt.buffer.byteLength+65535)/65536|0;try{return yt.grow(r),ne(),1}catch{}},Yt={},ht=()=>{if(!ht.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:z||"./this.program"};for(var r in Yt)void 0===Yt[r]?delete t[r]:t[r]=Yt[r];var n=[];for(var r in t)n.push(`${r}=${t[r]}`);ht.strings=n}return ht.strings};var Un=[null,[],[]],Vn=(e,t)=>{var r=Un[e];0===t||10===t?((1===e?vt:G)(Te(r)),r.length=0):r.push(t)};(()=>{for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);se=e})(),(()=>{let e=_t.prototype;Object.assign(e,{isAliasOf(r){if(!(this instanceof _t&&r instanceof _t))return!1;var n=this.$$.ptrType.registeredClass,a=this.$$.ptr;r.$$=r.$$;for(var i=r.$$.ptrType.registeredClass,u=r.$$.ptr;n.baseClass;)a=n.upcast(a),n=n.baseClass;for(;i.baseClass;)u=i.upcast(u),i=i.baseClass;return n===i&&a===u},clone(){if(this.$$.ptr||Ut(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var r=dt(Object.create(Object.getPrototypeOf(this),{$$:{value:Or(this.$$)}}));return r.$$.count.value+=1,r.$$.deleteScheduled=!1,r},delete(){this.$$.ptr||Ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&T("Object already scheduled for deletion"),ue(this),ce(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Ut(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&T("Object already scheduled for deletion"),this.$$.deleteScheduled=!0,this}});const t=Symbol.dispose;t&&(e[t]=e.delete)})(),Object.assign(Ot.prototype,{getPointee(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e},destructor(e){var t;null===(t=this.rawDestructor)||void 0===t||t.call(this,e)},argPackAdvance:k,readValueFromPointer:lt,fromWireType:Ur}),f.noExitRuntime&&f.noExitRuntime,f.print&&(vt=f.print),f.printErr&&(G=f.printErr),f.wasmBinary&&(ut=f.wasmBinary),f.arguments&&f.arguments,f.thisProgram&&(z=f.thisProgram);var Nn={s:e=>{var t=new Lt(e);return t.get_caught()||(t.set_caught(!0),$t--),t.set_rethrown(!1),wt.push(t),Qn(e),Gn(e)},w:()=>{y(0,0);var e=wt.pop();Zn(e.excPtr),V=0},a:()=>Bt([]),j:e=>Bt([e]),m:(e,t)=>Bt([e,t]),P:()=>{var e=wt.pop();e||Rt("no exception to throw");var t=e.excPtr;throw e.get_rethrown()||(wt.push(e),e.set_rethrown(!0),e.set_caught(!1),$t++),V=t},p:(e,t,r)=>{throw new Lt(e).init(t,r),$t++,V=e},ga:()=>$t,d:e=>{throw V||(V=e),V},ba:()=>Rt(""),ua:e=>{var t=Ct[e];delete Ct[e];var r=t.rawConstructor,n=t.rawDestructor,a=t.fields,i=a.map((u=>u.getterReturnType)).concat(a.map((u=>u.setterArgumentType)));J([e],i,(u=>{var s={};return a.forEach(((c,d)=>{var p=c.fieldName,v=u[d],$=u[d].optional,b=c.getter,E=c.getterContext,S=u[d+a.length],A=c.setter,D=c.setterContext;s[p]={read:N=>v.fromWireType(b(E,N)),write:(N,R)=>{var L=[];A(D,N,S.toWireType(L,R)),Wt(L)},optional:$}})),[{name:t.name,fromWireType:c=>{var d={};for(var p in s)d[p]=s[p].read(c);return n(c),d},toWireType:(c,d)=>{for(var p in s)if(!(p in d)&&!s[p].optional)throw new TypeError(`Missing field: "${p}"`);var v=r();for(p in s)s[p].write(v,d[p]);return null!==c&&c.push(n,v),v},argPackAdvance:k,readValueFromPointer:lt,destructorFunction:n}]}))},aa:(e,t,r,n,a)=>{},pa:(e,t,r,n)=>{U(e,{name:t=F(t),fromWireType:function(a){return!!a},toWireType:function(a,i){return i?r:n},argPackAdvance:k,readValueFromPointer:function(a){return this.fromWireType(B[a])},destructorFunction:null})},sa:(e,t,r,n,a,i,u,s,c,d,p,v,$)=>{p=F(p),i=W(a,i),s&&(s=W(u,s)),d&&(d=W(c,d)),$=W(v,$);var b=(e=>{var t=(e=e.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return t>=48&&t<=57?`_${e}`:e})(p);de(b,(function(){xt(`Cannot construct ${p} due to unbound types`,[n])})),J([e,t,r],n?[n]:[],(E=>{var S,A;E=E[0],n?A=(S=E.registeredClass).instancePrototype:A=_t.prototype;var D=kt(p,(function(){if(Object.getPrototypeOf(this)!==N)throw new ft(`Use 'new' to construct ${p}`);if(void 0===R.constructor_body)throw new ft(`${p} has no accessible constructor`);for(var Se=arguments.length,St=new Array(Se),Dt=0;Dt<Se;Dt++)St[Dt]=arguments[Dt];var De=R.constructor_body[St.length];if(void 0===De)throw new ft(`Tried to invoke ctor of ${p} with invalid number of parameters (${St.length}) - expected (${Object.keys(R.constructor_body).toString()}) parameters instead!`);return De.apply(this,St)})),N=Object.create(A,{constructor:{value:D}});D.prototype=N;var L,At,R=new Mr(p,D,N,$,S,i,s,d);R.baseClass&&(null!==(At=(L=R.baseClass).__derivedClasses)&&void 0!==At||(L.__derivedClasses=[]),R.baseClass.__derivedClasses.push(R));var La=new Ot(p,R,!0,!1,!1),xe=new Ot(p+"*",R,!1,!1,!1),Ae=new Ot(p+" const*",R,!1,!0,!1);return le[e]={pointerType:xe,constPointerType:Ae},pe(b,D),[La,xe,Ae]}))},ra:(e,t,r,n,a,i)=>{var u=zt(t,r);a=W(n,a),J([],[e],(s=>{var c=`constructor ${(s=s[0]).name}`;if(void 0===s.registeredClass.constructor_body&&(s.registeredClass.constructor_body=[]),void 0!==s.registeredClass.constructor_body[t-1])throw new ft(`Cannot register multiple constructors with identical number of parameters (${t-1}) for class '${s.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return s.registeredClass.constructor_body[t-1]=()=>{xt(`Cannot construct ${s.name} due to unbound types`,u)},J([],u,(d=>(d.splice(1,0,null),s.registeredClass.constructor_body[t-1]=Gt(c,d,null,a,i),[]))),[]}))},H:(e,t,r,n,a,i,u,s,c,d)=>{var p=zt(r,n);t=F(t),t=ge(t),i=W(a,i),J([],[e],(v=>{var $=`${(v=v[0]).name}.${t}`;function b(){xt(`Cannot call ${$} due to unbound types`,p)}t.startsWith("@@")&&(t=Symbol[t.substring(2)]),s&&v.registeredClass.pureVirtualFunctions.push(t);var E=v.registeredClass.instancePrototype,S=E[t];return void 0===S||void 0===S.overloadTable&&S.className!==v.name&&S.argCount===r-2?(b.argCount=r-2,b.className=v.name,E[t]=b):(fe(E,t,$),E[t].overloadTable[r-2]=b),J([],p,(A=>{var D=Gt($,A,v,i,u);return void 0===E[t].overloadTable?(D.argCount=r-2,E[t]=D):E[t].overloadTable[r-2]=D,[]})),[]}))},na:e=>U(e,$e),V:(e,t,r)=>{U(e,{name:t=F(t),fromWireType:n=>n,toWireType:(n,a)=>a,argPackAdvance:k,readValueFromPointer:Zr(t,r),destructorFunction:null})},W:(e,t,r,n,a,i,u,s)=>{var c=zt(t,r);e=F(e),e=ge(e),a=W(n,a),de(e,(function(){xt(`Cannot call ${e} due to unbound types`,c)}),t-1),J([],c,(d=>{var p=[d[0],null].concat(d.slice(1));return pe(e,Gt(e,p,null,a,i),t-1),[]}))},x:(e,t,r,n,a)=>{t=F(t);let u=c=>c;if(0===n){var s=32-8*r;u=c=>c<<s>>>s,a=u(a)}U(e,{name:t,fromWireType:u,toWireType:(c,d)=>d,argPackAdvance:k,readValueFromPointer:Kr(t,r,0!==n),destructorFunction:null})},t:(e,t,r)=>{var a=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][t];function i(u){var s=P[u>>2],c=P[u+4>>2];return new a(Y.buffer,c,s)}U(e,{name:r=F(r),fromWireType:i,argPackAdvance:k,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},ta:(e,t)=>{U(e,rn)},oa:(e,t)=>{U(e,{name:t=F(t),fromWireType(r){for(var i,n=P[r>>2],a=r+4,u=a,s=0;s<=n;++s){var c=a+s;if(s==n||0==B[c]){var p=on(u,c-u);void 0===i?i=p:(i+="\0",i+=p),u=c+1}}return tt(r),i},toWireType(r,n){n instanceof ArrayBuffer&&(n=new Uint8Array(n));var a,i="string"==typeof n;i||ArrayBuffer.isView(n)&&1==n.BYTES_PER_ELEMENT||T("Cannot pass non-string to std::string"),a=i?be(n):n.length;var u=Oe(4+a+1),s=u+4;return P[u>>2]=a,i?ot(n,s,a+1):B.set(n,s),null!==r&&r.push(tt,u),u},argPackAdvance:k,readValueFromPointer:lt,destructorFunction(r){tt(r)}})},Q:(e,t,r)=>{var n,a,i,u;r=F(r),2===t?(n=un,a=cn,u=ln,i=s=>rt[s>>1]):4===t&&(n=fn,a=dn,u=hn,i=s=>P[s>>2]),U(e,{name:r,fromWireType:s=>{for(var d,c=P[s>>2],p=s+4,v=0;v<=c;++v){var $=s+4+v*t;if(v==c||0==i($)){var E=n(p,$-p);void 0===d?d=E:(d+="\0",d+=E),p=$+t}}return tt(s),d},toWireType:(s,c)=>{"string"!=typeof c&&T(`Cannot pass non-string to C++ string type ${r}`);var d=u(c),p=Oe(4+d+t);return P[p>>2]=d/t,a(c,p+4,d+t),null!==s&&s.push(tt,p),p},argPackAdvance:k,readValueFromPointer:lt,destructorFunction(s){tt(s)}})},I:(e,t,r,n,a,i)=>{Ct[e]={name:F(t),rawConstructor:W(r,n),rawDestructor:W(a,i),fields:[]}},va:(e,t,r,n,a,i,u,s,c,d)=>{Ct[e].fields.push({fieldName:F(t),getterReturnType:r,getter:W(n,a),getterContext:i,setterArgumentType:u,setter:W(s,c),setterContext:d})},qa:(e,t)=>{U(e,{isVoid:!0,name:t=F(t),argPackAdvance:0,fromWireType:()=>{},toWireType:(r,n)=>{}})},da:(e,t,r,n)=>(e=qt[e])(null,t=H.toValue(t),r,n),wa:Xt,D:e=>0===e?H.toHandle(_e()):(e=(e=>{var t=wn[e];return void 0===t?F(e):t})(e),H.toHandle(_e()[e])),ma:(e,t,r)=>{var n=((e,t)=>{for(var r=new Array(e),n=0;n<e;++n)r[n]=Ee(P[t+4*n>>2],`parameter ${n}`);return r})(e,t),a=n.shift();e--;var i=new Array(e),s=`methodCaller<(${n.map((c=>c.name)).join(", ")}) => ${a.name}>`;return(e=>{var t=qt.length;return qt.push(e),t})(kt(s,((c,d,p,v)=>{for(var $=0,b=0;b<e;++b)i[b]=n[b].readValueFromPointer(v+$),$+=n[b].argPackAdvance;var E=1===r?_n(d,i):d.apply(c,i);return((e,t,r)=>{var n=[],a=e.toWireType(n,r);return n.length&&(P[t>>2]=H.toHandle(n)),a})(a,p,E)})))},X:e=>{e>9&&(K[e+1]+=1)},Y:e=>{var t=H.toValue(e);Wt(t),Xt(e)},U:(e,t)=>{var r=(e=Ee(e,"_emval_take_value")).readValueFromPointer(t);return H.toHandle(r)},ca:(e,t,r,n)=>{var a=(new Date).getFullYear(),i=new Date(a,0,1),u=new Date(a,6,1),s=i.getTimezoneOffset(),c=u.getTimezoneOffset(),d=Math.max(s,c);P[e>>2]=60*d,nt[t>>2]=+(s!=c);var p=b=>{var E=b>=0?"-":"+",S=Math.abs(b);return`UTC${E}${String(Math.floor(S/60)).padStart(2,"0")}${String(S%60).padStart(2,"0")}`},v=p(s),$=p(c);c<s?(ot(v,r,17),ot($,n,17)):(ot(v,n,17),ot($,r,17))},ha:e=>{var t=B.length,r=2147483648;if((e>>>=0)>r)return!1;for(var n=1;n<=4;n*=2){var a=t*(1+.2/n);a=Math.min(a,e+100663296);var i=Math.min(r,In(Math.max(e,a),65536));if(Mn(i))return!0}return!1},ea:(e,t)=>{var r=0,n=0;for(var a of ht()){var i=t+r;P[e+n>>2]=i,r+=ot(a,i,1/0)+1,n+=4}return 0},fa:(e,t)=>{var r=ht();P[e>>2]=r.length;var n=0;for(var a of r)n+=be(a)+1;return P[t>>2]=n,0},ia:e=>52,_:function Wn(e,t,r,n,a){return 70},S:(e,t,r,n)=>{for(var a=0,i=0;i<r;i++){var u=P[t>>2],s=P[t+4>>2];t+=8;for(var c=0;c<s;c++)Vn(e,B[u+c]);a+=s}return P[n>>2]=a,0},K:function Pa(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(m(a),i!==i+0)throw i;y(1,0)}},C:function Ea(e,t,r,n,a,i){var u=g();try{return w(e)(t,r,n,a,i)}catch(s){if(m(u),s!==s+0)throw s;y(1,0)}},M:function na(e,t,r,n,a){var i=g();try{return w(e)(t,r,n,a)}catch(u){if(m(i),u!==u+0)throw u;y(1,0)}},R:function Ia(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(m(a),i!==i+0)throw i;y(1,0)}},q:function $a(e){var t=g();try{return w(e)()}catch(r){if(m(t),r!==r+0)throw r;y(1,0)}},b:function ia(e,t){var r=g();try{return w(e)(t)}catch(n){if(m(r),n!==n+0)throw n;y(1,0)}},E:function Ta(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(m(a),i!==i+0)throw i;y(1,0)}},ka:function xa(e,t,r){var n=g();try{return w(e)(t,r)}catch(a){if(m(n),a!==a+0)throw a;y(1,0)}},c:function sa(e,t,r){var n=g();try{return w(e)(t,r)}catch(a){if(m(n),a!==a+0)throw a;y(1,0)}},ja:function Aa(e,t,r,n,a){var i=g();try{return w(e)(t,r,n,a)}catch(u){if(m(i),u!==u+0)throw u;y(1,0)}},h:function ra(e,t,r,n){var a=g();try{return w(e)(t,r,n)}catch(i){if(m(a),i!==i+0)throw i;y(1,0)}},i:function fa(e,t,r,n,a){var i=g();try{return w(e)(t,r,n,a)}catch(u){if(m(i),u!==u+0)throw u;y(1,0)}},r:function va(e,t,r,n,a,i){var u=g();try{return w(e)(t,r,n,a,i)}catch(s){if(m(u),s!==s+0)throw s;y(1,0)}},O:function Ca(e,t,r,n,a,i,u){var s=g();try{return w(e)(t,r,n,a,i,u)}catch(c){if(m(s),c!==c+0)throw c;y(1,0)}},v:function ma(e,t,r,n,a,i,u){var s=g();try{return w(e)(t,r,n,a,i,u)}catch(c){if(m(s),c!==c+0)throw c;y(1,0)}},F:function wa(e,t,r,n,a,i,u,s){var c=g();try{return w(e)(t,r,n,a,i,u,s)}catch(d){if(m(c),d!==d+0)throw d;y(1,0)}},L:function ba(e,t,r,n,a,i,u,s,c){var d=g();try{return w(e)(t,r,n,a,i,u,s,c)}catch(p){if(m(d),p!==p+0)throw p;y(1,0)}},z:function Oa(e,t,r,n,a,i,u,s,c,d){var p=g();try{return w(e)(t,r,n,a,i,u,s,c,d)}catch(v){if(m(p),v!==v+0)throw v;y(1,0)}},J:function Ma(e,t,r,n,a,i,u,s,c,d,p,v){var $=g();try{return w(e)(t,r,n,a,i,u,s,c,d,p,v)}catch(b){if(m($),b!==b+0)throw b;y(1,0)}},$:function Fa(e,t,r,n,a,i,u){var s=g();try{return Kn(e,t,r,n,a,i,u)}catch(c){if(m(s),c!==c+0)throw c;y(1,0)}},Z:function ja(e,t,r,n,a){var i=g();try{return ta(e,t,r,n,a)}catch(u){if(m(i),u!==u+0)throw u;y(1,0)}},k:function ua(e){var t=g();try{w(e)()}catch(r){if(m(t),r!==r+0)throw r;y(1,0)}},f:function ea(e,t){var r=g();try{w(e)(t)}catch(n){if(m(r),n!==n+0)throw n;y(1,0)}},e:function oa(e,t,r){var n=g();try{w(e)(t,r)}catch(a){if(m(n),a!==a+0)throw a;y(1,0)}},g:function aa(e,t,r,n){var a=g();try{w(e)(t,r,n)}catch(i){if(m(a),i!==i+0)throw i;y(1,0)}},N:function Da(e,t,r,n,a,i,u){var s=g();try{w(e)(t,r,n,a,i,u)}catch(c){if(m(s),c!==c+0)throw c;y(1,0)}},l:function la(e,t,r,n,a){var i=g();try{w(e)(t,r,n,a)}catch(u){if(m(i),u!==u+0)throw u;y(1,0)}},la:function _a(e,t,r,n,a,i,u,s){var c=g();try{w(e)(t,r,n,a,i,u,s)}catch(d){if(m(c),d!==d+0)throw d;y(1,0)}},o:function ya(e,t,r,n,a,i){var u=g();try{w(e)(t,r,n,a,i)}catch(s){if(m(u),s!==s+0)throw s;y(1,0)}},B:function da(e,t,r,n,a,i,u){var s=g();try{w(e)(t,r,n,a,i,u)}catch(c){if(m(s),c!==c+0)throw c;y(1,0)}},u:function ga(e,t,r,n,a,i,u,s){var c=g();try{w(e)(t,r,n,a,i,u,s)}catch(d){if(m(c),d!==d+0)throw d;y(1,0)}},T:function pa(e,t,r,n,a,i,u,s,c){var d=g();try{w(e)(t,r,n,a,i,u,s,c)}catch(p){if(m(d),p!==p+0)throw p;y(1,0)}},A:function Sa(e,t,r,n,a,i,u,s,c,d){var p=g();try{w(e)(t,r,n,a,i,u,s,c,d)}catch(v){if(m(p),v!==v+0)throw v;y(1,0)}},n:function ca(e,t,r,n,a,i,u,s,c,d,p){var v=g();try{w(e)(t,r,n,a,i,u,s,c,d,p)}catch($){if(m(v),$!==$+0)throw $;y(1,0)}},G:function ha(e,t,r,n,a,i,u,s,c,d,p,v,$,b,E,S){var A=g();try{w(e)(t,r,n,a,i,u,s,c,d,p,v,$,b,E,S)}catch(D){if(m(A),D!==D+0)throw D;y(1,0)}},y:e=>e},_=await async function ur(){function e(i,u){return _=i.exports,yt=_.xa,ne(),ye=_.Ba,function er(e){var t;if(Z--,null===(t=f.monitorRunDependencies)||void 0===t||t.call(f,Z),0==Z&&ct){var r=ct;ct=null,r()}}(),_}!function tr(e){var t;Z++,null===(t=f.monitorRunDependencies)||void 0===t||t.call(f,Z)}();var r=function sr(){return{a:Nn}}();if(f.instantiateWasm)return new Promise(((i,u)=>{f.instantiateWasm(r,((s,c)=>{i(e(s))}))}));null!=gt||(gt=rr());try{return function t(i){return e(i.instance)}(await ir(ut,gt,r))}catch(i){return O(i),Promise.reject(i)}}();_.ya;var zn=_.za,tt=f._free=_.Aa,Oe=f._malloc=_.Ca,Gn=_.Da,y=_.Ea,Xn=_.Fa,qn=_.Ga,Yn=_.Ha,Zn=_.Ia,Qn=_.Ja,Jn=_.Ka;f.dynCall_viijii=_.La;var Kn=f.dynCall_iiijj=_.Ma;f.dynCall_jiji=_.Na;var ta=f.dynCall_jiiii=_.Oa;return f.dynCall_iiiiij=_.Pa,f.dynCall_iiiiijj=_.Qa,f.dynCall_iiiiiijj=_.Ra,function Ra(){if(f.preInit)for("function"==typeof f.preInit&&(f.preInit=[f.preInit]);f.preInit.length>0;)f.preInit.shift()()}(),function Zt(){function e(){var t;f.calledRun=!0,!te&&(function Je(){_.ya()}(),C(f),null===(t=f.onRuntimeInitialized)||void 0===t||t.call(f),function Ke(){if(f.postRun)for("function"==typeof f.postRun&&(f.postRun=[f.postRun]);f.postRun.length;)cr(f.postRun.shift());ae(oe)}())}Z>0?ct=Zt:(function Qe(){if(f.preRun)for("function"==typeof f.preRun&&(f.preRun=[f.preRun]);f.preRun.length;)lr(f.preRun.shift());ae(ie)}(),Z>0?ct=Zt:f.setStatus?(f.setStatus("Running..."),setTimeout((()=>{setTimeout((()=>f.setStatus("")),1),e()}),1)):e())}(),I};function Ve(o){return Ue(Kt,o)}async function ro(o,l){return async function eo(o,l,h=Mt){const f={...Mt,...h},C=await Ue(o,{fireImmediately:!0});let O,I;if("width"in l&&"height"in l&&"data"in l){const{data:x,data:{byteLength:M},width:z,height:X}=l;I=C._malloc(M),C.HEAPU8.set(x,I),O=C.readBarcodesFromPixmap(I,z,X,Be(f))}else{let x,M;if("buffer"in l)[x,M]=[l.byteLength,l];else if("byteLength"in l)[x,M]=[l.byteLength,new Uint8Array(l)];else{if(!("size"in l))throw new TypeError("Invalid input type");[x,M]=[l.size,new Uint8Array(await l.arrayBuffer())]}I=C._malloc(x),C.HEAPU8.set(M,I),O=C.readBarcodesFromImage(I,x,Be(f))}C._free(I);const j=[];for(let x=0;x<O.size();++x)j.push(Qa(O.get(x)));return j}(Kt,o,l)}const ke=[["aztec","Aztec"],["code_128","Code128"],["code_39","Code39"],["code_93","Code93"],["codabar","Codabar"],["databar","DataBar"],["databar_expanded","DataBarExpanded"],["databar_limited","DataBarLimited"],["data_matrix","DataMatrix"],["dx_film_edge","DXFilmEdge"],["ean_13","EAN-13"],["ean_8","EAN-8"],["itf","ITF"],["maxi_code","MaxiCode"],["micro_qr_code","MicroQRCode"],["pdf417","PDF417"],["qr_code","QRCode"],["rm_qr_code","rMQRCode"],["upc_a","UPC-A"],["upc_e","UPC-E"],["linear_codes","Linear-Codes"],["matrix_codes","Matrix-Codes"],["any","Any"]],no=[...ke,["unknown"]].map((o=>o[0])),Jt=new Map(ke);function ao(o){for(const[l,h]of Jt)if(o===h)return l;return"unknown"}function He(o){var l,h;try{return o instanceof(null==(h=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:h.HTMLImageElement)}catch{return!1}}function Ne(o){var l,h;try{return o instanceof(null==(h=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:h.SVGImageElement)}catch{return!1}}function ze(o){var l,h;try{return o instanceof(null==(h=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:h.HTMLVideoElement)}catch{return!1}}function Ge(o){var l,h;try{return o instanceof(null==(h=null==(l=null==o?void 0:o.ownerDocument)?void 0:l.defaultView)?void 0:h.HTMLCanvasElement)}catch{return!1}}function Xe(o){try{return o instanceof ImageBitmap||"[object ImageBitmap]"===Object.prototype.toString.call(o)}catch{return!1}}function qe(o){try{return o instanceof OffscreenCanvas||"[object OffscreenCanvas]"===Object.prototype.toString.call(o)}catch{return!1}}function Ye(o){try{return o instanceof VideoFrame||"[object VideoFrame]"===Object.prototype.toString.call(o)}catch{return!1}}async function Ze(o){if(He(o)&&!await async function ho(o){try{return await o.decode(),!0}catch{return!1}}(o))throw new DOMException("Failed to load or decode HTMLImageElement.","InvalidStateError");if(Ne(o)&&!await async function po(o){var l;try{return await(null==(l=o.decode)?void 0:l.call(o)),!0}catch{return!1}}(o))throw new DOMException("Failed to load or decode SVGImageElement.","InvalidStateError");if(Ye(o)&&function vo(o){return null===o.format}(o))throw new DOMException("VideoFrame is closed.","InvalidStateError");if(ze(o)&&(0===o.readyState||1===o.readyState))throw new DOMException("Invalid element or state.","InvalidStateError");if(Xe(o)&&function mo(o){return 0===o.width&&0===o.height}(o))throw new DOMException("The image source is detached.","InvalidStateError");const{width:l,height:h}=function oo(o){if(He(o))return{width:o.naturalWidth,height:o.naturalHeight};if(Ne(o))return{width:o.width.baseVal.value,height:o.height.baseVal.value};if(ze(o))return{width:o.videoWidth,height:o.videoHeight};if(Xe(o))return{width:o.width,height:o.height};if(Ye(o))return{width:o.displayWidth,height:o.displayHeight};if(Ge(o))return{width:o.width,height:o.height};if(qe(o))return{width:o.width,height:o.height};throw new TypeError("The provided value is not of type '(Blob or HTMLCanvasElement or HTMLImageElement or HTMLVideoElement or ImageBitmap or ImageData or OffscreenCanvas or SVGImageElement or VideoFrame)'.")}(o);if(0===l||0===h)return null;const C=function uo(o,l){try{const h=new OffscreenCanvas(o,l);if(h.getContext("2d")instanceof OffscreenCanvasRenderingContext2D)return h;throw void 0}catch{const h=document.createElement("canvas");return h.width=o,h.height=l,h}}(l,h).getContext("2d");C.drawImage(o,0,0);try{return C.getImageData(0,0,l,h)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}async function fo(o){if(function io(o){try{return o instanceof Blob||"[object Blob]"===Object.prototype.toString.call(o)}catch{return!1}}(o))return await async function co(o){let l;try{l=await createImageBitmap(o)}catch{try{if(!globalThis.Image)return o;{l=new Image;let C="";try{C=URL.createObjectURL(o),l.src=C,await l.decode()}finally{URL.revokeObjectURL(C)}}}catch{throw new DOMException("Failed to load or decode Blob.","InvalidStateError")}}return await Ze(l)}(o);if(function so(o){try{return o instanceof ImageData||"[object ImageData]"===Object.prototype.toString.call(o)}catch{return!1}}(o)){if(function yo(o){return 0===o.data.buffer.byteLength}(o))throw new DOMException("The image data has been detached.","InvalidStateError");return o}return Ge(o)||qe(o)?function lo(o){const{width:l,height:h}=o;if(0===l||0===h)return null;const f=o.getContext("2d");try{return f.getImageData(0,0,l,h)}catch{throw new DOMException("Source would taint origin.","SecurityError")}}(o):await Ze(o)}function We(o,l){return function go(o){return o instanceof DOMException||"[object DOMException]"===Object.prototype.toString.call(o)}(o)?new DOMException(`${l}: ${o.message}`,o.name):function wo(o){return o instanceof Error||"[object Error]"===Object.prototype.toString.call(o)}(o)?new o.constructor(`${l}: ${o.message}`):new Error(`${l}: ${o}`)}var pt;class Eo{constructor(l={}){var h;((o,l,h)=>{l.has(o)?Ie("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(o):l.set(o,h)})(this,pt);try{const f=null==(h=null==l?void 0:l.formats)?void 0:h.filter((C=>"unknown"!==C));if(0===(null==f?void 0:f.length))throw new TypeError("Hint option provided, but is empty.");for(const C of null!=f?f:[])if(!Jt.has(C))throw new TypeError(`Failed to read the 'formats' property from 'BarcodeDetectorOptions': The provided value '${C}' is not a valid enum value of type BarcodeFormat.`);((o,l,h,f)=>{Me(o,l,"write to private field"),f?f.call(o,h):l.set(o,h)})(this,pt,null!=f?f:[]),Ve({fireImmediately:!0}).catch((()=>{}))}catch(f){throw We(f,"Failed to construct 'BarcodeDetector'")}}static async getSupportedFormats(){return no.filter((l=>"unknown"!==l))}async detect(l){try{const h=await fo(l);if(null===h)return[];let f;const C={tryCode39ExtendedMode:!1,textMode:"Plain",formats:Fe(this,pt).map((O=>Jt.get(O)))};try{f=await ro(h,C)}catch(O){throw console.error(O),new DOMException("Barcode detection service unavailable.","NotSupportedError")}return f.map((O=>{const{topLeft:{x:I,y:j},topRight:{x,y:M},bottomLeft:{x:z,y:X},bottomRight:{x:q,y:it}}=O.position,st=Math.min(I,x,z,q),et=Math.min(j,M,X,it),vt=Math.max(I,x,z,q),G=Math.max(j,M,X,it);return{boundingBox:new DOMRectReadOnly(st,et,vt-st,G-et),rawValue:O.text,format:ao(O.format),cornerPoints:[{x:I,y:j},{x,y:M},{x:q,y:it},{x:z,y:X}]}}))}catch(h){throw We(h,"Failed to execute 'detect' on 'BarcodeDetector'")}}}pt=new WeakMap,null!=globalThis.BarcodeDetector||(globalThis.BarcodeDetector=Eo)},"./node_modules/react/cjs/react-jsx-runtime.production.js":(__unused_webpack_module,exports)=>{var REACT_ELEMENT_TYPE=Symbol.for("react.transitional.element");function jsxProd(type,config,maybeKey){var key=null;if(void 0!==maybeKey&&(key=""+maybeKey),void 0!==config.key&&(key=""+config.key),"key"in config)for(var propName in maybeKey={},config)"key"!==propName&&(maybeKey[propName]=config[propName]);else maybeKey=config;return config=maybeKey.ref,{$$typeof:REACT_ELEMENT_TYPE,type,key,ref:void 0!==config?config:null,props:maybeKey}}Symbol.for("react.fragment"),exports.jsx=jsxProd,exports.jsxs=jsxProd},"./node_modules/react/jsx-runtime.js":(module,__unused_webpack_exports,__webpack_require__)=>{module.exports=__webpack_require__("./node_modules/react/cjs/react-jsx-runtime.production.js")},"./node_modules/sdp/sdp.js":module=>{const SDPUtils={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};SDPUtils.localCName=SDPUtils.generateIdentifier(),SDPUtils.splitLines=function(blob){return blob.trim().split("\n").map((line=>line.trim()))},SDPUtils.splitSections=function(blob){return blob.split("\nm=").map(((part,index)=>(index>0?"m="+part:part).trim()+"\r\n"))},SDPUtils.getDescription=function(blob){const sections=SDPUtils.splitSections(blob);return sections&&sections[0]},SDPUtils.getMediaSections=function(blob){const sections=SDPUtils.splitSections(blob);return sections.shift(),sections},SDPUtils.matchPrefix=function(blob,prefix){return SDPUtils.splitLines(blob).filter((line=>0===line.indexOf(prefix)))},SDPUtils.parseCandidate=function(line){let parts;parts=0===line.indexOf("a=candidate:")?line.substring(12).split(" "):line.substring(10).split(" ");const candidate={foundation:parts[0],component:{1:"rtp",2:"rtcp"}[parts[1]]||parts[1],protocol:parts[2].toLowerCase(),priority:parseInt(parts[3],10),ip:parts[4],address:parts[4],port:parseInt(parts[5],10),type:parts[7]};for(let i=8;i<parts.length;i+=2)switch(parts[i]){case"raddr":candidate.relatedAddress=parts[i+1];break;case"rport":candidate.relatedPort=parseInt(parts[i+1],10);break;case"tcptype":candidate.tcpType=parts[i+1];break;case"ufrag":candidate.ufrag=parts[i+1],candidate.usernameFragment=parts[i+1];break;default:void 0===candidate[parts[i]]&&(candidate[parts[i]]=parts[i+1])}return candidate},SDPUtils.writeCandidate=function(candidate){const sdp=[];sdp.push(candidate.foundation);const component=candidate.component;"rtp"===component?sdp.push(1):"rtcp"===component?sdp.push(2):sdp.push(component),sdp.push(candidate.protocol.toUpperCase()),sdp.push(candidate.priority),sdp.push(candidate.address||candidate.ip),sdp.push(candidate.port);const type=candidate.type;return sdp.push("typ"),sdp.push(type),"host"!==type&&candidate.relatedAddress&&candidate.relatedPort&&(sdp.push("raddr"),sdp.push(candidate.relatedAddress),sdp.push("rport"),sdp.push(candidate.relatedPort)),candidate.tcpType&&"tcp"===candidate.protocol.toLowerCase()&&(sdp.push("tcptype"),sdp.push(candidate.tcpType)),(candidate.usernameFragment||candidate.ufrag)&&(sdp.push("ufrag"),sdp.push(candidate.usernameFragment||candidate.ufrag)),"candidate:"+sdp.join(" ")},SDPUtils.parseIceOptions=function(line){return line.substring(14).split(" ")},SDPUtils.parseRtpMap=function(line){let parts=line.substring(9).split(" ");const parsed={payloadType:parseInt(parts.shift(),10)};return parts=parts[0].split("/"),parsed.name=parts[0],parsed.clockRate=parseInt(parts[1],10),parsed.channels=3===parts.length?parseInt(parts[2],10):1,parsed.numChannels=parsed.channels,parsed},SDPUtils.writeRtpMap=function(codec){let pt=codec.payloadType;void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType);const channels=codec.channels||codec.numChannels||1;return"a=rtpmap:"+pt+" "+codec.name+"/"+codec.clockRate+(1!==channels?"/"+channels:"")+"\r\n"},SDPUtils.parseExtmap=function(line){const parts=line.substring(9).split(" ");return{id:parseInt(parts[0],10),direction:parts[0].indexOf("/")>0?parts[0].split("/")[1]:"sendrecv",uri:parts[1],attributes:parts.slice(2).join(" ")}},SDPUtils.writeExtmap=function(headerExtension){return"a=extmap:"+(headerExtension.id||headerExtension.preferredId)+(headerExtension.direction&&"sendrecv"!==headerExtension.direction?"/"+headerExtension.direction:"")+" "+headerExtension.uri+(headerExtension.attributes?" "+headerExtension.attributes:"")+"\r\n"},SDPUtils.parseFmtp=function(line){const parsed={};let kv;const parts=line.substring(line.indexOf(" ")+1).split(";");for(let j=0;j<parts.length;j++)kv=parts[j].trim().split("="),parsed[kv[0].trim()]=kv[1];return parsed},SDPUtils.writeFmtp=function(codec){let line="",pt=codec.payloadType;if(void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.parameters&&Object.keys(codec.parameters).length){const params=[];Object.keys(codec.parameters).forEach((param=>{void 0!==codec.parameters[param]?params.push(param+"="+codec.parameters[param]):params.push(param)})),line+="a=fmtp:"+pt+" "+params.join(";")+"\r\n"}return line},SDPUtils.parseRtcpFb=function(line){const parts=line.substring(line.indexOf(" ")+1).split(" ");return{type:parts.shift(),parameter:parts.join(" ")}},SDPUtils.writeRtcpFb=function(codec){let lines="",pt=codec.payloadType;return void 0!==codec.preferredPayloadType&&(pt=codec.preferredPayloadType),codec.rtcpFeedback&&codec.rtcpFeedback.length&&codec.rtcpFeedback.forEach((fb=>{lines+="a=rtcp-fb:"+pt+" "+fb.type+(fb.parameter&&fb.parameter.length?" "+fb.parameter:"")+"\r\n"})),lines},SDPUtils.parseSsrcMedia=function(line){const sp=line.indexOf(" "),parts={ssrc:parseInt(line.substring(7,sp),10)},colon=line.indexOf(":",sp);return colon>-1?(parts.attribute=line.substring(sp+1,colon),parts.value=line.substring(colon+1)):parts.attribute=line.substring(sp+1),parts},SDPUtils.parseSsrcGroup=function(line){const parts=line.substring(13).split(" ");return{semantics:parts.shift(),ssrcs:parts.map((ssrc=>parseInt(ssrc,10)))}},SDPUtils.getMid=function(mediaSection){const mid=SDPUtils.matchPrefix(mediaSection,"a=mid:")[0];if(mid)return mid.substring(6)},SDPUtils.parseFingerprint=function(line){const parts=line.substring(14).split(" ");return{algorithm:parts[0].toLowerCase(),value:parts[1].toUpperCase()}},SDPUtils.getDtlsParameters=function(mediaSection,sessionpart){return{role:"auto",fingerprints:SDPUtils.matchPrefix(mediaSection+sessionpart,"a=fingerprint:").map(SDPUtils.parseFingerprint)}},SDPUtils.writeDtlsParameters=function(params,setupType){let sdp="a=setup:"+setupType+"\r\n";return params.fingerprints.forEach((fp=>{sdp+="a=fingerprint:"+fp.algorithm+" "+fp.value+"\r\n"})),sdp},SDPUtils.parseCryptoLine=function(line){const parts=line.substring(9).split(" ");return{tag:parseInt(parts[0],10),cryptoSuite:parts[1],keyParams:parts[2],sessionParams:parts.slice(3)}},SDPUtils.writeCryptoLine=function(parameters){return"a=crypto:"+parameters.tag+" "+parameters.cryptoSuite+" "+("object"==typeof parameters.keyParams?SDPUtils.writeCryptoKeyParams(parameters.keyParams):parameters.keyParams)+(parameters.sessionParams?" "+parameters.sessionParams.join(" "):"")+"\r\n"},SDPUtils.parseCryptoKeyParams=function(keyParams){if(0!==keyParams.indexOf("inline:"))return null;const parts=keyParams.substring(7).split("|");return{keyMethod:"inline",keySalt:parts[0],lifeTime:parts[1],mkiValue:parts[2]?parts[2].split(":")[0]:void 0,mkiLength:parts[2]?parts[2].split(":")[1]:void 0}},SDPUtils.writeCryptoKeyParams=function(keyParams){return keyParams.keyMethod+":"+keyParams.keySalt+(keyParams.lifeTime?"|"+keyParams.lifeTime:"")+(keyParams.mkiValue&&keyParams.mkiLength?"|"+keyParams.mkiValue+":"+keyParams.mkiLength:"")},SDPUtils.getCryptoParameters=function(mediaSection,sessionpart){return SDPUtils.matchPrefix(mediaSection+sessionpart,"a=crypto:").map(SDPUtils.parseCryptoLine)},SDPUtils.getIceParameters=function(mediaSection,sessionpart){const ufrag=SDPUtils.matchPrefix(mediaSection+sessionpart,"a=ice-ufrag:")[0],pwd=SDPUtils.matchPrefix(mediaSection+sessionpart,"a=ice-pwd:")[0];return ufrag&&pwd?{usernameFragment:ufrag.substring(12),password:pwd.substring(10)}:null},SDPUtils.writeIceParameters=function(params){let sdp="a=ice-ufrag:"+params.usernameFragment+"\r\na=ice-pwd:"+params.password+"\r\n";return params.iceLite&&(sdp+="a=ice-lite\r\n"),sdp},SDPUtils.parseRtpParameters=function(mediaSection){const description={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},mline=SDPUtils.splitLines(mediaSection)[0].split(" ");description.profile=mline[2];for(let i=3;i<mline.length;i++){const pt=mline[i],rtpmapline=SDPUtils.matchPrefix(mediaSection,"a=rtpmap:"+pt+" ")[0];if(rtpmapline){const codec=SDPUtils.parseRtpMap(rtpmapline),fmtps=SDPUtils.matchPrefix(mediaSection,"a=fmtp:"+pt+" ");switch(codec.parameters=fmtps.length?SDPUtils.parseFmtp(fmtps[0]):{},codec.rtcpFeedback=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:"+pt+" ").map(SDPUtils.parseRtcpFb),description.codecs.push(codec),codec.name.toUpperCase()){case"RED":case"ULPFEC":description.fecMechanisms.push(codec.name.toUpperCase())}}}SDPUtils.matchPrefix(mediaSection,"a=extmap:").forEach((line=>{description.headerExtensions.push(SDPUtils.parseExtmap(line))}));const wildcardRtcpFb=SDPUtils.matchPrefix(mediaSection,"a=rtcp-fb:* ").map(SDPUtils.parseRtcpFb);return description.codecs.forEach((codec=>{wildcardRtcpFb.forEach((fb=>{codec.rtcpFeedback.find((existingFeedback=>existingFeedback.type===fb.type&&existingFeedback.parameter===fb.parameter))||codec.rtcpFeedback.push(fb)}))})),description},SDPUtils.writeRtpDescription=function(kind,caps){let sdp="";sdp+="m="+kind+" ",sdp+=caps.codecs.length>0?"9":"0",sdp+=" "+(caps.profile||"UDP/TLS/RTP/SAVPF")+" ",sdp+=caps.codecs.map((codec=>void 0!==codec.preferredPayloadType?codec.preferredPayloadType:codec.payloadType)).join(" ")+"\r\n",sdp+="c=IN IP4 0.0.0.0\r\n",sdp+="a=rtcp:9 IN IP4 0.0.0.0\r\n",caps.codecs.forEach((codec=>{sdp+=SDPUtils.writeRtpMap(codec),sdp+=SDPUtils.writeFmtp(codec),sdp+=SDPUtils.writeRtcpFb(codec)}));let maxptime=0;return caps.codecs.forEach((codec=>{codec.maxptime>maxptime&&(maxptime=codec.maxptime)})),maxptime>0&&(sdp+="a=maxptime:"+maxptime+"\r\n"),caps.headerExtensions&&caps.headerExtensions.forEach((extension=>{sdp+=SDPUtils.writeExtmap(extension)})),sdp},SDPUtils.parseRtpEncodingParameters=function(mediaSection){const encodingParameters=[],description=SDPUtils.parseRtpParameters(mediaSection),hasRed=-1!==description.fecMechanisms.indexOf("RED"),hasUlpfec=-1!==description.fecMechanisms.indexOf("ULPFEC"),ssrcs=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map((line=>SDPUtils.parseSsrcMedia(line))).filter((parts=>"cname"===parts.attribute)),primarySsrc=ssrcs.length>0&&ssrcs[0].ssrc;let secondarySsrc;const flows=SDPUtils.matchPrefix(mediaSection,"a=ssrc-group:FID").map((line=>line.substring(17).split(" ").map((part=>parseInt(part,10)))));flows.length>0&&flows[0].length>1&&flows[0][0]===primarySsrc&&(secondarySsrc=flows[0][1]),description.codecs.forEach((codec=>{if("RTX"===codec.name.toUpperCase()&&codec.parameters.apt){let encParam={ssrc:primarySsrc,codecPayloadType:parseInt(codec.parameters.apt,10)};primarySsrc&&secondarySsrc&&(encParam.rtx={ssrc:secondarySsrc}),encodingParameters.push(encParam),hasRed&&(encParam=JSON.parse(JSON.stringify(encParam)),encParam.fec={ssrc:primarySsrc,mechanism:hasUlpfec?"red+ulpfec":"red"},encodingParameters.push(encParam))}})),0===encodingParameters.length&&primarySsrc&&encodingParameters.push({ssrc:primarySsrc});let bandwidth=SDPUtils.matchPrefix(mediaSection,"b=");return bandwidth.length&&(bandwidth=0===bandwidth[0].indexOf("b=TIAS:")?parseInt(bandwidth[0].substring(7),10):0===bandwidth[0].indexOf("b=AS:")?1e3*parseInt(bandwidth[0].substring(5),10)*.95-16e3:void 0,encodingParameters.forEach((params=>{params.maxBitrate=bandwidth}))),encodingParameters},SDPUtils.parseRtcpParameters=function(mediaSection){const rtcpParameters={},remoteSsrc=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map((line=>SDPUtils.parseSsrcMedia(line))).filter((obj=>"cname"===obj.attribute))[0];remoteSsrc&&(rtcpParameters.cname=remoteSsrc.value,rtcpParameters.ssrc=remoteSsrc.ssrc);const rsize=SDPUtils.matchPrefix(mediaSection,"a=rtcp-rsize");rtcpParameters.reducedSize=rsize.length>0,rtcpParameters.compound=0===rsize.length;const mux=SDPUtils.matchPrefix(mediaSection,"a=rtcp-mux");return rtcpParameters.mux=mux.length>0,rtcpParameters},SDPUtils.writeRtcpParameters=function(rtcpParameters){let sdp="";return rtcpParameters.reducedSize&&(sdp+="a=rtcp-rsize\r\n"),rtcpParameters.mux&&(sdp+="a=rtcp-mux\r\n"),void 0!==rtcpParameters.ssrc&&rtcpParameters.cname&&(sdp+="a=ssrc:"+rtcpParameters.ssrc+" cname:"+rtcpParameters.cname+"\r\n"),sdp},SDPUtils.parseMsid=function(mediaSection){let parts;const spec=SDPUtils.matchPrefix(mediaSection,"a=msid:");if(1===spec.length)return parts=spec[0].substring(7).split(" "),{stream:parts[0],track:parts[1]};const planB=SDPUtils.matchPrefix(mediaSection,"a=ssrc:").map((line=>SDPUtils.parseSsrcMedia(line))).filter((msidParts=>"msid"===msidParts.attribute));return planB.length>0?(parts=planB[0].value.split(" "),{stream:parts[0],track:parts[1]}):void 0},SDPUtils.parseSctpDescription=function(mediaSection){const mline=SDPUtils.parseMLine(mediaSection),maxSizeLine=SDPUtils.matchPrefix(mediaSection,"a=max-message-size:");let maxMessageSize;maxSizeLine.length>0&&(maxMessageSize=parseInt(maxSizeLine[0].substring(19),10)),isNaN(maxMessageSize)&&(maxMessageSize=65536);const sctpPort=SDPUtils.matchPrefix(mediaSection,"a=sctp-port:");if(sctpPort.length>0)return{port:parseInt(sctpPort[0].substring(12),10),protocol:mline.fmt,maxMessageSize};const sctpMapLines=SDPUtils.matchPrefix(mediaSection,"a=sctpmap:");if(sctpMapLines.length>0){const parts=sctpMapLines[0].substring(10).split(" ");return{port:parseInt(parts[0],10),protocol:parts[1],maxMessageSize}}},SDPUtils.writeSctpDescription=function(media,sctp){let output=[];return output="DTLS/SCTP"!==media.protocol?["m="+media.kind+" 9 "+media.protocol+" "+sctp.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+sctp.port+"\r\n"]:["m="+media.kind+" 9 "+media.protocol+" "+sctp.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+sctp.port+" "+sctp.protocol+" 65535\r\n"],void 0!==sctp.maxMessageSize&&output.push("a=max-message-size:"+sctp.maxMessageSize+"\r\n"),output.join("")},SDPUtils.generateSessionId=function(){return Math.random().toString().substr(2,22)},SDPUtils.writeSessionBoilerplate=function(sessId,sessVer,sessUser){let sessionId;const version=void 0!==sessVer?sessVer:2;sessionId=sessId||SDPUtils.generateSessionId();return"v=0\r\no="+(sessUser||"thisisadapterortc")+" "+sessionId+" "+version+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},SDPUtils.getDirection=function(mediaSection,sessionpart){const lines=SDPUtils.splitLines(mediaSection);for(let i=0;i<lines.length;i++)switch(lines[i]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return lines[i].substring(2)}return sessionpart?SDPUtils.getDirection(sessionpart):"sendrecv"},SDPUtils.getKind=function(mediaSection){return SDPUtils.splitLines(mediaSection)[0].split(" ")[0].substring(2)},SDPUtils.isRejected=function(mediaSection){return"0"===mediaSection.split(" ",2)[1]},SDPUtils.parseMLine=function(mediaSection){const parts=SDPUtils.splitLines(mediaSection)[0].substring(2).split(" ");return{kind:parts[0],port:parseInt(parts[1],10),protocol:parts[2],fmt:parts.slice(3).join(" ")}},SDPUtils.parseOLine=function(mediaSection){const parts=SDPUtils.matchPrefix(mediaSection,"o=")[0].substring(2).split(" ");return{username:parts[0],sessionId:parts[1],sessionVersion:parseInt(parts[2],10),netType:parts[3],addressType:parts[4],address:parts[5]}},SDPUtils.isValidSDP=function(blob){if("string"!=typeof blob||0===blob.length)return!1;const lines=SDPUtils.splitLines(blob);for(let i=0;i<lines.length;i++)if(lines[i].length<2||"="!==lines[i].charAt(1))return!1;return!0},module.exports=SDPUtils},"./node_modules/webrtc-adapter/src/js/adapter_core.js":(__unused_webpack_module,__unused_webpack___webpack_exports__,__webpack_require__)=>{var chrome_shim_namespaceObject={};__webpack_require__.r(chrome_shim_namespaceObject),__webpack_require__.d(chrome_shim_namespaceObject,{fixNegotiationNeeded:()=>fixNegotiationNeeded,shimAddTrackRemoveTrack:()=>shimAddTrackRemoveTrack,shimAddTrackRemoveTrackWithNative:()=>shimAddTrackRemoveTrackWithNative,shimGetSendersWithDtmf:()=>shimGetSendersWithDtmf,shimGetUserMedia:()=>shimGetUserMedia,shimMediaStream:()=>shimMediaStream,shimOnTrack:()=>shimOnTrack,shimPeerConnection:()=>shimPeerConnection,shimSenderReceiverGetStats:()=>shimSenderReceiverGetStats});var firefox_shim_namespaceObject={};__webpack_require__.r(firefox_shim_namespaceObject),__webpack_require__.d(firefox_shim_namespaceObject,{shimAddTransceiver:()=>shimAddTransceiver,shimCreateAnswer:()=>shimCreateAnswer,shimCreateOffer:()=>shimCreateOffer,shimGetDisplayMedia:()=>shimGetDisplayMedia,shimGetParameters:()=>shimGetParameters,shimGetUserMedia:()=>getusermedia_shimGetUserMedia,shimOnTrack:()=>firefox_shim_shimOnTrack,shimPeerConnection:()=>firefox_shim_shimPeerConnection,shimRTCDataChannel:()=>shimRTCDataChannel,shimReceiverGetStats:()=>shimReceiverGetStats,shimRemoveStream:()=>shimRemoveStream,shimSenderGetStats:()=>shimSenderGetStats});var safari_shim_namespaceObject={};__webpack_require__.r(safari_shim_namespaceObject),__webpack_require__.d(safari_shim_namespaceObject,{shimAudioContext:()=>shimAudioContext,shimCallbacksAPI:()=>shimCallbacksAPI,shimConstraints:()=>shimConstraints,shimCreateOfferLegacy:()=>shimCreateOfferLegacy,shimGetUserMedia:()=>safari_shim_shimGetUserMedia,shimLocalStreamsAPI:()=>shimLocalStreamsAPI,shimRTCIceServerUrls:()=>shimRTCIceServerUrls,shimRemoteStreamsAPI:()=>shimRemoteStreamsAPI,shimTrackEventTransceiver:()=>shimTrackEventTransceiver});var common_shim_namespaceObject={};__webpack_require__.r(common_shim_namespaceObject),__webpack_require__.d(common_shim_namespaceObject,{removeExtmapAllowMixed:()=>removeExtmapAllowMixed,shimAddIceCandidateNullOrEmpty:()=>shimAddIceCandidateNullOrEmpty,shimConnectionState:()=>shimConnectionState,shimMaxMessageSize:()=>shimMaxMessageSize,shimParameterlessSetLocalDescription:()=>shimParameterlessSetLocalDescription,shimRTCIceCandidate:()=>shimRTCIceCandidate,shimRTCIceCandidateRelayProtocol:()=>shimRTCIceCandidateRelayProtocol,shimSendThrowTypeError:()=>shimSendThrowTypeError});let logDisabled_=!0,deprecationWarnings_=!0;function extractVersion(uastring,expr,pos){const match=uastring.match(expr);return match&&match.length>=pos&&parseFloat(match[pos],10)}function wrapPeerConnectionEvent(window,eventNameToWrap,wrapper){if(!window.RTCPeerConnection)return;const proto=window.RTCPeerConnection.prototype,nativeAddEventListener=proto.addEventListener;proto.addEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap)return nativeAddEventListener.apply(this,arguments);const wrappedCallback=e=>{const modifiedEvent=wrapper(e);modifiedEvent&&(cb.handleEvent?cb.handleEvent(modifiedEvent):cb(modifiedEvent))};return this._eventMap=this._eventMap||{},this._eventMap[eventNameToWrap]||(this._eventMap[eventNameToWrap]=new Map),this._eventMap[eventNameToWrap].set(cb,wrappedCallback),nativeAddEventListener.apply(this,[nativeEventName,wrappedCallback])};const nativeRemoveEventListener=proto.removeEventListener;proto.removeEventListener=function(nativeEventName,cb){if(nativeEventName!==eventNameToWrap||!this._eventMap||!this._eventMap[eventNameToWrap])return nativeRemoveEventListener.apply(this,arguments);if(!this._eventMap[eventNameToWrap].has(cb))return nativeRemoveEventListener.apply(this,arguments);const unwrappedCb=this._eventMap[eventNameToWrap].get(cb);return this._eventMap[eventNameToWrap].delete(cb),0===this._eventMap[eventNameToWrap].size&&delete this._eventMap[eventNameToWrap],0===Object.keys(this._eventMap).length&&delete this._eventMap,nativeRemoveEventListener.apply(this,[nativeEventName,unwrappedCb])},Object.defineProperty(proto,"on"+eventNameToWrap,{get(){return this["_on"+eventNameToWrap]},set(cb){this["_on"+eventNameToWrap]&&(this.removeEventListener(eventNameToWrap,this["_on"+eventNameToWrap]),delete this["_on"+eventNameToWrap]),cb&&this.addEventListener(eventNameToWrap,this["_on"+eventNameToWrap]=cb)},enumerable:!0,configurable:!0})}function disableLog(bool){return"boolean"!=typeof bool?new Error("Argument type: "+typeof bool+". Please use a boolean."):(logDisabled_=bool,bool?"adapter.js logging disabled":"adapter.js logging enabled")}function disableWarnings(bool){return"boolean"!=typeof bool?new Error("Argument type: "+typeof bool+". Please use a boolean."):(deprecationWarnings_=!bool,"adapter.js deprecation warnings "+(bool?"disabled":"enabled"))}function log(){if("object"==typeof window){if(logDisabled_)return;"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,arguments)}}function deprecated(oldMethod,newMethod){deprecationWarnings_&&console.warn(oldMethod+" is deprecated, please use "+newMethod+" instead.")}function isObject(val){return"[object Object]"===Object.prototype.toString.call(val)}function compactObject(data){return isObject(data)?Object.keys(data).reduce((function(accumulator,key){const isObj=isObject(data[key]),value=isObj?compactObject(data[key]):data[key],isEmptyObject=isObj&&!Object.keys(value).length;return void 0===value||isEmptyObject?accumulator:Object.assign(accumulator,{[key]:value})}),{}):data}function walkStats(stats,base,resultSet){base&&!resultSet.has(base.id)&&(resultSet.set(base.id,base),Object.keys(base).forEach((name=>{name.endsWith("Id")?walkStats(stats,stats.get(base[name]),resultSet):name.endsWith("Ids")&&base[name].forEach((id=>{walkStats(stats,stats.get(id),resultSet)}))})))}function filterStats(result,track,outbound){const streamStatsType=outbound?"outbound-rtp":"inbound-rtp",filteredResult=new Map;if(null===track)return filteredResult;const trackStats=[];return result.forEach((value=>{"track"===value.type&&value.trackIdentifier===track.id&&trackStats.push(value)})),trackStats.forEach((trackStat=>{result.forEach((stats=>{stats.type===streamStatsType&&stats.trackId===trackStat.id&&walkStats(result,stats,filteredResult)}))})),filteredResult}const logging=log;function shimGetUserMedia(window,browserDetails){const navigator=window&&window.navigator;if(!navigator.mediaDevices)return;const constraintsToChrome_=function(c){if("object"!=typeof c||c.mandatory||c.optional)return c;const cc={};return Object.keys(c).forEach((key=>{if("require"===key||"advanced"===key||"mediaSource"===key)return;const r="object"==typeof c[key]?c[key]:{ideal:c[key]};void 0!==r.exact&&"number"==typeof r.exact&&(r.min=r.max=r.exact);const oldname_=function(prefix,name){return prefix?prefix+name.charAt(0).toUpperCase()+name.slice(1):"deviceId"===name?"sourceId":name};if(void 0!==r.ideal){cc.optional=cc.optional||[];let oc={};"number"==typeof r.ideal?(oc[oldname_("min",key)]=r.ideal,cc.optional.push(oc),oc={},oc[oldname_("max",key)]=r.ideal,cc.optional.push(oc)):(oc[oldname_("",key)]=r.ideal,cc.optional.push(oc))}void 0!==r.exact&&"number"!=typeof r.exact?(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_("",key)]=r.exact):["min","max"].forEach((mix=>{void 0!==r[mix]&&(cc.mandatory=cc.mandatory||{},cc.mandatory[oldname_(mix,key)]=r[mix])}))})),c.advanced&&(cc.optional=(cc.optional||[]).concat(c.advanced)),cc},shimConstraints_=function(constraints,func){if(browserDetails.version>=61)return func(constraints);if((constraints=JSON.parse(JSON.stringify(constraints)))&&"object"==typeof constraints.audio){const remap=function(obj,a,b){a in obj&&!(b in obj)&&(obj[b]=obj[a],delete obj[a])};remap((constraints=JSON.parse(JSON.stringify(constraints))).audio,"autoGainControl","googAutoGainControl"),remap(constraints.audio,"noiseSuppression","googNoiseSuppression"),constraints.audio=constraintsToChrome_(constraints.audio)}if(constraints&&"object"==typeof constraints.video){let face=constraints.video.facingMode;face=face&&("object"==typeof face?face:{ideal:face});const getSupportedFacingModeLies=browserDetails.version<66;if(face&&("user"===face.exact||"environment"===face.exact||"user"===face.ideal||"environment"===face.ideal)&&(!navigator.mediaDevices.getSupportedConstraints||!navigator.mediaDevices.getSupportedConstraints().facingMode||getSupportedFacingModeLies)){let matches;if(delete constraints.video.facingMode,"environment"===face.exact||"environment"===face.ideal?matches=["back","rear"]:"user"!==face.exact&&"user"!==face.ideal||(matches=["front"]),matches)return navigator.mediaDevices.enumerateDevices().then((devices=>{let dev=(devices=devices.filter((d=>"videoinput"===d.kind))).find((d=>matches.some((match=>d.label.toLowerCase().includes(match)))));return!dev&&devices.length&&matches.includes("back")&&(dev=devices[devices.length-1]),dev&&(constraints.video.deviceId=face.exact?{exact:dev.deviceId}:{ideal:dev.deviceId}),constraints.video=constraintsToChrome_(constraints.video),logging("chrome: "+JSON.stringify(constraints)),func(constraints)}))}constraints.video=constraintsToChrome_(constraints.video)}return logging("chrome: "+JSON.stringify(constraints)),func(constraints)},shimError_=function(e){return browserDetails.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(navigator.getUserMedia=function(constraints,onSuccess,onError){shimConstraints_(constraints,(c=>{navigator.webkitGetUserMedia(c,onSuccess,(e=>{onError&&onError(shimError_(e))}))}))}.bind(navigator),navigator.mediaDevices.getUserMedia){const origGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(cs){return shimConstraints_(cs,(c=>origGetUserMedia(c).then((stream=>{if(c.audio&&!stream.getAudioTracks().length||c.video&&!stream.getVideoTracks().length)throw stream.getTracks().forEach((track=>{track.stop()})),new DOMException("","NotFoundError");return stream}),(e=>Promise.reject(shimError_(e))))))}}}function shimMediaStream(window){window.MediaStream=window.MediaStream||window.webkitMediaStream}function shimOnTrack(window){if("object"==typeof window&&window.RTCPeerConnection&&!("ontrack"in window.RTCPeerConnection.prototype)){Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(f){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=f)},enumerable:!0,configurable:!0});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){return this._ontrackpoly||(this._ontrackpoly=e=>{e.stream.addEventListener("addtrack",(te=>{let receiver;receiver=window.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((r=>r.track&&r.track.id===te.track.id)):{track:te.track};const event=new Event("track");event.track=te.track,event.receiver=receiver,event.transceiver={receiver},event.streams=[e.stream],this.dispatchEvent(event)})),e.stream.getTracks().forEach((track=>{let receiver;receiver=window.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((r=>r.track&&r.track.id===track.id)):{track};const event=new Event("track");event.track=track,event.receiver=receiver,event.transceiver={receiver},event.streams=[e.stream],this.dispatchEvent(event)}))},this.addEventListener("addstream",this._ontrackpoly)),origSetRemoteDescription.apply(this,arguments)}}else wrapPeerConnectionEvent(window,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function shimGetSendersWithDtmf(window){if("object"==typeof window&&window.RTCPeerConnection&&!("getSenders"in window.RTCPeerConnection.prototype)&&"createDTMFSender"in window.RTCPeerConnection.prototype){const shimSenderWithDtmf=function(pc,track){return{track,get dtmf(){return void 0===this._dtmf&&("audio"===track.kind?this._dtmf=pc.createDTMFSender(track):this._dtmf=null),this._dtmf},_pc:pc}};if(!window.RTCPeerConnection.prototype.getSenders){window.RTCPeerConnection.prototype.getSenders=function getSenders(){return this._senders=this._senders||[],this._senders.slice()};const origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){let sender=origAddTrack.apply(this,arguments);return sender||(sender=shimSenderWithDtmf(this,track),this._senders.push(sender)),sender};const origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){origRemoveTrack.apply(this,arguments);const idx=this._senders.indexOf(sender);-1!==idx&&this._senders.splice(idx,1)}}const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._senders=this._senders||[],origAddStream.apply(this,[stream]),stream.getTracks().forEach((track=>{this._senders.push(shimSenderWithDtmf(this,track))}))};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._senders=this._senders||[],origRemoveStream.apply(this,[stream]),stream.getTracks().forEach((track=>{const sender=this._senders.find((s=>s.track===track));sender&&this._senders.splice(this._senders.indexOf(sender),1)}))}}else if("object"==typeof window&&window.RTCPeerConnection&&"getSenders"in window.RTCPeerConnection.prototype&&"createDTMFSender"in window.RTCPeerConnection.prototype&&window.RTCRtpSender&&!("dtmf"in window.RTCRtpSender.prototype)){const origGetSenders=window.RTCPeerConnection.prototype.getSenders;window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach((sender=>sender._pc=this)),senders},Object.defineProperty(window.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function shimSenderReceiverGetStats(window){if(!("object"==typeof window&&window.RTCPeerConnection&&window.RTCRtpSender&&window.RTCRtpReceiver))return;if(!("getStats"in window.RTCRtpSender.prototype)){const origGetSenders=window.RTCPeerConnection.prototype.getSenders;origGetSenders&&(window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach((sender=>sender._pc=this)),senders});const origAddTrack=window.RTCPeerConnection.prototype.addTrack;origAddTrack&&(window.RTCPeerConnection.prototype.addTrack=function addTrack(){const sender=origAddTrack.apply(this,arguments);return sender._pc=this,sender}),window.RTCRtpSender.prototype.getStats=function getStats(){const sender=this;return this._pc.getStats().then((result=>filterStats(result,sender.track,!0)))}}if(!("getStats"in window.RTCRtpReceiver.prototype)){const origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;origGetReceivers&&(window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){const receivers=origGetReceivers.apply(this,[]);return receivers.forEach((receiver=>receiver._pc=this)),receivers}),wrapPeerConnectionEvent(window,"track",(e=>(e.receiver._pc=e.srcElement,e))),window.RTCRtpReceiver.prototype.getStats=function getStats(){const receiver=this;return this._pc.getStats().then((result=>filterStats(result,receiver.track,!1)))}}if(!("getStats"in window.RTCRtpSender.prototype)||!("getStats"in window.RTCRtpReceiver.prototype))return;const origGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){if(arguments.length>0&&arguments[0]instanceof window.MediaStreamTrack){const track=arguments[0];let sender,receiver,err;return this.getSenders().forEach((s=>{s.track===track&&(sender?err=!0:sender=s)})),this.getReceivers().forEach((r=>(r.track===track&&(receiver?err=!0:receiver=r),r.track===track))),err||sender&&receiver?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):sender?sender.getStats():receiver?receiver.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return origGetStats.apply(this,arguments)}}function shimAddTrackRemoveTrackWithNative(window){window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((streamId=>this._shimmedLocalStreams[streamId][0]))};const origAddTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){if(!stream)return origAddTrack.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const sender=origAddTrack.apply(this,arguments);return this._shimmedLocalStreams[stream.id]?-1===this._shimmedLocalStreams[stream.id].indexOf(sender)&&this._shimmedLocalStreams[stream.id].push(sender):this._shimmedLocalStreams[stream.id]=[stream,sender],sender};const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._shimmedLocalStreams=this._shimmedLocalStreams||{},stream.getTracks().forEach((track=>{if(this.getSenders().find((s=>s.track===track)))throw new DOMException("Track already exists.","InvalidAccessError")}));const existingSenders=this.getSenders();origAddStream.apply(this,arguments);const newSenders=this.getSenders().filter((newSender=>-1===existingSenders.indexOf(newSender)));this._shimmedLocalStreams[stream.id]=[stream].concat(newSenders)};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[stream.id],origRemoveStream.apply(this,arguments)};const origRemoveTrack=window.RTCPeerConnection.prototype.removeTrack;window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},sender&&Object.keys(this._shimmedLocalStreams).forEach((streamId=>{const idx=this._shimmedLocalStreams[streamId].indexOf(sender);-1!==idx&&this._shimmedLocalStreams[streamId].splice(idx,1),1===this._shimmedLocalStreams[streamId].length&&delete this._shimmedLocalStreams[streamId]})),origRemoveTrack.apply(this,arguments)}}function shimAddTrackRemoveTrack(window,browserDetails){if(!window.RTCPeerConnection)return;if(window.RTCPeerConnection.prototype.addTrack&&browserDetails.version>=65)return shimAddTrackRemoveTrackWithNative(window);const origGetLocalStreams=window.RTCPeerConnection.prototype.getLocalStreams;window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){const nativeStreams=origGetLocalStreams.apply(this);return this._reverseStreams=this._reverseStreams||{},nativeStreams.map((stream=>this._reverseStreams[stream.id]))};const origAddStream=window.RTCPeerConnection.prototype.addStream;window.RTCPeerConnection.prototype.addStream=function addStream(stream){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},stream.getTracks().forEach((track=>{if(this.getSenders().find((s=>s.track===track)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[stream.id]){const newStream=new window.MediaStream(stream.getTracks());this._streams[stream.id]=newStream,this._reverseStreams[newStream.id]=stream,stream=newStream}origAddStream.apply(this,[stream])};const origRemoveStream=window.RTCPeerConnection.prototype.removeStream;function replaceInternalStreamId(pc,description){let sdp=description.sdp;return Object.keys(pc._reverseStreams||[]).forEach((internalId=>{const externalStream=pc._reverseStreams[internalId],internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(internalStream.id,"g"),externalStream.id)})),new RTCSessionDescription({type:description.type,sdp})}window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},origRemoveStream.apply(this,[this._streams[stream.id]||stream]),delete this._reverseStreams[this._streams[stream.id]?this._streams[stream.id].id:stream.id],delete this._streams[stream.id]},window.RTCPeerConnection.prototype.addTrack=function addTrack(track,stream){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const streams=[].slice.call(arguments,1);if(1!==streams.length||!streams[0].getTracks().find((t=>t===track)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((s=>s.track===track)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const oldStream=this._streams[stream.id];if(oldStream)oldStream.addTrack(track),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const newStream=new window.MediaStream([track]);this._streams[stream.id]=newStream,this._reverseStreams[newStream.id]=stream,this.addStream(newStream)}return this.getSenders().find((s=>s.track===track))},["createOffer","createAnswer"].forEach((function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){const args=arguments;return arguments.length&&"function"==typeof arguments[0]?nativeMethod.apply(this,[description=>{const desc=replaceInternalStreamId(this,description);args[0].apply(null,[desc])},err=>{args[1]&&args[1].apply(null,err)},arguments[2]]):nativeMethod.apply(this,arguments).then((description=>replaceInternalStreamId(this,description)))}};window.RTCPeerConnection.prototype[method]=methodObj[method]}));const origSetLocalDescription=window.RTCPeerConnection.prototype.setLocalDescription;window.RTCPeerConnection.prototype.setLocalDescription=function setLocalDescription(){return arguments.length&&arguments[0].type?(arguments[0]=function replaceExternalStreamId(pc,description){let sdp=description.sdp;return Object.keys(pc._reverseStreams||[]).forEach((internalId=>{const externalStream=pc._reverseStreams[internalId],internalStream=pc._streams[externalStream.id];sdp=sdp.replace(new RegExp(externalStream.id,"g"),internalStream.id)})),new RTCSessionDescription({type:description.type,sdp})}(this,arguments[0]),origSetLocalDescription.apply(this,arguments)):origSetLocalDescription.apply(this,arguments)};const origLocalDescription=Object.getOwnPropertyDescriptor(window.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(window.RTCPeerConnection.prototype,"localDescription",{get(){const description=origLocalDescription.get.apply(this);return""===description.type?description:replaceInternalStreamId(this,description)}}),window.RTCPeerConnection.prototype.removeTrack=function removeTrack(sender){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!sender._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(sender._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let stream;this._streams=this._streams||{},Object.keys(this._streams).forEach((streamid=>{this._streams[streamid].getTracks().find((track=>sender.track===track))&&(stream=this._streams[streamid])})),stream&&(1===stream.getTracks().length?this.removeStream(this._reverseStreams[stream.id]):stream.removeTrack(sender.track),this.dispatchEvent(new Event("negotiationneeded")))}}function shimPeerConnection(window,browserDetails){!window.RTCPeerConnection&&window.webkitRTCPeerConnection&&(window.RTCPeerConnection=window.webkitRTCPeerConnection),window.RTCPeerConnection&&browserDetails.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){return arguments[0]=new("addIceCandidate"===method?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}};window.RTCPeerConnection.prototype[method]=methodObj[method]}))}function fixNegotiationNeeded(window,browserDetails){wrapPeerConnectionEvent(window,"negotiationneeded",(e=>{const pc=e.target;if(!(browserDetails.version<72||pc.getConfiguration&&"plan-b"===pc.getConfiguration().sdpSemantics)||"stable"===pc.signalingState)return e}))}function getusermedia_shimGetUserMedia(window,browserDetails){const navigator=window&&window.navigator,MediaStreamTrack=window&&window.MediaStreamTrack;if(navigator.getUserMedia=function(constraints,onSuccess,onError){deprecated("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),navigator.mediaDevices.getUserMedia(constraints).then(onSuccess,onError)},!(browserDetails.version>55&&"autoGainControl"in navigator.mediaDevices.getSupportedConstraints())){const remap=function(obj,a,b){a in obj&&!(b in obj)&&(obj[b]=obj[a],delete obj[a])},nativeGetUserMedia=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);if(navigator.mediaDevices.getUserMedia=function(c){return"object"==typeof c&&"object"==typeof c.audio&&(c=JSON.parse(JSON.stringify(c)),remap(c.audio,"autoGainControl","mozAutoGainControl"),remap(c.audio,"noiseSuppression","mozNoiseSuppression")),nativeGetUserMedia(c)},MediaStreamTrack&&MediaStreamTrack.prototype.getSettings){const nativeGetSettings=MediaStreamTrack.prototype.getSettings;MediaStreamTrack.prototype.getSettings=function(){const obj=nativeGetSettings.apply(this,arguments);return remap(obj,"mozAutoGainControl","autoGainControl"),remap(obj,"mozNoiseSuppression","noiseSuppression"),obj}}if(MediaStreamTrack&&MediaStreamTrack.prototype.applyConstraints){const nativeApplyConstraints=MediaStreamTrack.prototype.applyConstraints;MediaStreamTrack.prototype.applyConstraints=function(c){return"audio"===this.kind&&"object"==typeof c&&(c=JSON.parse(JSON.stringify(c)),remap(c,"autoGainControl","mozAutoGainControl"),remap(c,"noiseSuppression","mozNoiseSuppression")),nativeApplyConstraints.apply(this,[c])}}}}function shimGetDisplayMedia(window,preferredMediaSource){window.navigator.mediaDevices&&"getDisplayMedia"in window.navigator.mediaDevices||window.navigator.mediaDevices&&(window.navigator.mediaDevices.getDisplayMedia=function getDisplayMedia(constraints){if(!constraints||!constraints.video){const err=new DOMException("getDisplayMedia without video constraints is undefined");return err.name="NotFoundError",err.code=8,Promise.reject(err)}return!0===constraints.video?constraints.video={mediaSource:preferredMediaSource}:constraints.video.mediaSource=preferredMediaSource,window.navigator.mediaDevices.getUserMedia(constraints)})}function firefox_shim_shimOnTrack(window){"object"==typeof window&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)&&Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function firefox_shim_shimPeerConnection(window,browserDetails){if("object"!=typeof window||!window.RTCPeerConnection&&!window.mozRTCPeerConnection)return;!window.RTCPeerConnection&&window.mozRTCPeerConnection&&(window.RTCPeerConnection=window.mozRTCPeerConnection),browserDetails.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(method){const nativeMethod=window.RTCPeerConnection.prototype[method],methodObj={[method](){return arguments[0]=new("addIceCandidate"===method?window.RTCIceCandidate:window.RTCSessionDescription)(arguments[0]),nativeMethod.apply(this,arguments)}};window.RTCPeerConnection.prototype[method]=methodObj[method]}));const modernStatsTypes={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},nativeGetStats=window.RTCPeerConnection.prototype.getStats;window.RTCPeerConnection.prototype.getStats=function getStats(){const[selector,onSucc,onErr]=arguments;return nativeGetStats.apply(this,[selector||null]).then((stats=>{if(browserDetails.version<53&&!onSucc)try{stats.forEach((stat=>{stat.type=modernStatsTypes[stat.type]||stat.type}))}catch(e){if("TypeError"!==e.name)throw e;stats.forEach(((stat,i)=>{stats.set(i,Object.assign({},stat,{type:modernStatsTypes[stat.type]||stat.type}))}))}return stats})).then(onSucc,onErr)}}function shimSenderGetStats(window){if("object"!=typeof window||!window.RTCPeerConnection||!window.RTCRtpSender)return;if(window.RTCRtpSender&&"getStats"in window.RTCRtpSender.prototype)return;const origGetSenders=window.RTCPeerConnection.prototype.getSenders;origGetSenders&&(window.RTCPeerConnection.prototype.getSenders=function getSenders(){const senders=origGetSenders.apply(this,[]);return senders.forEach((sender=>sender._pc=this)),senders});const origAddTrack=window.RTCPeerConnection.prototype.addTrack;origAddTrack&&(window.RTCPeerConnection.prototype.addTrack=function addTrack(){const sender=origAddTrack.apply(this,arguments);return sender._pc=this,sender}),window.RTCRtpSender.prototype.getStats=function getStats(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function shimReceiverGetStats(window){if("object"!=typeof window||!window.RTCPeerConnection||!window.RTCRtpSender)return;if(window.RTCRtpSender&&"getStats"in window.RTCRtpReceiver.prototype)return;const origGetReceivers=window.RTCPeerConnection.prototype.getReceivers;origGetReceivers&&(window.RTCPeerConnection.prototype.getReceivers=function getReceivers(){const receivers=origGetReceivers.apply(this,[]);return receivers.forEach((receiver=>receiver._pc=this)),receivers}),wrapPeerConnectionEvent(window,"track",(e=>(e.receiver._pc=e.srcElement,e))),window.RTCRtpReceiver.prototype.getStats=function getStats(){return this._pc.getStats(this.track)}}function shimRemoveStream(window){window.RTCPeerConnection&&!("removeStream"in window.RTCPeerConnection.prototype)&&(window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){deprecated("removeStream","removeTrack"),this.getSenders().forEach((sender=>{sender.track&&stream.getTracks().includes(sender.track)&&this.removeTrack(sender)}))})}function shimRTCDataChannel(window){window.DataChannel&&!window.RTCDataChannel&&(window.RTCDataChannel=window.DataChannel)}function shimAddTransceiver(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origAddTransceiver=window.RTCPeerConnection.prototype.addTransceiver;origAddTransceiver&&(window.RTCPeerConnection.prototype.addTransceiver=function addTransceiver(){this.setParametersPromises=[];let sendEncodings=arguments[1]&&arguments[1].sendEncodings;void 0===sendEncodings&&(sendEncodings=[]),sendEncodings=[...sendEncodings];const shouldPerformCheck=sendEncodings.length>0;shouldPerformCheck&&sendEncodings.forEach((encodingParam=>{if("rid"in encodingParam){if(!/^[a-z0-9]{0,16}$/i.test(encodingParam.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in encodingParam&&!(parseFloat(encodingParam.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in encodingParam&&!(parseFloat(encodingParam.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const transceiver=origAddTransceiver.apply(this,arguments);if(shouldPerformCheck){const{sender}=transceiver,params=sender.getParameters();(!("encodings"in params)||1===params.encodings.length&&0===Object.keys(params.encodings[0]).length)&&(params.encodings=sendEncodings,sender.sendEncodings=sendEncodings,this.setParametersPromises.push(sender.setParameters(params).then((()=>{delete sender.sendEncodings})).catch((()=>{delete sender.sendEncodings}))))}return transceiver})}function shimGetParameters(window){if("object"!=typeof window||!window.RTCRtpSender)return;const origGetParameters=window.RTCRtpSender.prototype.getParameters;origGetParameters&&(window.RTCRtpSender.prototype.getParameters=function getParameters(){const params=origGetParameters.apply(this,arguments);return"encodings"in params||(params.encodings=[].concat(this.sendEncodings||[{}])),params})}function shimCreateOffer(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>origCreateOffer.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):origCreateOffer.apply(this,arguments)}}function shimCreateAnswer(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const origCreateAnswer=window.RTCPeerConnection.prototype.createAnswer;window.RTCPeerConnection.prototype.createAnswer=function createAnswer(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>origCreateAnswer.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):origCreateAnswer.apply(this,arguments)}}function shimLocalStreamsAPI(window){if("object"==typeof window&&window.RTCPeerConnection){if("getLocalStreams"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.getLocalStreams=function getLocalStreams(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in window.RTCPeerConnection.prototype)){const _addTrack=window.RTCPeerConnection.prototype.addTrack;window.RTCPeerConnection.prototype.addStream=function addStream(stream){this._localStreams||(this._localStreams=[]),this._localStreams.includes(stream)||this._localStreams.push(stream),stream.getAudioTracks().forEach((track=>_addTrack.call(this,track,stream))),stream.getVideoTracks().forEach((track=>_addTrack.call(this,track,stream)))},window.RTCPeerConnection.prototype.addTrack=function addTrack(track,...streams){return streams&&streams.forEach((stream=>{this._localStreams?this._localStreams.includes(stream)||this._localStreams.push(stream):this._localStreams=[stream]})),_addTrack.apply(this,arguments)}}"removeStream"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.removeStream=function removeStream(stream){this._localStreams||(this._localStreams=[]);const index=this._localStreams.indexOf(stream);if(-1===index)return;this._localStreams.splice(index,1);const tracks=stream.getTracks();this.getSenders().forEach((sender=>{tracks.includes(sender.track)&&this.removeTrack(sender)}))})}}function shimRemoteStreamsAPI(window){if("object"==typeof window&&window.RTCPeerConnection&&("getRemoteStreams"in window.RTCPeerConnection.prototype||(window.RTCPeerConnection.prototype.getRemoteStreams=function getRemoteStreams(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in window.RTCPeerConnection.prototype))){Object.defineProperty(window.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(f){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=f),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((stream=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(stream))return;this._remoteStreams.push(stream);const event=new Event("addstream");event.stream=stream,this.dispatchEvent(event)}))})}});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){const pc=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(e){e.streams.forEach((stream=>{if(pc._remoteStreams||(pc._remoteStreams=[]),pc._remoteStreams.indexOf(stream)>=0)return;pc._remoteStreams.push(stream);const event=new Event("addstream");event.stream=stream,pc.dispatchEvent(event)}))}),origSetRemoteDescription.apply(pc,arguments)}}}function shimCallbacksAPI(window){if("object"!=typeof window||!window.RTCPeerConnection)return;const prototype=window.RTCPeerConnection.prototype,origCreateOffer=prototype.createOffer,origCreateAnswer=prototype.createAnswer,setLocalDescription=prototype.setLocalDescription,setRemoteDescription=prototype.setRemoteDescription,addIceCandidate=prototype.addIceCandidate;prototype.createOffer=function createOffer(successCallback,failureCallback){const options=arguments.length>=2?arguments[2]:arguments[0],promise=origCreateOffer.apply(this,[options]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.createAnswer=function createAnswer(successCallback,failureCallback){const options=arguments.length>=2?arguments[2]:arguments[0],promise=origCreateAnswer.apply(this,[options]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise};let withCallback=function(description,successCallback,failureCallback){const promise=setLocalDescription.apply(this,[description]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise};prototype.setLocalDescription=withCallback,withCallback=function(description,successCallback,failureCallback){const promise=setRemoteDescription.apply(this,[description]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.setRemoteDescription=withCallback,withCallback=function(candidate,successCallback,failureCallback){const promise=addIceCandidate.apply(this,[candidate]);return failureCallback?(promise.then(successCallback,failureCallback),Promise.resolve()):promise},prototype.addIceCandidate=withCallback}function safari_shim_shimGetUserMedia(window){const navigator=window&&window.navigator;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const mediaDevices=navigator.mediaDevices,_getUserMedia=mediaDevices.getUserMedia.bind(mediaDevices);navigator.mediaDevices.getUserMedia=constraints=>_getUserMedia(shimConstraints(constraints))}!navigator.getUserMedia&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia&&(navigator.getUserMedia=function getUserMedia(constraints,cb,errcb){navigator.mediaDevices.getUserMedia(constraints).then(cb,errcb)}.bind(navigator))}function shimConstraints(constraints){return constraints&&void 0!==constraints.video?Object.assign({},constraints,{video:compactObject(constraints.video)}):constraints}function shimRTCIceServerUrls(window){if(!window.RTCPeerConnection)return;const OrigPeerConnection=window.RTCPeerConnection;window.RTCPeerConnection=function RTCPeerConnection(pcConfig,pcConstraints){if(pcConfig&&pcConfig.iceServers){const newIceServers=[];for(let i=0;i<pcConfig.iceServers.length;i++){let server=pcConfig.iceServers[i];void 0===server.urls&&server.url?(deprecated("RTCIceServer.url","RTCIceServer.urls"),server=JSON.parse(JSON.stringify(server)),server.urls=server.url,delete server.url,newIceServers.push(server)):newIceServers.push(pcConfig.iceServers[i])}pcConfig.iceServers=newIceServers}return new OrigPeerConnection(pcConfig,pcConstraints)},window.RTCPeerConnection.prototype=OrigPeerConnection.prototype,"generateCertificate"in OrigPeerConnection&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:()=>OrigPeerConnection.generateCertificate})}function shimTrackEventTransceiver(window){"object"==typeof window&&window.RTCTrackEvent&&"receiver"in window.RTCTrackEvent.prototype&&!("transceiver"in window.RTCTrackEvent.prototype)&&Object.defineProperty(window.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function shimCreateOfferLegacy(window){const origCreateOffer=window.RTCPeerConnection.prototype.createOffer;window.RTCPeerConnection.prototype.createOffer=function createOffer(offerOptions){if(offerOptions){void 0!==offerOptions.offerToReceiveAudio&&(offerOptions.offerToReceiveAudio=!!offerOptions.offerToReceiveAudio);const audioTransceiver=this.getTransceivers().find((transceiver=>"audio"===transceiver.receiver.track.kind));!1===offerOptions.offerToReceiveAudio&&audioTransceiver?"sendrecv"===audioTransceiver.direction?audioTransceiver.setDirection?audioTransceiver.setDirection("sendonly"):audioTransceiver.direction="sendonly":"recvonly"===audioTransceiver.direction&&(audioTransceiver.setDirection?audioTransceiver.setDirection("inactive"):audioTransceiver.direction="inactive"):!0!==offerOptions.offerToReceiveAudio||audioTransceiver||this.addTransceiver("audio",{direction:"recvonly"}),void 0!==offerOptions.offerToReceiveVideo&&(offerOptions.offerToReceiveVideo=!!offerOptions.offerToReceiveVideo);const videoTransceiver=this.getTransceivers().find((transceiver=>"video"===transceiver.receiver.track.kind));!1===offerOptions.offerToReceiveVideo&&videoTransceiver?"sendrecv"===videoTransceiver.direction?videoTransceiver.setDirection?videoTransceiver.setDirection("sendonly"):videoTransceiver.direction="sendonly":"recvonly"===videoTransceiver.direction&&(videoTransceiver.setDirection?videoTransceiver.setDirection("inactive"):videoTransceiver.direction="inactive"):!0!==offerOptions.offerToReceiveVideo||videoTransceiver||this.addTransceiver("video",{direction:"recvonly"})}return origCreateOffer.apply(this,arguments)}}function shimAudioContext(window){"object"!=typeof window||window.AudioContext||(window.AudioContext=window.webkitAudioContext)}var sdp=__webpack_require__("./node_modules/sdp/sdp.js"),sdp_default=__webpack_require__.n(sdp);function shimRTCIceCandidate(window){if(!window.RTCIceCandidate||window.RTCIceCandidate&&"foundation"in window.RTCIceCandidate.prototype)return;const NativeRTCIceCandidate=window.RTCIceCandidate;window.RTCIceCandidate=function RTCIceCandidate(args){if("object"==typeof args&&args.candidate&&0===args.candidate.indexOf("a=")&&((args=JSON.parse(JSON.stringify(args))).candidate=args.candidate.substring(2)),args.candidate&&args.candidate.length){const nativeCandidate=new NativeRTCIceCandidate(args),parsedCandidate=sdp_default().parseCandidate(args.candidate);for(const key in parsedCandidate)key in nativeCandidate||Object.defineProperty(nativeCandidate,key,{value:parsedCandidate[key]});return nativeCandidate.toJSON=function toJSON(){return{candidate:nativeCandidate.candidate,sdpMid:nativeCandidate.sdpMid,sdpMLineIndex:nativeCandidate.sdpMLineIndex,usernameFragment:nativeCandidate.usernameFragment}},nativeCandidate}return new NativeRTCIceCandidate(args)},window.RTCIceCandidate.prototype=NativeRTCIceCandidate.prototype,wrapPeerConnectionEvent(window,"icecandidate",(e=>(e.candidate&&Object.defineProperty(e,"candidate",{value:new window.RTCIceCandidate(e.candidate),writable:"false"}),e)))}function shimRTCIceCandidateRelayProtocol(window){!window.RTCIceCandidate||window.RTCIceCandidate&&"relayProtocol"in window.RTCIceCandidate.prototype||wrapPeerConnectionEvent(window,"icecandidate",(e=>{if(e.candidate){const parsedCandidate=sdp_default().parseCandidate(e.candidate.candidate);"relay"===parsedCandidate.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[parsedCandidate.priority>>24])}return e}))}function shimMaxMessageSize(window,browserDetails){if(!window.RTCPeerConnection)return;"sctp"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"sctp",{get(){return void 0===this._sctp?null:this._sctp}});const origSetRemoteDescription=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(){if(this._sctp=null,"chrome"===browserDetails.browser&&browserDetails.version>=76){const{sdpSemantics}=this.getConfiguration();"plan-b"===sdpSemantics&&Object.defineProperty(this,"sctp",{get(){return void 0===this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(description){if(!description||!description.sdp)return!1;const sections=sdp_default().splitSections(description.sdp);return sections.shift(),sections.some((mediaSection=>{const mLine=sdp_default().parseMLine(mediaSection);return mLine&&"application"===mLine.kind&&-1!==mLine.protocol.indexOf("SCTP")}))}(arguments[0])){const isFirefox=function(description){const match=description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===match||match.length<2)return-1;const version=parseInt(match[1],10);return version!=version?-1:version}(arguments[0]),canSendMMS=function(remoteIsFirefox){let canSendMaxMessageSize=65536;return"firefox"===browserDetails.browser&&(canSendMaxMessageSize=browserDetails.version<57?-1===remoteIsFirefox?16384:2147483637:browserDetails.version<60?57===browserDetails.version?65535:65536:2147483637),canSendMaxMessageSize}(isFirefox),remoteMMS=function(description,remoteIsFirefox){let maxMessageSize=65536;"firefox"===browserDetails.browser&&57===browserDetails.version&&(maxMessageSize=65535);const match=sdp_default().matchPrefix(description.sdp,"a=max-message-size:");return match.length>0?maxMessageSize=parseInt(match[0].substring(19),10):"firefox"===browserDetails.browser&&-1!==remoteIsFirefox&&(maxMessageSize=2147483637),maxMessageSize}(arguments[0],isFirefox);let maxMessageSize;maxMessageSize=0===canSendMMS&&0===remoteMMS?Number.POSITIVE_INFINITY:0===canSendMMS||0===remoteMMS?Math.max(canSendMMS,remoteMMS):Math.min(canSendMMS,remoteMMS);const sctp={};Object.defineProperty(sctp,"maxMessageSize",{get:()=>maxMessageSize}),this._sctp=sctp}return origSetRemoteDescription.apply(this,arguments)}}function shimSendThrowTypeError(window){if(!window.RTCPeerConnection||!("createDataChannel"in window.RTCPeerConnection.prototype))return;function wrapDcSend(dc,pc){const origDataChannelSend=dc.send;dc.send=function send(){const data=arguments[0],length=data.length||data.size||data.byteLength;if("open"===dc.readyState&&pc.sctp&&length>pc.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+pc.sctp.maxMessageSize+" bytes)");return origDataChannelSend.apply(dc,arguments)}}const origCreateDataChannel=window.RTCPeerConnection.prototype.createDataChannel;window.RTCPeerConnection.prototype.createDataChannel=function createDataChannel(){const dataChannel=origCreateDataChannel.apply(this,arguments);return wrapDcSend(dataChannel,this),dataChannel},wrapPeerConnectionEvent(window,"datachannel",(e=>(wrapDcSend(e.channel,e.target),e)))}function shimConnectionState(window){if(!window.RTCPeerConnection||"connectionState"in window.RTCPeerConnection.prototype)return;const proto=window.RTCPeerConnection.prototype;Object.defineProperty(proto,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(proto,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(cb){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),cb&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=cb)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((method=>{const origMethod=proto[method];proto[method]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const pc=e.target;if(pc._lastConnectionState!==pc.connectionState){pc._lastConnectionState=pc.connectionState;const newEvent=new Event("connectionstatechange",e);pc.dispatchEvent(newEvent)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),origMethod.apply(this,arguments)}}))}function removeExtmapAllowMixed(window,browserDetails){if(!window.RTCPeerConnection)return;if("chrome"===browserDetails.browser&&browserDetails.version>=71)return;if("safari"===browserDetails.browser&&browserDetails._safariVersion>=13.1)return;const nativeSRD=window.RTCPeerConnection.prototype.setRemoteDescription;window.RTCPeerConnection.prototype.setRemoteDescription=function setRemoteDescription(desc){if(desc&&desc.sdp&&-1!==desc.sdp.indexOf("\na=extmap-allow-mixed")){const sdp=desc.sdp.split("\n").filter((line=>"a=extmap-allow-mixed"!==line.trim())).join("\n");window.RTCSessionDescription&&desc instanceof window.RTCSessionDescription?arguments[0]=new window.RTCSessionDescription({type:desc.type,sdp}):desc.sdp=sdp}return nativeSRD.apply(this,arguments)}}function shimAddIceCandidateNullOrEmpty(window,browserDetails){if(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype)return;const nativeAddIceCandidate=window.RTCPeerConnection.prototype.addIceCandidate;nativeAddIceCandidate&&0!==nativeAddIceCandidate.length&&(window.RTCPeerConnection.prototype.addIceCandidate=function addIceCandidate(){return arguments[0]?("chrome"===browserDetails.browser&&browserDetails.version<78||"firefox"===browserDetails.browser&&browserDetails.version<68||"safari"===browserDetails.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():nativeAddIceCandidate.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function shimParameterlessSetLocalDescription(window,browserDetails){if(!window.RTCPeerConnection||!window.RTCPeerConnection.prototype)return;const nativeSetLocalDescription=window.RTCPeerConnection.prototype.setLocalDescription;nativeSetLocalDescription&&0!==nativeSetLocalDescription.length&&(window.RTCPeerConnection.prototype.setLocalDescription=function setLocalDescription(){let desc=arguments[0]||{};if("object"!=typeof desc||desc.type&&desc.sdp)return nativeSetLocalDescription.apply(this,arguments);if(desc={type:desc.type,sdp:desc.sdp},!desc.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":desc.type="offer";break;default:desc.type="answer"}if(desc.sdp||"offer"!==desc.type&&"answer"!==desc.type)return nativeSetLocalDescription.apply(this,[desc]);return("offer"===desc.type?this.createOffer:this.createAnswer).apply(this).then((d=>nativeSetLocalDescription.apply(this,[d])))})}(function adapterFactory({window}={},options={shimChrome:!0,shimFirefox:!0,shimSafari:!0}){const logging=log,browserDetails=function detectBrowser(window){const result={browser:null,version:null};if(void 0===window||!window.navigator||!window.navigator.userAgent)return result.browser="Not a browser.",result;const{navigator}=window;if(navigator.userAgentData&&navigator.userAgentData.brands){const chromium=navigator.userAgentData.brands.find((brand=>"Chromium"===brand.brand));if(chromium)return{browser:"chrome",version:parseInt(chromium.version,10)}}if(navigator.mozGetUserMedia)result.browser="firefox",result.version=parseInt(extractVersion(navigator.userAgent,/Firefox\/(\d+)\./,1));else if(navigator.webkitGetUserMedia||!1===window.isSecureContext&&window.webkitRTCPeerConnection)result.browser="chrome",result.version=parseInt(extractVersion(navigator.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else{if(!window.RTCPeerConnection||!navigator.userAgent.match(/AppleWebKit\/(\d+)\./))return result.browser="Not a supported browser.",result;result.browser="safari",result.version=parseInt(extractVersion(navigator.userAgent,/AppleWebKit\/(\d+)\./,1)),result.supportsUnifiedPlan=window.RTCRtpTransceiver&&"currentDirection"in window.RTCRtpTransceiver.prototype,result._safariVersion=extractVersion(navigator.userAgent,/Version\/(\d+(\.?\d+))/,1)}return result}(window),adapter={browserDetails,commonShim:common_shim_namespaceObject,extractVersion,disableLog,disableWarnings,sdp};switch(browserDetails.browser){case"chrome":if(!chrome_shim_namespaceObject||!shimPeerConnection||!options.shimChrome)return logging("Chrome shim is not included in this adapter release."),adapter;if(null===browserDetails.version)return logging("Chrome shim can not determine version, not shimming."),adapter;logging("adapter.js shimming chrome."),adapter.browserShim=chrome_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),shimGetUserMedia(window,browserDetails),shimMediaStream(window),shimPeerConnection(window,browserDetails),shimOnTrack(window),shimAddTrackRemoveTrack(window,browserDetails),shimGetSendersWithDtmf(window),shimSenderReceiverGetStats(window),fixNegotiationNeeded(window,browserDetails),shimRTCIceCandidate(window),shimRTCIceCandidateRelayProtocol(window),shimConnectionState(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window),removeExtmapAllowMixed(window,browserDetails);break;case"firefox":if(!firefox_shim_namespaceObject||!firefox_shim_shimPeerConnection||!options.shimFirefox)return logging("Firefox shim is not included in this adapter release."),adapter;logging("adapter.js shimming firefox."),adapter.browserShim=firefox_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),getusermedia_shimGetUserMedia(window,browserDetails),firefox_shim_shimPeerConnection(window,browserDetails),firefox_shim_shimOnTrack(window),shimRemoveStream(window),shimSenderGetStats(window),shimReceiverGetStats(window),shimRTCDataChannel(window),shimAddTransceiver(window),shimGetParameters(window),shimCreateOffer(window),shimCreateAnswer(window),shimRTCIceCandidate(window),shimConnectionState(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window);break;case"safari":if(!safari_shim_namespaceObject||!options.shimSafari)return logging("Safari shim is not included in this adapter release."),adapter;logging("adapter.js shimming safari."),adapter.browserShim=safari_shim_namespaceObject,shimAddIceCandidateNullOrEmpty(window,browserDetails),shimParameterlessSetLocalDescription(window),shimRTCIceServerUrls(window),shimCreateOfferLegacy(window),shimCallbacksAPI(window),shimLocalStreamsAPI(window),shimRemoteStreamsAPI(window),shimTrackEventTransceiver(window),safari_shim_shimGetUserMedia(window),shimAudioContext(window),shimRTCIceCandidate(window),shimRTCIceCandidateRelayProtocol(window),shimMaxMessageSize(window,browserDetails),shimSendThrowTypeError(window),removeExtmapAllowMixed(window,browserDetails);break;default:logging("Unsupported browser!")}return adapter})({window:"undefined"==typeof window?void 0:window})}}]);